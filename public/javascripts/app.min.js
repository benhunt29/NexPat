var app=angular.module("NextPat",["ngRoute","ngMaterial","ngMessages","validation.match"]);app.config(["$httpProvider","$routeProvider","$locationProvider","$mdThemingProvider",function(e,t,n,a){n.html5Mode(!0),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"],e.interceptors.push("authInterceptor"),a.theme("default").primaryPalette("blue-grey").accentPalette("grey").warnPalette("red").backgroundPalette("blue-grey"),t.when("/",{templateUrl:"/views/home.html",controller:"homeController"}).when("/about",{templateUrl:"/views/about.html",controller:"aboutController"}).when("/contact",{templateUrl:"/views/contact.html",controller:"contactController"}).when("/login",{templateUrl:"/views/login.html",controller:"loginController"}).when("/signUp",{templateUrl:"/views/signUp.html",controller:"signUpController"}).when("/questionnaire",{templateUrl:"/views/questionnaire.html",controller:"questionnaireController"}).when("/help",{templateUrl:"/views/help.html",controller:"helpController"}).when("/country",{templateUrl:"/views/country.html",controller:"countryController"}).otherwise({redirectTo:"/"})}]),app.controller("homeController",["authService","countryPage","questionnaire","userRecommendations","$http","$rootScope","$scope","$location",function(e,t,n,a,o,r,i,s){if(r.user=e.getUser(),r.user&&r.user.username)o.get("/api/questionnaire/"+r.user.username).then(function(e){"object"==typeof e.data?o.post("/api/worldFactbook",{languageOption:!0,language:e.data.question1}).then(function(t){i.recommendations=n.determineRecommendations(e.data,t.data),a.countries=i.recommendations}):s.path("/questionnaire")});else{var u=[{question:"Have you been here before?",route:"login"},{question:"Would you like to sign up?",route:"signUp"},{question:"Okay, you won't be able to do much..."}];i.question=u[0].question;var l=0;i.showButtons=!0,i.getQuestion=function(e){var t=(u[l].question,u[l].route);e?s.path(t):(l++,i.question=u[l].question,l==u.length-1&&(i.showButtons=!1))}}i.setCountryPage=function(e){t.name=e.countryName,t.abbreviation=e.abbreviation,t.largestCityName=e.largestCityName?e.largestCityName:"No Information",t.largestCityPop=e.largestCityPop?e.largestCityPop:"No Information",t.majorityLanguage=e.majorityLanguage,t.medianAge=e.medianAge,s.path("/country")}}]),app.controller("aboutController",["$scope",function(e){}]),app.controller("contactController",["$scope",function(e){}]),app.controller("signUpController",["$mdToast","$location","$scope","$http",function(e,t,n,a){n.register=function(){var e={username:n.form.userName,email:n.form.email,password:n.form.password,lastName:n.form.lastName,firstName:n.form.firstName,passwordConfirm:n.form.passwordConfirm};a.post("/api/register",e).then(function(e){t.path("/login")},function(e){n.errorToast(e.data.error)})},n.errorToast=function(t){e.show(e.simple().content(t).hideDelay(3e3))}}]),app.controller("countryController",["sharedService","countryPage","$scope","$http",function(e,t,n,a){n.countryName=t.name,n.abbreviation=t.abbreviation,n.largestCityName=t.largestCityName,n.largestCityPop=t.largestCityPop,n.majorityLanguage=t.majorityLanguage,n.medianAge=t.medianAge,n.worldBankData={};var o=function(){a.get("/externalAPIs/worldBankData/"+n.abbreviation).then(function(e){n.worldBankData.column1=e.data.slice(0,e.data.length/2),n.worldBankData.column2=e.data.slice(e.data.length/2,e.data.length)},function(e){n.data="There was an error, try again later!"})};o();var r=encodeURI(n.countryName),i=function(){a.get("/externalAPIs/mediWiki/"+r).then(function(e){n.flagUrl=e.data},function(e){n.data="There was an error, try again later!"})};i()}]),app.controller("loginController",["$mdToast","$scope","$http","authService","$location","$rootScope",function(e,t,n,a,o,r){t.signIn=function(){var e={username:t.form.userName,password:t.form.password};n.post("api/login",e).then(function(e){a.saveToken(e.data),r.user=a.getUser(),o.path("/")},function(e){t.errorToast(e.data.error)})},t.errorToast=function(t){e.show(e.simple().content(t).hideDelay(3e3))}}]),app.controller("navCtrl",["userRecommendations","authService","$scope","$rootScope","$location","$http",function(e,t,n,a,o,r){a.user=t.getUser(),a.user&&a.user.username&&o.path("/"),n.logout=function(){r.get("/api/logout").then(function(e){}),t.logout(),a.user=t.getUser(),e={},o.path("/home")}}]),app.controller("helpController",["$scope",function(e){e.message="I'm a help page that currently doesn't help at all"}]),app.controller("questionnaireController",["countryPage","userRecommendations","questionnaire","$rootScope","$scope","$location","$http",function(e,t,n,a,o,r,i){function s(){return o.list.map(function(e){return{value:e.toLowerCase(),display:e}})}function u(e){var t=angular.lowercase(e);return function(e){return 0===e.value.indexOf(t)}}a.user.username||r.path("/");var l=n.questions,c={},p={};o.questionNum=0,o.data={},o.data={},o.answers=[],o.querySearch=function(e){return e?o.list.filter(u(e)):o.list},o.pushAnswer=function(e){e&&(o.answers.push(e),o.data.showAnswers=!0,o.searchText="")},a.user.username&&i.get("/api/questionnaire/"+a.user.username).then(function(e){"object"==typeof e.data?i.post("/api/worldFactbook",{languageOption:!0,language:e.data.question1}).then(function(a){o.recommendations=n.determineRecommendations(e.data,a.data),t.countries=o.recommendations}):(o.getQuestion(),o.list=s())}),o.getQuestion=function(){o.data.showAnswers=!1,o.questionNum==l.length?(o.question="Your list is being generated!",p.username=a.user.username,p.questionResponses=c,i.post("/api/questionnaire",p),i.post("/api/worldFactbook",{languageOption:!0,language:c.question1}).then(function(e){o.recommendations=n.determineRecommendations(c,e.data),t.countries=o.recommendations,r.path("/")}),o.type=""):(o.question=l[o.questionNum].question,o.type=l[o.questionNum].type,"list"==o.type&&(o.list=l[o.questionNum].answerOptions))},o.logAnswer=function(e){o.data.showAnswers=!1,o.questionNum++,e.constructor===Array&&(e=e.join(" ")),c["question"+o.questionNum]=e,o.answers=[],o.searchText=""},o.addCountry=function(){i.post("/api/userCountries",{username:a.user.username,userCountries:["france","germany","spain"]}).then(function(e){o.userCountries=e.userCountries})},o.deleteQuestionnaire=function(){i["delete"]("api/questionnaire/"+a.user.username).then(function(e){t={},o.recommendations=!1,o.questionNum=0,o.getQuestion(),o.list=s()})}}]),app.service("authService",["$window",function(e){this.parseJwt=function(t){if(t){var n=t.split(".")[1],a=n.replace("-","+").replace("_","/");return JSON.parse(e.atob(a))}return{}},this.saveToken=function(t){e.localStorage.jwtToken=t},this.getToken=function(){return e.localStorage.jwtToken},this.isAuthed=function(){var e=this.getToken();if(e){var t=this.parseJwt(e),n=Math.round((new Date).getTime()/1e3)<=t.exp;return n||this.logout(),n}return!1},this.logout=function(){delete e.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.factory("authInterceptor",["$q","$location","authService",function(e,t,n){return{request:function(e){return e.headers=e.headers||{},n.isAuthed()&&(e.headers.Authorization="Bearer "+n.getToken()),e},response:function(a){return t.search().access_token&&(n.saveToken(t.search().access_token),t.search("access_token",void 0),t.path("/")),401===a.status&&t.path("/login"),a||e.when(a)},responseError:function(n){return 401===n.status&&t.path("/login"),e.reject(n)}}}]),app.factory("questionnaire",function(){return{questions:[{question:"What language(s) do you speak?",type:"list",answerOptions:["Adyghe","Albanian","Aragonese","Armenian","Aromanian","Arpitan","Asturian","Avar","Azerbaijani","Bashkir","Basque","Belarusian","Bosnian","Breton","Bulgarian","Catalan","Chechen","Chuvash","Cornish","Corsican","Crimean","Croatian","Czech","Danish","Dutch","English","Erzya","Estonian","Faroese","Finnish","French","Frisian","Gagauz","Galician","Gallo","Georgian","German","Greek","Hungarian","Icelandic","Ingrian","Irish","Italian","Kabardian","Kashubian","Kazakh","Ladin","Latin","Latvian","Laz","Lithuanian","Luxembourgish","Macedonian","Maltese","Manx","Mari","Mingrelian","Mirandese","Montenegrin","Norwegian","Occitan","Ossetian","Picard","Polish","Portuguese","Romani","Romanian","Romansh","Russian","Sami","Sardinian","Scots","Scottish","Gaelic","Serbian","Silesian","Slovak","Slovene","Sorbian","Spanish","Svan","Swedish","Tabasaran","Tatar","Turkish","Ukrainian","Vepsian","VÃµro","Walloon","Welsh","Wymysorys"]},{question:"What field do you work in?",type:"list",answerOptions:["Agriculture","Industry","Services"]},{question:"What climate(s) would you prefer?",type:"list",answerOptions:["Temperate","Mediterranean","Tropical","Arid","Desert","Maritime","Wet"]},{question:"What is the ideal size for the largest metropolitan area?",type:"list",answerOptions:["Small (<100,000)","Medium (100,000-1 million)","Large (>1 million)"]},{question:"Would you like the population distribution to be mostly urban?",type:"boolean"},{question:"What would your ideal median age range be?",type:"list",answerOptions:["20-30yrs","30-40yrs","40+years"]},{question:"What cost of living should your destination have?",type:"list",answerOptions:["High","Average","Low"]},{question:"What percentage of the population should be internet users?",type:"list",answerOptions:["<25%","25%-50%","50%-75%",">75%"]}],determineRecommendations:function(e,t){function n(e,t,n){if(n>=e&&t>=n)return 10;var a=Math.abs(n-e)>Math.abs(n-t)?t:e,o=n>a?.5:1.5,r=20*(1-Math.min(1,Math.abs(n-o*a)/a));return r}return countries=[],t.forEach(function(t,a){var o,r,i,s=0,u=t.labor[e.question2]||0,l=u/7.5>10?10:u/10;i="array"==typeof e.question3?new RegExp(e.question3.join("|"),"i"):new RegExp(e.question3,"i");var c=null!=t.climate.match(i)?10:0,p=e.question4;switch(p){case"Small (<100,000)":r=0,o=1e5;break;case"Medium (100,000-1 million)":r=1e5,o=1e6;break;case"Large (>1 million)":r=1e6,o=1e20}var h,m=n(r,o,t.largestCityPop)||0,g=e.question5;h=g?t.urbanPopulation>50?10:10*t.urbanPopulation/50:t.urbanPopulation<50?10:500/t.urbanPopulation;var d=e.question6;switch(d){case"20-30yrs":r=0,o=30;break;case"30-40yrs":r=30,o=40;break;case"40+years":r=40,o=150}var f=n(r,o,t.medianAge),y=e.question7;switch(y){case"High":r=6e4,o=1e10;break;case"Average":r=3e4,o=6e4;break;case"Low":r=0,o=3e4}var w=n(r,o,t.perCapitaPPP),v=e.question8;switch(v){case"<25%":r=0,o=25;break;case"25%-50%":r=25,o=50;break;case"50%-75%":r=50,o=75;break;default:r=75,o=100}var b=n(r,o,t.internetUsagePerCapita);s=s+l+c+m+h+w+f+b,t.score=s,countries.push(t)}),countries.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:e.countryName>t.countryName?1:e.countryName<t.countryName?-1:0}),countries.slice(0,4)}}}),app.factory("countryPage",function(){return{}}),app.factory("userRecommendations",function(){return{}}),app.factory("sharedService",["$rootScope",function(e){var t={};return t.values={},t.worldBankDataUpdate=function(){e.$broadcast("update")},t}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGh0dHBQcm92aWRlciIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJkZWZhdWx0cyIsInVzZVhEb21haW4iLCJoZWFkZXJzIiwiY29tbW9uIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiYXV0aFNlcnZpY2UiLCJjb3VudHJ5UGFnZSIsInF1ZXN0aW9ubmFpcmUiLCJ1c2VyUmVjb21tZW5kYXRpb25zIiwiJGh0dHAiLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwiJGxvY2F0aW9uIiwidXNlciIsImdldFVzZXIiLCJ1c2VybmFtZSIsImdldCIsInRoZW4iLCJ1c2VyQW5zd2VycyIsImRhdGEiLCJwb3N0IiwibGFuZ3VhZ2VPcHRpb24iLCJsYW5ndWFnZSIsInF1ZXN0aW9uMSIsImNvdW50cmllc1RvU2VhcmNoIiwicmVjb21tZW5kYXRpb25zIiwiZGV0ZXJtaW5lUmVjb21tZW5kYXRpb25zIiwiY291bnRyaWVzIiwicGF0aCIsImludHJvUXVlc3Rpb25zIiwicXVlc3Rpb24iLCJyb3V0ZSIsInF1ZXN0aW9uTnVtIiwic2hvd0J1dHRvbnMiLCJnZXRRdWVzdGlvbiIsImFuc3dlciIsImxlbmd0aCIsInNldENvdW50cnlQYWdlIiwiY291bnRyeSIsIm5hbWUiLCJjb3VudHJ5TmFtZSIsImFiYnJldmlhdGlvbiIsImxhcmdlc3RDaXR5TmFtZSIsImxhcmdlc3RDaXR5UG9wIiwibWFqb3JpdHlMYW5ndWFnZSIsIm1lZGlhbkFnZSIsIiRtZFRvYXN0IiwicmVnaXN0ZXIiLCJuZXdVc2VyIiwiZm9ybSIsInVzZXJOYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImxhc3ROYW1lIiwiZmlyc3ROYW1lIiwicGFzc3dvcmRDb25maXJtIiwicmVzcG9uc2UiLCJlcnJvclRvYXN0IiwiZXJyb3IiLCJtZXNzYWdlIiwic2hvdyIsInNpbXBsZSIsImNvbnRlbnQiLCJoaWRlRGVsYXkiLCJzaGFyZWRTZXJ2aWNlIiwid29ybGRCYW5rRGF0YSIsImdldERhdGEiLCJjb2x1bW4xIiwic2xpY2UiLCJjb2x1bW4yIiwibWVkaVdpa2lDb3VudHJ5TmFtZSIsImVuY29kZVVSSSIsImdldEZsYWciLCJmbGFnVXJsIiwic2lnbkluIiwic2F2ZVRva2VuIiwibG9nb3V0IiwibG9hZEFsbCIsImxpc3QiLCJtYXAiLCJpdGVtIiwidmFsdWUiLCJ0b0xvd2VyQ2FzZSIsImRpc3BsYXkiLCJjcmVhdGVGaWx0ZXJGb3IiLCJxdWVyeSIsImxvd2VyY2FzZVF1ZXJ5IiwibG93ZXJjYXNlIiwiaW5kZXhPZiIsInF1ZXN0aW9ucyIsInF1ZXN0aW9uUmVzcG9uc2VzIiwidXNlclF1ZXN0aW9ubmFpcmUiLCJhbnN3ZXJzIiwicXVlcnlTZWFyY2giLCJmaWx0ZXIiLCJwdXNoQW5zd2VyIiwic2hvd0Fuc3dlcnMiLCJzZWFyY2hUZXh0IiwidHlwZSIsImFuc3dlck9wdGlvbnMiLCJsb2dBbnN3ZXIiLCJjb25zdHJ1Y3RvciIsIkFycmF5Iiwiam9pbiIsImFkZENvdW50cnkiLCJ1c2VyQ291bnRyaWVzIiwiZGVsZXRlUXVlc3Rpb25uYWlyZSIsInNlcnZpY2UiLCIkd2luZG93IiwidGhpcyIsInBhcnNlSnd0IiwidG9rZW4iLCJiYXNlNjRVcmwiLCJzcGxpdCIsImJhc2U2NCIsInJlcGxhY2UiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwibG9jYWxTdG9yYWdlIiwiand0VG9rZW4iLCJnZXRUb2tlbiIsImlzQXV0aGVkIiwicGFyYW1zIiwibm90RXhwaXJlZCIsIk1hdGgiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwiZXhwIiwiZmFjdG9yeSIsIiRxIiwicmVxdWVzdCIsIkF1dGhvcml6YXRpb24iLCJzZWFyY2giLCJhY2Nlc3NfdG9rZW4iLCJ1bmRlZmluZWQiLCJzdGF0dXMiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0IiwicXVlc3Rpb25uYWlyZUFuc3dlcnMiLCJnZXRQcm9wb3J0aW9uYWxTY29yZSIsImxvd2VyTGltaXQiLCJ1cHBlckxpbWl0IiwibGltaXQiLCJhYnMiLCJtdWx0aXBsaWVyIiwic2NvcmUiLCJtaW4iLCJmb3JFYWNoIiwiaW5kZXgiLCJjbGltYXRlU3RyaW5nIiwibGFib3JQZXJjZW50IiwibGFib3IiLCJxdWVzdGlvbjIiLCJsYWJvclNjb3JlIiwicXVlc3Rpb24zIiwiUmVnRXhwIiwiY2xpbWF0ZVNjb3JlIiwiY2xpbWF0ZSIsIm1hdGNoIiwidXNlckxhcmdlc3RDaXR5UG9wIiwicXVlc3Rpb240IiwidXJiYW5Qb3B1bGF0aW9uU2NvcmUiLCJsYXJnZXN0Q2l0eVBvcFNjb3JlIiwidXNlclVyYmFuUG9wdWxhdGlvbiIsInF1ZXN0aW9uNSIsInVyYmFuUG9wdWxhdGlvbiIsInVzZXJNZWRpYW5BZ2UiLCJxdWVzdGlvbjYiLCJtZWRpYW5BZ2VTY29yZSIsInVzZXJQZXJDYXBpdGFQUFAiLCJxdWVzdGlvbjciLCJwZXJDYXBpdGFQUFBTY29yZSIsInBlckNhcGl0YVBQUCIsInVzZXJJbnRlcm5ldFVzYWdlUGVyQ2FwaXRhIiwicXVlc3Rpb244IiwiaW50ZXJuZXRVc2FnZVNjb3JlIiwiaW50ZXJuZXRVc2FnZVBlckNhcGl0YSIsInNvcnQiLCJhIiwiYiIsIm15U2hhcmVkU2VydmljZSIsInZhbHVlcyIsIndvcmxkQmFua0RhdGFVcGRhdGUiLCIkYnJvYWRjYXN0Il0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLFdBQUEsVUFBQSxhQUFBLGFBQUEsb0JBRUFGLEtBQUFHLFFBQUEsZ0JBQUEsaUJBQUEsb0JBQUEscUJBQUEsU0FBQUMsRUFBQUMsRUFBQUMs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LCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnTmV4dFBhdCcsIFsnbmdSb3V0ZScsJ25nTWF0ZXJpYWwnLCduZ01lc3NhZ2VzJywndmFsaWRhdGlvbi5tYXRjaCddKTtcblxuYXBwLmNvbmZpZyhbJyRodHRwUHJvdmlkZXInLCckcm91dGVQcm92aWRlcicsJyRsb2NhdGlvblByb3ZpZGVyJywnJG1kVGhlbWluZ1Byb3ZpZGVyJywgZnVuY3Rpb24oJGh0dHBQcm92aWRlciwkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsJG1kVGhlbWluZ1Byb3ZpZGVyKXtcblxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMudXNlWERvbWFpbiA9IHRydWU7XG4gICAgZGVsZXRlICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtUmVxdWVzdGVkLVdpdGgnXTtcblxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xuXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyXG4gICAgICAgIC50aGVtZSgnZGVmYXVsdCcpXG4gICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnYmx1ZS1ncmV5JylcbiAgICAgICAgLmFjY2VudFBhbGV0dGUoJ2dyZXknKVxuICAgICAgICAud2FyblBhbGV0dGUoJ3JlZCcpXG4gICAgICAgIC5iYWNrZ3JvdW5kUGFsZXR0ZSgnYmx1ZS1ncmV5Jyk7XG5cbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvaG9tZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdob21lQ29udHJvbGxlcidcbiAgICAgICAgfSkud2hlbignL2Fib3V0JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvYWJvdXQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnYWJvdXRDb250cm9sbGVyJ1xuICAgICAgICB9KS53aGVuKCcvY29udGFjdCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2NvbnRhY3QuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY29udGFjdENvbnRyb2xsZXInXG4gICAgICAgIH0pLndoZW4oJy9sb2dpbicsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2xvZ2luLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcidcbiAgICAgICAgfSkud2hlbignL3NpZ25VcCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3NpZ25VcC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzaWduVXBDb250cm9sbGVyJ1xuICAgICAgICB9KS53aGVuKCcvcXVlc3Rpb25uYWlyZScsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3F1ZXN0aW9ubmFpcmUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAncXVlc3Rpb25uYWlyZUNvbnRyb2xsZXInXG4gICAgICAgIH0pLndoZW4oJy9oZWxwJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvaGVscC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdoZWxwQ29udHJvbGxlcidcbiAgICAgICAgfSkud2hlbignL2NvdW50cnknLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9jb3VudHJ5Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2NvdW50cnlDb250cm9sbGVyJ1xuICAgICAgICB9KS5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ2hvbWVDb250cm9sbGVyJywgWydhdXRoU2VydmljZScsJ2NvdW50cnlQYWdlJywncXVlc3Rpb25uYWlyZScsJ3VzZXJSZWNvbW1lbmRhdGlvbnMnLCckaHR0cCcsJyRyb290U2NvcGUnLCckc2NvcGUnLCckbG9jYXRpb24nLCBmdW5jdGlvbihhdXRoU2VydmljZSxjb3VudHJ5UGFnZSxxdWVzdGlvbm5haXJlLHVzZXJSZWNvbW1lbmRhdGlvbnMsJGh0dHAsJHJvb3RTY29wZSwkc2NvcGUsJGxvY2F0aW9uKXtcblxuICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICBpZigkcm9vdFNjb3BlLnVzZXIgJiYgJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKXtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvcXVlc3Rpb25uYWlyZS8nKyRyb290U2NvcGUudXNlci51c2VybmFtZSkuXG4gICAgICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24odXNlckFuc3dlcnMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIHVzZXJBbnN3ZXJzLmRhdGEgPT0gJ29iamVjdCcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvd29ybGRGYWN0Ym9vaycse2xhbmd1YWdlT3B0aW9uOnRydWUsbGFuZ3VhZ2U6dXNlckFuc3dlcnMuZGF0YS5xdWVzdGlvbjF9KS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihjb3VudHJpZXNUb1NlYXJjaCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVjb21tZW5kYXRpb25zID0gcXVlc3Rpb25uYWlyZS5kZXRlcm1pbmVSZWNvbW1lbmRhdGlvbnModXNlckFuc3dlcnMuZGF0YSxjb3VudHJpZXNUb1NlYXJjaC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJSZWNvbW1lbmRhdGlvbnMuY291bnRyaWVzID0gJHNjb3BlLnJlY29tbWVuZGF0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9xdWVzdGlvbm5haXJlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICB9IGVsc2V7XG4gICAgICAgICAgICB2YXIgaW50cm9RdWVzdGlvbnMgPSBbe3F1ZXN0aW9uOiBcIkhhdmUgeW91IGJlZW4gaGVyZSBiZWZvcmU/XCIsIHJvdXRlOidsb2dpbid9LFxuICAgICAgICAgICAgICAgIHtxdWVzdGlvbjogXCJXb3VsZCB5b3UgbGlrZSB0byBzaWduIHVwP1wiLCByb3V0ZTogJ3NpZ25VcCd9LFxuICAgICAgICAgICAgICAgIHtxdWVzdGlvbjogXCJPa2F5LCB5b3Ugd29uJ3QgYmUgYWJsZSB0byBkbyBtdWNoLi4uXCJ9XTtcbiAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbiA9IGludHJvUXVlc3Rpb25zWzBdLnF1ZXN0aW9uO1xuICAgICAgICAgICAgdmFyIHF1ZXN0aW9uTnVtID0gMDtcbiAgICAgICAgICAgICRzY29wZS5zaG93QnV0dG9ucyA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUuZ2V0UXVlc3Rpb24gPSBmdW5jdGlvbihhbnN3ZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgcXVlc3Rpb25UZXh0ID0gaW50cm9RdWVzdGlvbnNbcXVlc3Rpb25OdW1dLnF1ZXN0aW9uO1xuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9IGludHJvUXVlc3Rpb25zW3F1ZXN0aW9uTnVtXS5yb3V0ZTtcbiAgICAgICAgICAgICAgICBpZiAoYW5zd2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKHJvdXRlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uTnVtKys7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbiA9IGludHJvUXVlc3Rpb25zW3F1ZXN0aW9uTnVtXS5xdWVzdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYocXVlc3Rpb25OdW0gPT0gaW50cm9RdWVzdGlvbnMubGVuZ3RoLTEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dCdXR0b25zID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAkc2NvcGUuc2V0Q291bnRyeVBhZ2UgPSBmdW5jdGlvbihjb3VudHJ5KXtcblxuICAgICAgICBjb3VudHJ5UGFnZS5uYW1lID0gY291bnRyeS5jb3VudHJ5TmFtZTtcbiAgICAgICAgY291bnRyeVBhZ2UuYWJicmV2aWF0aW9uID0gY291bnRyeS5hYmJyZXZpYXRpb247XG4gICAgICAgIGNvdW50cnlQYWdlLmxhcmdlc3RDaXR5TmFtZSA9IGNvdW50cnkubGFyZ2VzdENpdHlOYW1lID8gY291bnRyeS5sYXJnZXN0Q2l0eU5hbWUgOiBcIk5vIEluZm9ybWF0aW9uXCI7XG4gICAgICAgIGNvdW50cnlQYWdlLmxhcmdlc3RDaXR5UG9wID0gY291bnRyeS5sYXJnZXN0Q2l0eVBvcCA/IGNvdW50cnkubGFyZ2VzdENpdHlQb3AgOiBcIk5vIEluZm9ybWF0aW9uXCI7XG4gICAgICAgIGNvdW50cnlQYWdlLm1ham9yaXR5TGFuZ3VhZ2UgPSBjb3VudHJ5Lm1ham9yaXR5TGFuZ3VhZ2U7XG4gICAgICAgIGNvdW50cnlQYWdlLm1lZGlhbkFnZSA9IGNvdW50cnkubWVkaWFuQWdlO1xuICAgICAgICAvL2NvdW50cnlQYWdlID0gY291bnRyeTtcblxuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2NvdW50cnknKTtcblxuXG4gICAgfTtcblxufV0pO1xuXG5hcHAuY29udHJvbGxlcignYWJvdXRDb250cm9sbGVyJywgWyckc2NvcGUnLGZ1bmN0aW9uKCRzY29wZSl7XG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdjb250YWN0Q29udHJvbGxlcicsWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xufV0pO1xuXG5hcHAuY29udHJvbGxlcignc2lnblVwQ29udHJvbGxlcicsWyckbWRUb2FzdCcsJyRsb2NhdGlvbicsJyRzY29wZScsJyRodHRwJywgZnVuY3Rpb24oJG1kVG9hc3QsJGxvY2F0aW9uLCRzY29wZSwkaHR0cCl7XG5cbiAgICAkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgIHZhciBuZXdVc2VyID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6ICRzY29wZS5mb3JtLnVzZXJOYW1lLFxuICAgICAgICAgICAgZW1haWw6ICRzY29wZS5mb3JtLmVtYWlsLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5mb3JtLnBhc3N3b3JkLFxuICAgICAgICAgICAgbGFzdE5hbWU6ICRzY29wZS5mb3JtLmxhc3ROYW1lLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUuZm9ybS5maXJzdE5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZENvbmZpcm06ICRzY29wZS5mb3JtLnBhc3N3b3JkQ29uZmlybVxuICAgICAgICB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3JlZ2lzdGVyJyxuZXdVc2VyKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JUb2FzdChyZXNwb25zZS5kYXRhLmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZXJyb3JUb2FzdCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQobWVzc2FnZSlcbiAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICk7XG4gICAgfTtcblxufV0pO1xuXG5hcHAuY29udHJvbGxlcignY291bnRyeUNvbnRyb2xsZXInLCBbJ3NoYXJlZFNlcnZpY2UnLCdjb3VudHJ5UGFnZScsJyRzY29wZScsJyRodHRwJywgZnVuY3Rpb24oc2hhcmVkU2VydmljZSxjb3VudHJ5UGFnZSwkc2NvcGUsJGh0dHApe1xuICAgICRzY29wZS5jb3VudHJ5TmFtZSA9IGNvdW50cnlQYWdlLm5hbWU7XG4gICAgJHNjb3BlLmFiYnJldmlhdGlvbiA9IGNvdW50cnlQYWdlLmFiYnJldmlhdGlvbjtcbiAgICAkc2NvcGUubGFyZ2VzdENpdHlOYW1lID0gY291bnRyeVBhZ2UubGFyZ2VzdENpdHlOYW1lO1xuICAgICRzY29wZS5sYXJnZXN0Q2l0eVBvcCA9IGNvdW50cnlQYWdlLmxhcmdlc3RDaXR5UG9wO1xuICAgICRzY29wZS5tYWpvcml0eUxhbmd1YWdlID0gY291bnRyeVBhZ2UubWFqb3JpdHlMYW5ndWFnZTtcbiAgICAkc2NvcGUubWVkaWFuQWdlID0gY291bnRyeVBhZ2UubWVkaWFuQWdlO1xuICAgICRzY29wZS53b3JsZEJhbmtEYXRhID0ge307XG5cbiAgICB2YXIgZ2V0RGF0YSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRodHRwLmdldCgnL2V4dGVybmFsQVBJcy93b3JsZEJhbmtEYXRhLycrJHNjb3BlLmFiYnJldmlhdGlvbilcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUud29ybGRCYW5rRGF0YS5jb2x1bW4xID0gcmVzcG9uc2UuZGF0YS5zbGljZSgwLHJlc3BvbnNlLmRhdGEubGVuZ3RoLzIpO1xuICAgICAgICAgICAgICAgICRzY29wZS53b3JsZEJhbmtEYXRhLmNvbHVtbjIgPSByZXNwb25zZS5kYXRhLnNsaWNlKHJlc3BvbnNlLmRhdGEubGVuZ3RoLzIscmVzcG9uc2UuZGF0YS5sZW5ndGgpO1xuXG4gICAgICAgICAgICB9LGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhID0gXCJUaGVyZSB3YXMgYW4gZXJyb3IsIHRyeSBhZ2FpbiBsYXRlciFcIjtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBnZXREYXRhKCk7XG5cbiAgICB2YXIgbWVkaVdpa2lDb3VudHJ5TmFtZSA9IGVuY29kZVVSSSgkc2NvcGUuY291bnRyeU5hbWUpO1xuXG4gICAgdmFyIGdldEZsYWcgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5nZXQoJy9leHRlcm5hbEFQSXMvbWVkaVdpa2kvJysgbWVkaVdpa2lDb3VudHJ5TmFtZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmxhZ1VybCA9IHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0sZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSBcIlRoZXJlIHdhcyBhbiBlcnJvciwgdHJ5IGFnYWluIGxhdGVyIVwiO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGdldEZsYWcoKTtcblxufV0pO1xuXG5hcHAuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJywgWyckbWRUb2FzdCcsJyRzY29wZScsICckaHR0cCcsICdhdXRoU2VydmljZScsICckbG9jYXRpb24nLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRtZFRvYXN0LCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlLCAkbG9jYXRpb24sICRyb290U2NvcGUpe1xuICAgICRzY29wZS5zaWduSW4gPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgdXNlciA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiAkc2NvcGUuZm9ybS51c2VyTmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAkc2NvcGUuZm9ybS5wYXNzd29yZFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJ2FwaS9sb2dpbicsIHVzZXIpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBhdXRoU2VydmljZS5zYXZlVG9rZW4ocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JUb2FzdChyZXNwb25zZS5kYXRhLmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZXJyb3JUb2FzdCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQobWVzc2FnZSlcbiAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICk7XG4gICAgfTtcblxufV0pO1xuXG5hcHAuY29udHJvbGxlcignbmF2Q3RybCcsIFsndXNlclJlY29tbWVuZGF0aW9ucycsJ2F1dGhTZXJ2aWNlJywnJHNjb3BlJywnJHJvb3RTY29wZScsJyRsb2NhdGlvbicsJyRodHRwJywgZnVuY3Rpb24odXNlclJlY29tbWVuZGF0aW9ucyxhdXRoU2VydmljZSwgJHNjb3BlLCRyb290U2NvcGUsICRsb2NhdGlvbiwkaHR0cCl7XG4gICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuXG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS9sb2dvdXQnKS5cbiAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgIHVzZXJSZWNvbW1lbmRhdGlvbnMgPSB7fTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvaG9tZVwiKTtcbiAgICB9XG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdoZWxwQ29udHJvbGxlcicsWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuICAgICRzY29wZS5tZXNzYWdlID0gXCJJJ20gYSBoZWxwIHBhZ2UgdGhhdCBjdXJyZW50bHkgZG9lc24ndCBoZWxwIGF0IGFsbFwiO1xufV0pO1xuXG5hcHAuY29udHJvbGxlcigncXVlc3Rpb25uYWlyZUNvbnRyb2xsZXInLFsnY291bnRyeVBhZ2UnLCd1c2VyUmVjb21tZW5kYXRpb25zJywncXVlc3Rpb25uYWlyZScsJyRyb290U2NvcGUnLCckc2NvcGUnLCckbG9jYXRpb24nLCAnJGh0dHAnLGZ1bmN0aW9uKGNvdW50cnlQYWdlLHVzZXJSZWNvbW1lbmRhdGlvbnMscXVlc3Rpb25uYWlyZSwkcm9vdFNjb3BlLCRzY29wZSwkbG9jYXRpb24sJGh0dHApe1xuXG4gICAgaWYoISRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgfVxuXG4gICAgdmFyIHF1ZXN0aW9ucyA9IHF1ZXN0aW9ubmFpcmUucXVlc3Rpb25zO1xuICAgIHZhciBxdWVzdGlvblJlc3BvbnNlcyA9IHt9O1xuICAgIHZhciB1c2VyUXVlc3Rpb25uYWlyZSA9IHt9O1xuXG4gICAgJHNjb3BlLnF1ZXN0aW9uTnVtID0gMDtcbiAgICAkc2NvcGUuZGF0YSA9IHt9O1xuICAgICRzY29wZS5kYXRhID0ge307XG4gICAgJHNjb3BlLmFuc3dlcnMgPSBbXTtcblxuXG4gICAgJHNjb3BlLnF1ZXJ5U2VhcmNoID0gZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5ID8gJHNjb3BlLmxpc3QuZmlsdGVyKCBjcmVhdGVGaWx0ZXJGb3IocXVlcnkpICkgOiAkc2NvcGUubGlzdDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbG9hZEFsbCgpIHtcblxuICAgICAgICByZXR1cm4gJHNjb3BlLmxpc3QubWFwKCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGl0ZW1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xuICAgICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBhbmd1bGFyLmxvd2VyY2FzZShxdWVyeSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gKGl0ZW0udmFsdWUuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgPT09IDApO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgICRzY29wZS5wdXNoQW5zd2VyID0gZnVuY3Rpb24oYW5zd2VyKXtcbiAgICAgICAgaWYoYW5zd2VyKXtcbiAgICAgICAgICAgICRzY29wZS5hbnN3ZXJzLnB1c2goYW5zd2VyKTtcbiAgICAgICAgICAgICRzY29wZS5kYXRhLnNob3dBbnN3ZXJzID0gdHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5zZWFyY2hUZXh0ID0gJyc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmKCRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS9xdWVzdGlvbm5haXJlLycrJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKS5cbiAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24odXNlckFuc3dlcnMpe1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB1c2VyQW5zd2Vycy5kYXRhID09ICdvYmplY3QnKXtcbiAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS93b3JsZEZhY3Rib29rJyx7bGFuZ3VhZ2VPcHRpb246dHJ1ZSxsYW5ndWFnZTp1c2VyQW5zd2Vycy5kYXRhLnF1ZXN0aW9uMX0pLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihjb3VudHJpZXNUb1NlYXJjaCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlY29tbWVuZGF0aW9ucyA9IHF1ZXN0aW9ubmFpcmUuZGV0ZXJtaW5lUmVjb21tZW5kYXRpb25zKHVzZXJBbnN3ZXJzLmRhdGEsY291bnRyaWVzVG9TZWFyY2guZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclJlY29tbWVuZGF0aW9ucy5jb3VudHJpZXMgPSAkc2NvcGUucmVjb21tZW5kYXRpb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRRdWVzdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IGxvYWRBbGwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgICRzY29wZS5nZXRRdWVzdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5kYXRhLnNob3dBbnN3ZXJzID0gZmFsc2U7XG5cbiAgICAgICAgaWYoJHNjb3BlLnF1ZXN0aW9uTnVtPT1xdWVzdGlvbnMubGVuZ3RoKXtcbiAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbiA9ICdZb3VyIGxpc3QgaXMgYmVpbmcgZ2VuZXJhdGVkISc7XG4gICAgICAgICAgICB1c2VyUXVlc3Rpb25uYWlyZS51c2VybmFtZSA9ICRyb290U2NvcGUudXNlci51c2VybmFtZTtcbiAgICAgICAgICAgIHVzZXJRdWVzdGlvbm5haXJlLnF1ZXN0aW9uUmVzcG9uc2VzID0gcXVlc3Rpb25SZXNwb25zZXM7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3F1ZXN0aW9ubmFpcmUnLHVzZXJRdWVzdGlvbm5haXJlKTtcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvd29ybGRGYWN0Ym9vaycse2xhbmd1YWdlT3B0aW9uOnRydWUsbGFuZ3VhZ2U6cXVlc3Rpb25SZXNwb25zZXMucXVlc3Rpb24xfSkuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihjb3VudHJpZXNUb1NlYXJjaCl7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWNvbW1lbmRhdGlvbnMgPSBxdWVzdGlvbm5haXJlLmRldGVybWluZVJlY29tbWVuZGF0aW9ucyhxdWVzdGlvblJlc3BvbnNlcyxjb3VudHJpZXNUb1NlYXJjaC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdXNlclJlY29tbWVuZGF0aW9ucy5jb3VudHJpZXMgPSAkc2NvcGUucmVjb21tZW5kYXRpb25zO1xuICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLnR5cGUgPSAnJztcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAkc2NvcGUucXVlc3Rpb24gPSBxdWVzdGlvbnNbJHNjb3BlLnF1ZXN0aW9uTnVtXS5xdWVzdGlvbjtcbiAgICAgICAgICAgICRzY29wZS50eXBlID0gcXVlc3Rpb25zWyRzY29wZS5xdWVzdGlvbk51bV0udHlwZTtcbiAgICAgICAgICAgIGlmKCRzY29wZS50eXBlID09ICdsaXN0Jyl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBxdWVzdGlvbnNbJHNjb3BlLnF1ZXN0aW9uTnVtXS5hbnN3ZXJPcHRpb25zO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9O1xuICAgICRzY29wZS5sb2dBbnN3ZXIgPSBmdW5jdGlvbihhbnN3ZXIpe1xuICAgICAgICAkc2NvcGUuZGF0YS5zaG93QW5zd2VycyA9IGZhbHNlO1xuXG4gICAgICAgICRzY29wZS5xdWVzdGlvbk51bSsrO1xuXG4gICAgICAgIGlmKGFuc3dlci5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpe1xuICAgICAgICAgICAgYW5zd2VyID0gYW5zd2VyLmpvaW4oJyAnKVxuICAgICAgICB9XG4gICAgICAgIHF1ZXN0aW9uUmVzcG9uc2VzW1wicXVlc3Rpb25cIisoJHNjb3BlLnF1ZXN0aW9uTnVtKV0gPSBhbnN3ZXI7XG5cbiAgICAgICAgJHNjb3BlLmFuc3dlcnMgPSBbXTtcbiAgICAgICAgJHNjb3BlLnNlYXJjaFRleHQgPSAnJztcblxuICAgIH07XG5cbiAgICAkc2NvcGUuYWRkQ291bnRyeSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdXNlckNvdW50cmllcycse3VzZXJuYW1lOiAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUsdXNlckNvdW50cmllczogWydmcmFuY2UnLCdnZXJtYW55Jywnc3BhaW4nXX0pLlxuICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJDb3VudHJpZXMgPSByZXNwb25zZS51c2VyQ291bnRyaWVzO1xuICAgICAgICAgICAgfSlcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRlbGV0ZVF1ZXN0aW9ubmFpcmUgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5kZWxldGUoJ2FwaS9xdWVzdGlvbm5haXJlLycrJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHVzZXJSZWNvbW1lbmRhdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjb21tZW5kYXRpb25zID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uTnVtID0gMDtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0UXVlc3Rpb24oKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IGxvYWRBbGwoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XSk7XG5cbmFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG4gICAgdGhpcy5wYXJzZUp3dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCR3aW5kb3cuYXRvYihiYXNlNjQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIHRoaXMuaXNBdXRoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuZ2V0VG9rZW4oKTtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJzZUp3dCh0b2tlbik7XG4gICAgICAgICAgICB2YXIgbm90RXhwaXJlZCA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSA8PSBwYXJhbXMuZXhwO1xuICAgICAgICAgICAgaWYgKCFub3RFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub3RFeHBpcmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWxldGUgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VKd3QodGhpcy5nZXRUb2tlbigpKVxuICAgIH07XG59XSk7XG5cbmFwcC5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLCBbJyRxJywgJyRsb2NhdGlvbicsICdhdXRoU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGxvY2F0aW9uLCBhdXRoU2VydmljZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG4gICAgICAgICAgICBpZiAoYXV0aFNlcnZpY2UuaXNBdXRoZWQoKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyBhdXRoU2VydmljZS5nZXRUb2tlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYoJGxvY2F0aW9uLnNlYXJjaCgpLmFjY2Vzc190b2tlbil7XG4gICAgICAgICAgICAgICAgYXV0aFNlcnZpY2Uuc2F2ZVRva2VuKCRsb2NhdGlvbi5zZWFyY2goKS5hY2Nlc3NfdG9rZW4pO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2FjY2Vzc190b2tlbicsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcblxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xuICAgICAgICB9LCByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuXG5hcHAuZmFjdG9yeSgncXVlc3Rpb25uYWlyZScsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBxdWVzdGlvbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogXCJXaGF0IGxhbmd1YWdlKHMpIGRvIHlvdSBzcGVhaz9cIiwgdHlwZTogJ2xpc3QnLFxuICAgICAgICAgICAgICAgIGFuc3dlck9wdGlvbnM6IFsnQWR5Z2hlJywgJ0FsYmFuaWFuJywgJ0FyYWdvbmVzZScsICdBcm1lbmlhbicsICdBcm9tYW5pYW4nLCAnQXJwaXRhbicsICdBc3R1cmlhbicsICdBdmFyJywgJ0F6ZXJiYWlqYW5pJywgJ0Jhc2hraXInLCAnQmFzcXVlJywgJ0JlbGFydXNpYW4nLCAnQm9zbmlhbicsICdCcmV0b24nLCAnQnVsZ2FyaWFuJywgJ0NhdGFsYW4nLCAnQ2hlY2hlbicsICdDaHV2YXNoJywgJ0Nvcm5pc2gnLCAnQ29yc2ljYW4nLCAnQ3JpbWVhbicsICdDcm9hdGlhbicsICdDemVjaCcsICdEYW5pc2gnLCAnRHV0Y2gnLCAnRW5nbGlzaCcsICdFcnp5YScsICdFc3RvbmlhbicsICdGYXJvZXNlJywgJ0Zpbm5pc2gnLCAnRnJlbmNoJywgJ0ZyaXNpYW4nLCAnR2FnYXV6JywgJ0dhbGljaWFuJywgJ0dhbGxvJywgJ0dlb3JnaWFuJywgJ0dlcm1hbicsICdHcmVlaycsICdIdW5nYXJpYW4nLCAnSWNlbGFuZGljJywgJ0luZ3JpYW4nLCAnSXJpc2gnLCAnSXRhbGlhbicsICdLYWJhcmRpYW4nLCAnS2FzaHViaWFuJywgJ0themFraCcsICdMYWRpbicsICdMYXRpbicsICdMYXR2aWFuJywgJ0xheicsICdMaXRodWFuaWFuJywgJ0x1eGVtYm91cmdpc2gnLCAnTWFjZWRvbmlhbicsICdNYWx0ZXNlJywgJ01hbngnLCAnTWFyaScsICdNaW5ncmVsaWFuJywgJ01pcmFuZGVzZScsICdNb250ZW5lZ3JpbicsICdOb3J3ZWdpYW4nLCAnT2NjaXRhbicsICdPc3NldGlhbicsICdQaWNhcmQnLCAnUG9saXNoJywgJ1BvcnR1Z3Vlc2UnLCAnUm9tYW5pJywgJ1JvbWFuaWFuJywgJ1JvbWFuc2gnLCAnUnVzc2lhbicsICdTYW1pJywgJ1NhcmRpbmlhbicsICdTY290cycsICdTY290dGlzaCcsJ0dhZWxpYycsICdTZXJiaWFuJywgJ1NpbGVzaWFuJywgJ1Nsb3ZhaycsICdTbG92ZW5lJywgJ1NvcmJpYW4nLCAnU3BhbmlzaCcsICdTdmFuJywgJ1N3ZWRpc2gnLCAnVGFiYXNhcmFuJywgJ1RhdGFyJywgJ1R1cmtpc2gnLCAnVWtyYWluaWFuJywgJ1ZlcHNpYW4nLCAnVsO1cm8nLCAnV2FsbG9vbicsICdXZWxzaCcsICdXeW15c29yeXMnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogJ1doYXQgZmllbGQgZG8geW91IHdvcmsgaW4/JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWydBZ3JpY3VsdHVyZScsICdJbmR1c3RyeScsICdTZXJ2aWNlcyddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBjbGltYXRlKHMpIHdvdWxkIHlvdSBwcmVmZXI/JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWydUZW1wZXJhdGUnLCAnTWVkaXRlcnJhbmVhbicsICdUcm9waWNhbCcsICdBcmlkJywgJ0Rlc2VydCcsICdNYXJpdGltZScsICdXZXQnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogJ1doYXQgaXMgdGhlIGlkZWFsIHNpemUgZm9yIHRoZSBsYXJnZXN0IG1ldHJvcG9saXRhbiBhcmVhPycsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2xpc3QnLFxuICAgICAgICAgICAgICAgIGFuc3dlck9wdGlvbnM6IFsnU21hbGwgKDwxMDAsMDAwKScsICdNZWRpdW0gKDEwMCwwMDAtMSBtaWxsaW9uKScsICdMYXJnZSAoPjEgbWlsbGlvbiknXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogJ1dvdWxkIHlvdSBsaWtlIHRoZSBwb3B1bGF0aW9uIGRpc3RyaWJ1dGlvbiB0byBiZSBtb3N0bHkgdXJiYW4/JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcXVlc3Rpb246ICdXaGF0IHdvdWxkIHlvdXIgaWRlYWwgbWVkaWFuIGFnZSByYW5nZSBiZT8nLCB0eXBlOiAnbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWycyMC0zMHlycycsICczMC00MHlycycsICc0MCt5ZWFycyddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBjb3N0IG9mIGxpdmluZyBzaG91bGQgeW91ciBkZXN0aW5hdGlvbiBoYXZlPycsIHR5cGU6J2xpc3QnLFxuICAgICAgICAgICAgICAgIGFuc3dlck9wdGlvbnM6IFsnSGlnaCcsJ0F2ZXJhZ2UnLCdMb3cnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogJ1doYXQgcGVyY2VudGFnZSBvZiB0aGUgcG9wdWxhdGlvbiBzaG91bGQgYmUgaW50ZXJuZXQgdXNlcnM/JywgdHlwZTonbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWyc8MjUlJywnMjUlLTUwJScsJzUwJS03NSUnLCc+NzUlJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgZGV0ZXJtaW5lUmVjb21tZW5kYXRpb25zOiBmdW5jdGlvbihxdWVzdGlvbm5haXJlQW5zd2Vycyxjb3VudHJpZXNUb1NlYXJjaCl7XG5cbiAgICAgICAgICAgIGNvdW50cmllcyA9IFtdO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRQcm9wb3J0aW9uYWxTY29yZShsb3dlckxpbWl0LHVwcGVyTGltaXQsdmFsdWUpe1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID49IGxvd2VyTGltaXQgJiYgdmFsdWUgPD0gdXBwZXJMaW1pdCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxMDtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5hYnModmFsdWUtbG93ZXJMaW1pdCkgPiBNYXRoLmFicyh2YWx1ZS11cHBlckxpbWl0KSA/IHVwcGVyTGltaXQgOiBsb3dlckxpbWl0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgbXVsdGlwbGllciA9IHZhbHVlID4gbGltaXQgPyAwLjUgOiAxLjU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY29yZSA9IDIwKigxIC0gTWF0aC5taW4oMSxNYXRoLmFicyh2YWx1ZSAtIG11bHRpcGxpZXIqbGltaXQpL2xpbWl0KSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY29yZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvdW50cmllc1RvU2VhcmNoLmZvckVhY2goZnVuY3Rpb24oY291bnRyeSxpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBzY29yZSA9IDAsIHVwcGVyTGltaXQsIGxvd2VyTGltaXQsIGNsaW1hdGVTdHJpbmc7XG4gICAgICAgICAgICAgICAgdmFyIGxhYm9yUGVyY2VudCA9IGNvdW50cnkubGFib3JbcXVlc3Rpb25uYWlyZUFuc3dlcnMucXVlc3Rpb24yXSB8fCAwO1xuICAgICAgICAgICAgICAgIC8vaWYgdXNlcidzIHNwZWNpZmllZCBpbmR1c3RyeSBpcyBtb3JlIHRoYW4gNzUlIG9mIHRoZSBjb3VudHJ5J3Mgd29ya2ZvcmNlLCBzZXQgc2NvcmUgdG8gMTBcbiAgICAgICAgICAgICAgICB2YXIgbGFib3JTY29yZSA9IGxhYm9yUGVyY2VudC83LjUgPiAxMCA/IDEwIDogbGFib3JQZXJjZW50LzEwO1xuICAgICAgICAgICAgICAgIC8vY3JlYXRlIFJlZ3VsYXIgRXhwcmVzc2lvbiB0byBjaGVjayBjbGltYXRlIHN0cmluZyBmb3IgY2xpbWF0ZSBhbnN3ZXJzXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBxdWVzdGlvbm5haXJlQW5zd2Vycy5xdWVzdGlvbjMgPT0gJ2FycmF5Jykge1xuICAgICAgICAgICAgICAgICAgICBjbGltYXRlU3RyaW5nID0gbmV3IFJlZ0V4cChxdWVzdGlvbm5haXJlQW5zd2Vycy5xdWVzdGlvbjMuam9pbignfCcpLCdpJyk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGNsaW1hdGVTdHJpbmcgPSBuZXcgUmVnRXhwKHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uMywnaScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2lmIGNsaW1hdGUgc3RyaW5nIGNvbnRhaW5zIG9uZSBvZiB0aGUgY2xpbWF0ZSBhbnN3ZXJzLCBzZXQgc2NvcmUgdG8gMTBcbiAgICAgICAgICAgICAgICB2YXIgY2xpbWF0ZVNjb3JlID0gY291bnRyeS5jbGltYXRlLm1hdGNoKGNsaW1hdGVTdHJpbmcpICE9IG51bGwgPyAxMDogMDtcblxuICAgICAgICAgICAgICAgIHZhciB1c2VyTGFyZ2VzdENpdHlQb3AgPSBxdWVzdGlvbm5haXJlQW5zd2Vycy5xdWVzdGlvbjQ7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHVzZXJMYXJnZXN0Q2l0eVBvcCl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NtYWxsICg8MTAwLDAwMCknOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMUU1O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ01lZGl1bSAoMTAwLDAwMC0xIG1pbGxpb24pJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSAxRTU7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMUU2O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xhcmdlICg+MSBtaWxsaW9uKSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMUU2O1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9IDFFMjA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbGFyZ2VzdENpdHlQb3BTY29yZSA9IGdldFByb3BvcnRpb25hbFNjb3JlKGxvd2VyTGltaXQsdXBwZXJMaW1pdCxjb3VudHJ5Lmxhcmdlc3RDaXR5UG9wKSB8fCAwO1xuXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJVcmJhblBvcHVsYXRpb24gPSBxdWVzdGlvbm5haXJlQW5zd2Vycy5xdWVzdGlvbjU7XG4gICAgICAgICAgICAgICAgdmFyIHVyYmFuUG9wdWxhdGlvblNjb3JlO1xuICAgICAgICAgICAgICAgIGlmKHVzZXJVcmJhblBvcHVsYXRpb24pe1xuICAgICAgICAgICAgICAgICAgICB1cmJhblBvcHVsYXRpb25TY29yZSA9IGNvdW50cnkudXJiYW5Qb3B1bGF0aW9uID4gNTAgPyAxMCA6IDEwKmNvdW50cnkudXJiYW5Qb3B1bGF0aW9uLzUwO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB1cmJhblBvcHVsYXRpb25TY29yZSA9IGNvdW50cnkudXJiYW5Qb3B1bGF0aW9uIDwgNTAgPyAxMCA6IDEwKjUwL2NvdW50cnkudXJiYW5Qb3B1bGF0aW9uO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciB1c2VyTWVkaWFuQWdlID0gcXVlc3Rpb25uYWlyZUFuc3dlcnMucXVlc3Rpb242O1xuICAgICAgICAgICAgICAgIHN3aXRjaCh1c2VyTWVkaWFuQWdlKXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnMjAtMzB5cnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMzA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnMzAtNDB5cnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9IDQwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzQwK3llYXJzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSA0MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAxNTA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtZWRpYW5BZ2VTY29yZSA9IGdldFByb3BvcnRpb25hbFNjb3JlKGxvd2VyTGltaXQsdXBwZXJMaW1pdCxjb3VudHJ5Lm1lZGlhbkFnZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgdXNlclBlckNhcGl0YVBQUCA9IHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uNztcbiAgICAgICAgICAgICAgICBzd2l0Y2godXNlclBlckNhcGl0YVBQUCl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0hpZ2gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDYwMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9IDFFMTA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQXZlcmFnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMzAwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gNjAwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTG93JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9IDMwMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBlckNhcGl0YVBQUFNjb3JlID0gZ2V0UHJvcG9ydGlvbmFsU2NvcmUobG93ZXJMaW1pdCx1cHBlckxpbWl0LGNvdW50cnkucGVyQ2FwaXRhUFBQKTtcblxuICAgICAgICAgICAgICAgIHZhciB1c2VySW50ZXJuZXRVc2FnZVBlckNhcGl0YSA9IHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uODtcbiAgICAgICAgICAgICAgICBzd2l0Y2godXNlckludGVybmV0VXNhZ2VQZXJDYXBpdGEpe1xuICAgICAgICAgICAgICAgICAgICBjYXNlICc8MjUlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9IDI1O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzI1JS01MCUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDI1O1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9IDUwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzUwJS03NSUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDUwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9IDc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGludGVybmV0VXNhZ2VTY29yZSA9IGdldFByb3BvcnRpb25hbFNjb3JlKGxvd2VyTGltaXQsdXBwZXJMaW1pdCxjb3VudHJ5LmludGVybmV0VXNhZ2VQZXJDYXBpdGEpO1xuICAgICAgICAgICAgICAgIHNjb3JlID0gc2NvcmUgKyBsYWJvclNjb3JlICsgY2xpbWF0ZVNjb3JlICsgbGFyZ2VzdENpdHlQb3BTY29yZSArIHVyYmFuUG9wdWxhdGlvblNjb3JlICsgcGVyQ2FwaXRhUFBQU2NvcmUgKyBtZWRpYW5BZ2VTY29yZSArIGludGVybmV0VXNhZ2VTY29yZTtcbiAgICAgICAgICAgICAgICBjb3VudHJ5LnNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgY291bnRyaWVzLnB1c2goY291bnRyeSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY291bnRyaWVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICBpZiAoYS5zY29yZSA+IGIuc2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYS5zY29yZSA8IGIuc2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKGEuY291bnRyeU5hbWUgPiBiLmNvdW50cnlOYW1lKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKGEuY291bnRyeU5hbWUgPCBiLmNvdW50cnlOYW1lKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gY291bnRyaWVzLnNsaWNlKDAsNCk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cbmFwcC5mYWN0b3J5KCdjb3VudHJ5UGFnZScsZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge307XG59KTtcblxuYXBwLmZhY3RvcnkoJ3VzZXJSZWNvbW1lbmRhdGlvbnMnLGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHt9O1xufSk7XG5cbmFwcC5mYWN0b3J5KCdzaGFyZWRTZXJ2aWNlJywgWyckcm9vdFNjb3BlJyxmdW5jdGlvbigkcm9vdFNjb3BlKXtcbiAgICB2YXIgbXlTaGFyZWRTZXJ2aWNlID0ge307XG5cbiAgICBteVNoYXJlZFNlcnZpY2UudmFsdWVzID0ge307XG5cbiAgICBteVNoYXJlZFNlcnZpY2Uud29ybGRCYW5rRGF0YVVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndXBkYXRlJyk7XG4gICAgfTtcblxuICAgIHJldHVybiBteVNoYXJlZFNlcnZpY2U7XG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=