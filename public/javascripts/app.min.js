var app=angular.module("NextPat",["ngRoute","ngMaterial","ngMessages","validation.match"]);app.config(["$httpProvider","$routeProvider","$locationProvider","$mdThemingProvider",function(e,t,n,o){n.html5Mode(!0),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"],e.interceptors.push("authInterceptor"),o.theme("default").primaryPalette("blue-grey").accentPalette("grey").warnPalette("red").backgroundPalette("blue-grey"),t.when("/",{templateUrl:"/views/home.html",controller:"homeController"}).when("/about",{templateUrl:"/views/about.html",controller:"aboutController"}).when("/contact",{templateUrl:"/views/contact.html",controller:"contactController"}).when("/login",{templateUrl:"/views/login.html",controller:"loginController"}).when("/signUp",{templateUrl:"/views/signUp.html",controller:"signUpController"}).when("/questionnaire",{templateUrl:"/views/questionnaire.html",controller:"questionnaireController"}).when("/help",{templateUrl:"/views/help.html",controller:"helpController"}).when("/country",{templateUrl:"/views/country.html",controller:"countryController"}).otherwise({redirectTo:"/"})}]),app.controller("homeController",["authService","countryPage","questionnaire","userRecommendations","$http","$rootScope","$scope","$location",function(e,t,n,o,a,r,i,s){if(r.user=e.getUser(),r.user&&r.user.username)i.recommendations||(o.countries?i.recommendations=o.countries:a.get("/api/questionnaire/"+r.user.username).then(function(e){console.log(r.user.username),"object"==typeof e.data?a.post("/api/worldFactbook",{languageOption:!0,language:e.data.question1}).then(function(t){console.log(e,t),i.recommendations=n.determineRecommendations(e.data,t.data),o.countries=i.recommendations}):s.path("/questionnaire")}));else{var u=[{question:"Have you been here before?",route:"login"},{question:"Would you like to sign up?",route:"signUp"},{question:"Okay, you won't be able to do much..."}];i.question=u[0].question;var l=0;i.showButtons=!0,i.getQuestion=function(e){var t=(u[l].question,u[l].route);e?s.path(t):(l++,i.question=u[l].question,l==u.length-1&&(i.showButtons=!1))}}i.setCountryPage=function(e,n){t.name=e,t.abbreviation=n,s.path("/country")}}]),app.controller("aboutController",["$scope",function(e){}]),app.controller("contactController",["$scope",function(e){e.message="I'm a page that tells you how to yell (by writing an all-caps email) at the developer!"}]),app.controller("signUpController",["$location","$scope","$http",function(e,t,n){t.passwordPattern=new RegExp("^(?=.*d)(?=.*[a-z])(?=.*[A-Z]).{1,}$"),t.register=function(){var o={username:t.form.userName,email:t.form.email,password:t.form.password,lastName:t.form.lastName,firstName:t.form.firstName,passwordConfirm:t.form.passwordConfirm};n.post("/api/register",o).then(function(t){console.log(t),e.path("/login")})}}]),app.controller("countryController",["sharedService","countryPage","$scope","$http",function(e,t,n,o){n.countryName=t.name,n.abbreviation=t.abbreviation,n.worldBankData={column1:{indicator:"ARE YOU ",year:"READY FOR ",value:"SOME DATA?!"}};var a=function(){o.get("/externalAPIs/worldBankData/"+n.abbreviation).then(function(e){console.log(e.data.length),n.worldBankData.column1=e.data.slice(0,e.data.length/2),n.worldBankData.column2=e.data.slice(e.data.length/2,e.data.length),console.log(e.data)},function(e){n.data="There was an error, try again later!",console.log(e)})};a();var r=n.countryName.replace(/\s/g,"_"),i=function(){o.get("/externalAPIs/mediWiki/"+r).then(function(e){n.flagUrl=e.data,console.log(n.flagUrl)},function(e){n.data="There was an error, try again later!",console.log(e)})};i()}]),app.controller("loginController",["$scope","$http","authService","$location","$rootScope",function(e,t,n,o,a){e.signIn=function(){var r={username:e.form.userName,password:e.form.password};t.post("api/login",r).then(function(e){n.saveToken(e.data),a.user=n.getUser(),o.path("/")})}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location","$http",function(e,t,n,o,a){n.user=e.getUser(),n.user&&n.user.username&&o.path("/"),t.logout=function(){a.get("/api/questionnaire/"+n.user.username),a.get("/api/logout").then(function(e){console.log(e)}),e.logout(),n.user=e.getUser(),o.path("/home")}}]),app.controller("helpController",["$scope",function(e){e.message="I'm a help page that currently doesn't help at all"}]),app.controller("questionnaireController",["countryPage","userRecommendations","questionnaire","$rootScope","$scope","$location","$http","$log","$q",function(e,t,n,o,a,r,i,s,u){function l(){return a.list.map(function(e){return{value:e.toLowerCase(),display:e}})}function c(e){var t=angular.lowercase(e);return function(e){return 0===e.value.indexOf(t)}}o.user.username||r.path("/login");var p=n.questions,h={},m={};a.questionNum=0,a.data={},a.data={},a.answers=[],a.querySearch=function(e){return e?a.list.filter(c(e)):a.list},a.pushAnswer=function(e){e&&(a.answers.push(e),a.data.showAnswers=!0,a.searchText="")},i.get("/api/questionnaire/"+o.user.username).then(function(e){console.log(o.user.username),"object"==typeof e.data?i.post("/api/worldFactbook",{languageOption:!0,language:e.data.question1}).then(function(o){console.log(e,o),a.recommendations=n.determineRecommendations(e.data,o.data),t.countries=a.recommendations}):(a.getQuestion(),a.list=l())}),a.getQuestion=function(){a.data.showAnswers=!1,a.questionNum==p.length?(a.question="Your list is being generated!",m.username=o.user.username,m.questionResponses=h,i.post("/api/questionnaire",m),i.post("/api/worldFactbook",{languageOption:!0,language:h.question1}).then(function(e){a.recommendations=n.determineRecommendations(h,e.data),t.countries=a.recommendations,r.path("/")}),a.type=""):(a.question=p[a.questionNum].question,a.type=p[a.questionNum].type,console.log(a.question,a.type),"list"==a.type&&(a.list=p[a.questionNum].answerOptions))},a.logAnswer=function(e){a.data.showAnswers=!1,a.questionNum++,e.constructor===Array&&(e=e.join(" ")),h["question"+a.questionNum]=e,a.answers=[],a.searchText=""},a.addCountry=function(){i.post("/api/userCountries",{username:o.user.username,userCountries:["france","germany","spain"]}).then(function(e){a.userCountries=e.userCountries})},a.setCountryPage=function(t){e.name=t},a.deleteQuestionnaire=function(){i["delete"]("api/questionnaire/"+o.user.username).then(function(e){console.log("deleted!"),t={},a.recommendations=!1,a.questionNum=0,a.getQuestion(),a.list=l()})}}]),app.service("authService",["$window",function(e){this.parseJwt=function(t){if(t){var n=t.split(".")[1],o=n.replace("-","+").replace("_","/");return JSON.parse(e.atob(o))}return{}},this.saveToken=function(t){e.localStorage.jwtToken=t,console.log("Saved token:",e.localStorage.jwtToken)},this.getToken=function(){return e.localStorage.jwtToken},this.isAuthed=function(){var e=this.getToken();if(e){var t=this.parseJwt(e),n=Math.round((new Date).getTime()/1e3)<=t.exp;return n||this.logout(),n}return!1},this.logout=function(){delete e.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.factory("authInterceptor",["$q","$location","authService",function(e,t,n){return{request:function(e){return e.headers=e.headers||{},console.log(e.url),n.isAuthed()&&(e.headers.Authorization="Bearer "+n.getToken()),e},response:function(o){return t.search().access_token&&(n.saveToken(t.search().access_token),t.search("access_token",void 0),t.path("/")),401===o.status&&t.path("/login"),o||e.when(o)},responseError:function(n){return 401===n.status?t.path("/login"):console.log(n),e.reject(n)}}}]),app.factory("questionnaire",function(){return{questions:[{question:"What language(s) do you speak?",type:"list",answerOptions:["Adyghe","Albanian","Aragonese","Armenian","Aromanian","Arpitan","Asturian","Avar","Azerbaijani","Bashkir","Basque","Belarusian","Bosnian","Breton","Bulgarian","Catalan","Chechen","Chuvash","Cornish","Corsican","Crimean","Croatian","Czech","Danish","Dutch","English","Erzya","Estonian","Faroese","Finnish","French","Frisian","Gagauz","Galician","Gallo","Georgian","German","Greek","Hungarian","Icelandic","Ingrian","Irish","Italian","Kabardian","Kashubian","Kazakh","Ladin","Latin","Latvian","Laz","Lithuanian","Luxembourgish","Macedonian","Maltese","Manx","Mari","Mingrelian","Mirandese","Montenegrin","Norwegian","Occitan","Ossetian","Picard","Polish","Portuguese","Romani","Romanian","Romansh","Russian","Sami","Sardinian","Scots","Scottish","Gaelic","Serbian","Silesian","Slovak","Slovene","Sorbian","Spanish","Svan","Swedish","Tabasaran","Tatar","Turkish","Ukrainian","Vepsian","VÃµro","Walloon","Welsh","Wymysorys"]},{question:"What field do you work in?",type:"list",answerOptions:["Agriculture","Industry","Services"]},{question:"What climate(s) would you prefer?",type:"list",answerOptions:["Temperate","Mediterranean","Tropical","Arid","Desert","Maritime","Wet"]},{question:"What is the ideal size for the largest metropolitan area?",type:"list",answerOptions:["Small (<100,000)","Medium (100,000-1 million)","Large (>1 million)"]},{question:"Would you like the population distribution to be mostly urban?",type:"boolean"},{question:"What would your ideal median age range be?",type:"list",answerOptions:["20-30yrs","30-40yrs","40+years"]},{question:"What cost of living should your destination have?",type:"list",answerOptions:["High","Average","Low"]},{question:"What percentage of the population should be internet users?",type:"list",answerOptions:["<25%","25%-50%","50%-75%",">75%"]}],determineRecommendations:function(e,t){function n(e,t,n){if(n>=e&&t>=n)return 10;var o=Math.abs(n-e)>Math.abs(n-t)?t:e,a=n>o?.5:1.5,r=20*(1-Math.min(1,Math.abs(n-a*o)/o));return r}return countries=[],t.forEach(function(t,o){var a,r,i,s=0,u=t.labor[e.question2]||0,l=u/7.5>10?10:u/10;i="array"==typeof e.question3?new RegExp(e.question3.join("|"),"i"):new RegExp(e.question3,"i");var c=null!=t.climate.match(i)?10:0,p=e.question4;switch(p){case"Small (<100,000)":r=0,a=1e5;break;case"Medium (100,000-1 million)":r=1e5,a=1e6;break;case"Large (>1 million)":r=1e6,a=1e20}var h,m=n(r,a,t.largestCityPop)||0,g=e.question5;h=g?t.urbanPopulation>50?10:10*t.urbanPopulation/50:t.urbanPopulation<50?10:500/t.urbanPopulation;var d=e.question6;switch(d){case"20-30yrs":r=0,a=30;break;case"30-40yrs":r=30,a=40;break;case"40+years":r=40,a=150}var f=n(r,a,t.medianAge),w=e.question7;switch(w){case"High":r=6e4,a=1e10;break;case"Average":r=3e4,a=6e4;break;case"Low":r=0,a=3e4}var y=n(r,a,t.perCapitaPPP),v=e.question8;switch(v){case"<25%":r=0,a=25;break;case"25%-50%":r=25,a=50;break;case"50%-75%":r=50,a=75;break;default:r=75,a=100}var q=n(r,a,t.internetUsagePerCapita);s=s+l+c+m+h+y+f+q,t.score=s,countries.push(t)}),countries.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:e.countryName>t.countryName?1:e.countryName<t.countryName?-1:0}),countries.slice(0,4)}}}),app.factory("countryPage",function(){return{}}),app.factory("userRecommendations",function(){return{}}),app.factory("sharedService",["$rootScope",function(e){var t={};return t.values={},t.worldBankDataUpdate=function(){e.$broadcast("update")},t}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGh0dHBQcm92aWRlciIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJkZWZhdWx0cyIsInVzZVhEb21haW4iLCJoZWFkZXJzIiwiY29tbW9uIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiYXV0aFNlcnZpY2UiLCJjb3VudHJ5UGFnZSIsInF1ZXN0aW9ubmFpcmUiLCJ1c2VyUmVjb21tZW5kYXRpb25zIiwiJGh0dHAiLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwiJGxvY2F0aW9uIiwidXNlciIsImdldFVzZXIiLCJ1c2VybmFtZSIsInJlY29tbWVuZGF0aW9ucyIsImNvdW50cmllcyIsImdldCIsInRoZW4iLCJ1c2VyQW5zd2VycyIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwicG9zdCIsImxhbmd1YWdlT3B0aW9uIiwibGFuZ3VhZ2UiLCJxdWVzdGlvbjEiLCJjb3VudHJpZXNUb1NlYXJjaCIsImRldGVybWluZVJlY29tbWVuZGF0aW9ucyIsInBhdGgiLCJpbnRyb1F1ZXN0aW9ucyIsInF1ZXN0aW9uIiwicm91dGUiLCJxdWVzdGlvbk51bSIsInNob3dCdXR0b25zIiwiZ2V0UXVlc3Rpb24iLCJhbnN3ZXIiLCJsZW5ndGgiLCJzZXRDb3VudHJ5UGFnZSIsImNvdW50cnlOYW1lIiwiYWJicmV2aWF0aW9uIiwibmFtZSIsIm1lc3NhZ2UiLCJwYXNzd29yZFBhdHRlcm4iLCJSZWdFeHAiLCJyZWdpc3RlciIsIm5ld1VzZXIiLCJmb3JtIiwidXNlck5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwibGFzdE5hbWUiLCJmaXJzdE5hbWUiLCJwYXNzd29yZENvbmZpcm0iLCJyZXNwb25zZSIsInNoYXJlZFNlcnZpY2UiLCJ3b3JsZEJhbmtEYXRhIiwiY29sdW1uMSIsImluZGljYXRvciIsInllYXIiLCJ2YWx1ZSIsImdldERhdGEiLCJzbGljZSIsImNvbHVtbjIiLCJtZWRpV2lraUNvdW50cnlOYW1lIiwicmVwbGFjZSIsImdldEZsYWciLCJmbGFnVXJsIiwic2lnbkluIiwic2F2ZVRva2VuIiwibG9nb3V0IiwiJGxvZyIsIiRxIiwibG9hZEFsbCIsImxpc3QiLCJtYXAiLCJpdGVtIiwidG9Mb3dlckNhc2UiLCJkaXNwbGF5IiwiY3JlYXRlRmlsdGVyRm9yIiwicXVlcnkiLCJsb3dlcmNhc2VRdWVyeSIsImxvd2VyY2FzZSIsImluZGV4T2YiLCJxdWVzdGlvbnMiLCJxdWVzdGlvblJlc3BvbnNlcyIsInVzZXJRdWVzdGlvbm5haXJlIiwiYW5zd2VycyIsInF1ZXJ5U2VhcmNoIiwiZmlsdGVyIiwicHVzaEFuc3dlciIsInNob3dBbnN3ZXJzIiwic2VhcmNoVGV4dCIsInR5cGUiLCJhbnN3ZXJPcHRpb25zIiwibG9nQW5zd2VyIiwiY29uc3RydWN0b3IiLCJBcnJheSIsImpvaW4iLCJhZGRDb3VudHJ5IiwidXNlckNvdW50cmllcyIsImRlbGV0ZVF1ZXN0aW9ubmFpcmUiLCJzZXJ2aWNlIiwiJHdpbmRvdyIsInRoaXMiLCJwYXJzZUp3dCIsInRva2VuIiwiYmFzZTY0VXJsIiwic3BsaXQiLCJiYXNlNjQiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwibG9jYWxTdG9yYWdlIiwiand0VG9rZW4iLCJnZXRUb2tlbiIsImlzQXV0aGVkIiwicGFyYW1zIiwibm90RXhwaXJlZCIsIk1hdGgiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwiZXhwIiwiZmFjdG9yeSIsInJlcXVlc3QiLCJ1cmwiLCJBdXRob3JpemF0aW9uIiwic2VhcmNoIiwiYWNjZXNzX3Rva2VuIiwidW5kZWZpbmVkIiwic3RhdHVzIiwicmVzcG9uc2VFcnJvciIsInJlamVjdCIsInF1ZXN0aW9ubmFpcmVBbnN3ZXJzIiwiZ2V0UHJvcG9ydGlvbmFsU2NvcmUiLCJsb3dlckxpbWl0IiwidXBwZXJMaW1pdCIsImxpbWl0IiwiYWJzIiwibXVsdGlwbGllciIsInNjb3JlIiwibWluIiwiZm9yRWFjaCIsImNvdW50cnkiLCJpbmRleCIsImNsaW1hdGVTdHJpbmciLCJsYWJvclBlcmNlbnQiLCJsYWJvciIsInF1ZXN0aW9uMiIsImxhYm9yU2NvcmUiLCJxdWVzdGlvbjMiLCJjbGltYXRlU2NvcmUiLCJjbGltYXRlIiwibWF0Y2giLCJ1c2VyTGFyZ2VzdENpdHlQb3AiLCJxdWVzdGlvbjQiLCJ1cmJhblBvcHVsYXRpb25TY29yZSIsImxhcmdlc3RDaXR5UG9wU2NvcmUiLCJsYXJnZXN0Q2l0eVBvcCIsInVzZXJVcmJhblBvcHVsYXRpb24iLCJxdWVzdGlvbjUiLCJ1cmJhblBvcHVsYXRpb24iLCJ1c2VyTWVkaWFuQWdlIiwicXVlc3Rpb242IiwibWVkaWFuQWdlU2NvcmUiLCJtZWRpYW5BZ2UiLCJ1c2VyUGVyQ2FwaXRhUFBQIiwicXVlc3Rpb243IiwicGVyQ2FwaXRhUFBQU2NvcmUiLCJwZXJDYXBpdGFQUFAiLCJ1c2VySW50ZXJuZXRVc2FnZVBlckNhcGl0YSIsInF1ZXN0aW9uOCIsImludGVybmV0VXNhZ2VTY29yZSIsImludGVybmV0VXNhZ2VQZXJDYXBpdGEiLCJzb3J0IiwiYSIsImIiLCJteVNoYXJlZFNlcnZpY2UiLCJ2YWx1ZXMiLCJ3b3JsZEJhbmtEYXRhVXBkYXRlIiwiJGJyb2FkY2FzdCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxXQUFBLFVBQUEsYUFBQSxhQUFBLG9CQUVBRixLQUFBRyxRQUFBLGdCQUFBLGlCQUFBLG9CQUFBLHFCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFELEVBQUFFLFdBQUEsR0FFQUosRUFBQUssU0FBQUMsWUFBQSxRQUNBTixHQUFBSyxTQUFBRSxRQUFBQyxPQUFBLG9CQUVBUixFQUFBUyxhQUFBQyxLQUFBLG1CQUVBUCxFQUNBUSxNQUFBLFdBQ0FDLGVBQUEsYUFDQUMsY0FBQSxRQUNBQyxZQUFBLE9BQ0FDLGtCQUFBLGFBRUFkLEVBQUFlLEtBQUEsS0FFQUMsWUFBQSxtQkFDQUMsV0FBQSxtQkFDQUYsS0FBQSxVQUVBQyxZQUFBLG9CQUNBQyxXQUFBLG9CQUNBRixLQUFBLFlBRUFDLFlBQUEsc0JBQ0FDLFdBQUEsc0JBQ0FGLEtBQUEsVUFFQUMsWUFBQSxvQkFDQUMsV0FBQSxvQkFDQUYsS0FBQSxXQUVBQyxZQUFBLHFCQUNBQyxXQUFBLHFCQUNBRixLQUFBLGtCQUVBQyxZQUFBLDRCQUNBQyxXQUFBLDRCQUNBRixLQUFBLFNBRUFDLFlBQUEsbUJBQ0FDLFdBQUEsbUJBQ0FGLEtBQUEsWUFFQUMsWUFBQSxzQkFDQUMsV0FBQSxzQkFDQUMsV0FDQUMsV0FBQSxTQUlBeEIsSUFBQXNCLFdBQUEsa0JBQUEsY0FBQSxjQUFBLGdCQUFBLHNCQUFBLFFBQUEsYUFBQSxTQUFBLFlBQUEsU0FBQUcsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FJQSxHQUZBRixFQUFBRyxLQUFBUixFQUFBUyxVQUVBSixFQUFBRyxNQUFBSCxFQUFBRyxLQUFBRSxTQUNBSixFQUFBSyxrQkFDQVIsRUFBQVMsVUFDQU4sRUFBQUssZ0JBQUFSLEVBQUFTLFVBRUFSLEVBQUFTLElBQUEsc0JBQUFSLEVBQUFHLEtBQUFFLFVBQ0FJLEtBQUEsU0FBQUMsR0FDQUMsUUFBQUMsSUFBQVosRUFBQUcsS0FBQUUsVUFDQSxnQkFBQUssR0FBQUcsS0FDQWQsRUFBQWUsS0FBQSxzQkFBQUMsZ0JBQUEsRUFBQUMsU0FBQU4sRUFBQUcsS0FBQUksWUFDQVIsS0FBQSxTQUFBUyxHQUNBUCxRQUFBQyxJQUFBRixFQUFBUSxHQUNBakIsRUFBQUssZ0JBQUFULEVBQUFzQix5QkFBQVQsRUFBQUcsS0FBQUssRUFBQUwsTUFDQWYsRUFBQVMsVUFBQU4sRUFBQUssa0JBR0FKLEVBQUFrQixLQUFBLHlCQUtBLENBQ0EsR0FBQUMsS0FBQUMsU0FBQSw2QkFBQUMsTUFBQSxVQUNBRCxTQUFBLDZCQUFBQyxNQUFBLFdBQ0FELFNBQUEseUNBQ0FyQixHQUFBcUIsU0FBQUQsRUFBQSxHQUFBQyxRQUNBLElBQUFFLEdBQUEsQ0FDQXZCLEdBQUF3QixhQUFBLEVBQ0F4QixFQUFBeUIsWUFBQSxTQUFBQyxHQUNBLEdBQ0FKLElBREFGLEVBQUFHLEdBQUFGLFNBQ0FELEVBQUFHLEdBQUFELE1BQ0FJLEdBQ0F6QixFQUFBa0IsS0FBQUcsSUFFQUMsSUFDQXZCLEVBQUFxQixTQUFBRCxFQUFBRyxHQUFBRixTQUNBRSxHQUFBSCxFQUFBTyxPQUFBLElBQ0EzQixFQUFBd0IsYUFBQSxLQU1BeEIsRUFBQTRCLGVBQUEsU0FBQUMsRUFBQUMsR0FFQW5DLEVBQUFvQyxLQUFBRixFQUNBbEMsRUFBQW1DLGFBQUFBLEVBQ0E3QixFQUFBa0IsS0FBQSxnQkFLQWxELElBQUFzQixXQUFBLG1CQUFBLFNBQUEsU0FBQVMsT0FHQS9CLElBQUFzQixXQUFBLHFCQUFBLFNBQUEsU0FBQVMsR0FDQUEsRUFBQWdDLFFBQUEsNEZBR0EvRCxJQUFBc0IsV0FBQSxvQkFBQSxZQUFBLFNBQUEsUUFBQSxTQUFBVSxFQUFBRCxFQUFBRixHQUVBRSxFQUFBaUMsZ0JBQUEsR0FBQUMsUUFBQSx3Q0FFQWxDLEVBQUFtQyxTQUFBLFdBRUEsR0FBQUMsSUFDQWhDLFNBQUFKLEVBQUFxQyxLQUFBQyxTQUNBQyxNQUFBdkMsRUFBQXFDLEtBQUFFLE1BQ0FDLFNBQUF4QyxFQUFBcUMsS0FBQUcsU0FDQUMsU0FBQXpDLEVBQUFxQyxLQUFBSSxTQUNBQyxVQUFBMUMsRUFBQXFDLEtBQUFLLFVBQ0FDLGdCQUFBM0MsRUFBQXFDLEtBQUFNLGdCQUVBN0MsR0FBQWUsS0FBQSxnQkFBQXVCLEdBQ0E1QixLQUFBLFNBQUFvQyxHQUNBbEMsUUFBQUMsSUFBQWlDLEdBQ0EzQyxFQUFBa0IsS0FBQSxnQkFNQWxELElBQUFzQixXQUFBLHFCQUFBLGdCQUFBLGNBQUEsU0FBQSxRQUFBLFNBQUFzRCxFQUFBbEQsRUFBQUssRUFBQUYsR0FDQUUsRUFBQTZCLFlBQUFsQyxFQUFBb0MsS0FDQS9CLEVBQUE4QixhQUFBbkMsRUFBQW1DLGFBQ0E5QixFQUFBOEMsZUFDQUMsU0FDQUMsVUFBQSxXQUNBQyxLQUFBLGFBQ0FDLE1BQUEsZUFJQSxJQUFBQyxHQUFBLFdBQ0FyRCxFQUFBUyxJQUFBLCtCQUFBUCxFQUFBOEIsY0FDQXRCLEtBQUEsU0FBQW9DLEdBQ0FsQyxRQUFBQyxJQUFBaUMsRUFBQWhDLEtBQUFlLFFBQ0EzQixFQUFBOEMsY0FBQUMsUUFBQUgsRUFBQWhDLEtBQUF3QyxNQUFBLEVBQUFSLEVBQUFoQyxLQUFBZSxPQUFBLEdBQ0EzQixFQUFBOEMsY0FBQU8sUUFBQVQsRUFBQWhDLEtBQUF3QyxNQUFBUixFQUFBaEMsS0FBQWUsT0FBQSxFQUFBaUIsRUFBQWhDLEtBQUFlLFFBR0FqQixRQUFBQyxJQUFBaUMsRUFBQWhDLE9BRUEsU0FBQWdDLEdBQ0E1QyxFQUFBWSxLQUFBLHVDQUNBRixRQUFBQyxJQUFBaUMsS0FTQU8sSUFFQSxJQUFBRyxHQUFBdEQsRUFBQTZCLFlBQUEwQixRQUFBLE1BQUEsS0FFQUMsRUFBQSxXQUNBMUQsRUFBQVMsSUFBQSwwQkFBQStDLEdBQ0E5QyxLQUFBLFNBQUFvQyxHQUNBNUMsRUFBQXlELFFBQUFiLEVBQUFoQyxLQUVBRixRQUFBQyxJQUFBWCxFQUFBeUQsVUFFQSxTQUFBYixHQUNBNUMsRUFBQVksS0FBQSx1Q0FDQUYsUUFBQUMsSUFBQWlDLEtBS0FZLFFBSUF2RixJQUFBc0IsV0FBQSxtQkFBQSxTQUFBLFFBQUEsY0FBQSxZQUFBLGFBQUEsU0FBQVMsRUFBQUYsRUFBQUosRUFBQU8sRUFBQUYsR0FDQUMsRUFBQTBELE9BQUEsV0FDQSxHQUFBeEQsSUFDQUUsU0FBQUosRUFBQXFDLEtBQUFDLFNBQ0FFLFNBQUF4QyxFQUFBcUMsS0FBQUcsU0FHQTFDLEdBQUFlLEtBQUEsWUFBQVgsR0FDQU0sS0FBQSxTQUFBb0MsR0FDQWxELEVBQUFpRSxVQUFBZixFQUFBaEMsTUFDQWIsRUFBQUcsS0FBQVIsRUFBQVMsVUFDQUYsRUFBQWtCLEtBQUEsV0FNQWxELElBQUFzQixXQUFBLFdBQUEsY0FBQSxTQUFBLGFBQUEsWUFBQSxRQUFBLFNBQUFHLEVBQUFNLEVBQUFELEVBQUFFLEVBQUFILEdBQ0FDLEVBQUFHLEtBQUFSLEVBQUFTLFVBRUFKLEVBQUFHLE1BQUFILEVBQUFHLEtBQUFFLFVBQ0FILEVBQUFrQixLQUFBLEtBR0FuQixFQUFBNEQsT0FBQSxXQUNBOUQsRUFBQVMsSUFBQSxzQkFBQVIsRUFBQUcsS0FBQUUsVUFDQU4sRUFBQVMsSUFBQSxlQUNBQyxLQUFBLFNBQUFvQyxHQUNBbEMsUUFBQUMsSUFBQWlDLEtBRUFsRCxFQUFBa0UsU0FDQTdELEVBQUFHLEtBQUFSLEVBQUFTLFVBQ0FGLEVBQUFrQixLQUFBLGFBSUFsRCxJQUFBc0IsV0FBQSxrQkFBQSxTQUFBLFNBQUFTLEdBQ0FBLEVBQUFnQyxRQUFBLHdEQUdBL0QsSUFBQXNCLFdBQUEsMkJBQUEsY0FBQSxzQkFBQSxnQkFBQSxhQUFBLFNBQUEsWUFBQSxRQUFBLE9BQUEsS0FBQSxTQUFBSSxFQUFBRSxFQUFBRCxFQUFBRyxFQUFBQyxFQUFBQyxFQUFBSCxFQUFBK0QsRUFBQUMsR0FzQkEsUUFBQUMsS0FFQSxNQUFBL0QsR0FBQWdFLEtBQUFDLElBQUEsU0FBQUMsR0FDQSxPQUNBaEIsTUFBQWdCLEVBQUFDLGNBQ0FDLFFBQUFGLEtBS0EsUUFBQUcsR0FBQUMsR0FDQSxHQUFBQyxHQUFBckcsUUFBQXNHLFVBQUFGLEVBQ0EsT0FBQSxVQUFBSixHQUNBLE1BQUEsS0FBQUEsRUFBQWhCLE1BQUF1QixRQUFBRixJQWpDQXhFLEVBQUFHLEtBQUFFLFVBQ0FILEVBQUFrQixLQUFBLFNBR0EsSUFBQXVELEdBQUE5RSxFQUFBOEUsVUFDQUMsS0FDQUMsSUFFQTVFLEdBQUF1QixZQUFBLEVBQ0F2QixFQUFBWSxRQUNBWixFQUFBWSxRQUNBWixFQUFBNkUsV0FHQTdFLEVBQUE4RSxZQUFBLFNBQUFSLEdBR0EsTUFBQUEsR0FBQXRFLEVBQUFnRSxLQUFBZSxPQUFBVixFQUFBQyxJQUFBdEUsRUFBQWdFLE1Bb0JBaEUsRUFBQWdGLFdBQUEsU0FBQXRELEdBQ0FBLElBQ0ExQixFQUFBNkUsUUFBQTlGLEtBQUEyQyxHQUNBMUIsRUFBQVksS0FBQXFFLGFBQUEsRUFDQWpGLEVBQUFrRixXQUFBLEtBSUFwRixFQUFBUyxJQUFBLHNCQUFBUixFQUFBRyxLQUFBRSxVQUNBSSxLQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUFaLEVBQUFHLEtBQUFFLFVBQ0EsZ0JBQUFLLEdBQUFHLEtBQ0FkLEVBQUFlLEtBQUEsc0JBQUFDLGdCQUFBLEVBQUFDLFNBQUFOLEVBQUFHLEtBQUFJLFlBQ0FSLEtBQUEsU0FBQVMsR0FDQVAsUUFBQUMsSUFBQUYsRUFBQVEsR0FDQWpCLEVBQUFLLGdCQUFBVCxFQUFBc0IseUJBQUFULEVBQUFHLEtBQUFLLEVBQUFMLE1BQ0FmLEVBQUFTLFVBQUFOLEVBQUFLLG1CQUdBTCxFQUFBeUIsY0FDQXpCLEVBQUFnRSxLQUFBRCxPQUlBL0QsRUFBQXlCLFlBQUEsV0FDQXpCLEVBQUFZLEtBQUFxRSxhQUFBLEVBRUFqRixFQUFBdUIsYUFBQW1ELEVBQUEvQyxRQUNBM0IsRUFBQXFCLFNBQUEsZ0NBQ0F1RCxFQUFBeEUsU0FBQUwsRUFBQUcsS0FBQUUsU0FDQXdFLEVBQUFELGtCQUFBQSxFQUNBN0UsRUFBQWUsS0FBQSxxQkFBQStELEdBQ0E5RSxFQUFBZSxLQUFBLHNCQUFBQyxnQkFBQSxFQUFBQyxTQUFBNEQsRUFBQTNELFlBQ0FSLEtBQUEsU0FBQVMsR0FDQWpCLEVBQUFLLGdCQUFBVCxFQUFBc0IseUJBQUF5RCxFQUFBMUQsRUFBQUwsTUFDQWYsRUFBQVMsVUFBQU4sRUFBQUssZ0JBQ0FKLEVBQUFrQixLQUFBLE9BRUFuQixFQUFBbUYsS0FBQSxLQUVBbkYsRUFBQXFCLFNBQUFxRCxFQUFBMUUsRUFBQXVCLGFBQUFGLFNBQ0FyQixFQUFBbUYsS0FBQVQsRUFBQTFFLEVBQUF1QixhQUFBNEQsS0FDQXpFLFFBQUFDLElBQUFYLEVBQUFxQixTQUFBckIsRUFBQW1GLE1BQ0EsUUFBQW5GLEVBQUFtRixPQUNBbkYsRUFBQWdFLEtBQUFVLEVBQUExRSxFQUFBdUIsYUFBQTZELGlCQUtBcEYsRUFBQXFGLFVBQUEsU0FBQTNELEdBQ0ExQixFQUFBWSxLQUFBcUUsYUFBQSxFQUVBakYsRUFBQXVCLGNBRUFHLEVBQUE0RCxjQUFBQyxRQUNBN0QsRUFBQUEsRUFBQThELEtBQUEsTUFFQWIsRUFBQSxXQUFBM0UsRUFBQSxhQUFBMEIsRUFFQTFCLEVBQUE2RSxXQUNBN0UsRUFBQWtGLFdBQUEsSUFJQWxGLEVBQUF5RixXQUFBLFdBQ0EzRixFQUFBZSxLQUFBLHNCQUFBVCxTQUFBTCxFQUFBRyxLQUFBRSxTQUFBc0YsZUFBQSxTQUFBLFVBQUEsV0FDQWxGLEtBQUEsU0FBQW9DLEdBQ0E1QyxFQUFBMEYsY0FBQTlDLEVBQUE4QyxpQkFJQTFGLEVBQUE0QixlQUFBLFNBQUFDLEdBQ0FsQyxFQUFBb0MsS0FBQUYsR0FHQTdCLEVBQUEyRixvQkFBQSxXQUNBN0YsRUFBQUEsVUFBQSxxQkFBQUMsRUFBQUcsS0FBQUUsVUFDQUksS0FBQSxTQUFBb0MsR0FDQWxDLFFBQUFDLElBQUEsWUFDQWQsS0FDQUcsRUFBQUssaUJBQUEsRUFDQUwsRUFBQXVCLFlBQUEsRUFDQXZCLEVBQUF5QixjQUNBekIsRUFBQWdFLEtBQUFELFVBTUE5RixJQUFBMkgsUUFBQSxlQUFBLFVBQUEsU0FBQUMsR0FDQUMsS0FBQUMsU0FBQSxTQUFBQyxHQUNBLEdBQUFBLEVBQUEsQ0FDQSxHQUFBQyxHQUFBRCxFQUFBRSxNQUFBLEtBQUEsR0FDQUMsRUFBQUYsRUFBQTFDLFFBQUEsSUFBQSxLQUFBQSxRQUFBLElBQUEsSUFDQSxPQUFBNkMsTUFBQUMsTUFBQVIsRUFBQVMsS0FBQUgsSUFFQSxVQUlBTCxLQUFBbkMsVUFBQSxTQUFBcUMsR0FDQUgsRUFBQVUsYUFBQUMsU0FBQVIsRUFDQXRGLFFBQUFDLElBQUEsZUFBQWtGLEVBQUFVLGFBQUFDLFdBR0FWLEtBQUFXLFNBQUEsV0FDQSxNQUFBWixHQUFBVSxhQUFBQyxVQUdBVixLQUFBWSxTQUFBLFdBQ0EsR0FBQVYsR0FBQUYsS0FBQVcsVUFDQSxJQUFBVCxFQUFBLENBQ0EsR0FBQVcsR0FBQWIsS0FBQUMsU0FBQUMsR0FDQVksRUFBQUMsS0FBQUMsT0FBQSxHQUFBQyxPQUFBQyxVQUFBLE1BQUFMLEVBQUFNLEdBSUEsT0FIQUwsSUFDQWQsS0FBQWxDLFNBRUFnRCxFQUVBLE9BQUEsR0FJQWQsS0FBQWxDLE9BQUEsaUJBQ0FpQyxHQUFBVSxhQUFBQyxVQUlBVixLQUFBM0YsUUFBQSxXQUNBLE1BQUEyRixNQUFBQyxTQUFBRCxLQUFBVyxnQkFJQXhJLElBQUFpSixRQUFBLG1CQUFBLEtBQUEsWUFBQSxjQUFBLFNBQUFwRCxFQUFBN0QsRUFBQVAsR0FDQSxPQUNBeUgsUUFBQSxTQUFBL0ksR0FNQSxNQUxBQSxHQUFBUSxRQUFBUixFQUFBUSxZQUNBOEIsUUFBQUMsSUFBQXZDLEVBQUFnSixLQUNBMUgsRUFBQWdILGFBQ0F0SSxFQUFBUSxRQUFBeUksY0FBQSxVQUFBM0gsRUFBQStHLFlBRUFySSxHQUVBd0UsU0FBQSxTQUFBQSxHQVlBLE1BWEEzQyxHQUFBcUgsU0FBQUMsZUFDQTdILEVBQUFpRSxVQUFBMUQsRUFBQXFILFNBQUFDLGNBQ0F0SCxFQUFBcUgsT0FBQSxlQUFBRSxRQUNBdkgsRUFBQWtCLEtBQUEsTUFHQSxNQUFBeUIsRUFBQTZFLFFBR0F4SCxFQUFBa0IsS0FBQSxVQUVBeUIsR0FBQWtCLEVBQUF6RSxLQUFBdUQsSUFDQThFLGNBQUEsU0FBQTlFLEdBT0EsTUFOQSxPQUFBQSxFQUFBNkUsT0FDQXhILEVBQUFrQixLQUFBLFVBR0FULFFBQUFDLElBQUFpQyxHQUVBa0IsRUFBQTZELE9BQUEvRSxRQUtBM0UsSUFBQWlKLFFBQUEsZ0JBQUEsV0FDQSxPQUNBeEMsWUFFQXJELFNBQUEsaUNBQUE4RCxLQUFBLE9BQ0FDLGVBQUEsU0FBQSxXQUFBLFlBQUEsV0FBQSxZQUFBLFVBQUEsV0FBQSxPQUFBLGNBQUEsVUFBQSxTQUFBLGFBQUEsVUFBQSxTQUFBLFlBQUEsVUFBQSxVQUFBLFVBQUEsVUFBQSxXQUFBLFVBQUEsV0FBQSxRQUFBLFNBQUEsUUFBQSxVQUFBLFFBQUEsV0FBQSxVQUFBLFVBQUEsU0FBQSxVQUFBLFNBQUEsV0FBQSxRQUFBLFdBQUEsU0FBQSxRQUFBLFlBQUEsWUFBQSxVQUFBLFFBQUEsVUFBQSxZQUFBLFlBQUEsU0FBQSxRQUFBLFFBQUEsVUFBQSxNQUFBLGFBQUEsZ0JBQUEsYUFBQSxVQUFBLE9BQUEsT0FBQSxhQUFBLFlBQUEsY0FBQSxZQUFBLFVBQUEsV0FBQSxTQUFBLFNBQUEsYUFBQSxTQUFBLFdBQUEsVUFBQSxVQUFBLE9BQUEsWUFBQSxRQUFBLFdBQUEsU0FBQSxVQUFBLFdBQUEsU0FBQSxVQUFBLFVBQUEsVUFBQSxPQUFBLFVBQUEsWUFBQSxRQUFBLFVBQUEsWUFBQSxVQUFBLE9BQUEsVUFBQSxRQUFBLGVBR0EvRCxTQUFBLDZCQUNBOEQsS0FBQSxPQUNBQyxlQUFBLGNBQUEsV0FBQSxjQUdBL0QsU0FBQSxvQ0FDQThELEtBQUEsT0FDQUMsZUFBQSxZQUFBLGdCQUFBLFdBQUEsT0FBQSxTQUFBLFdBQUEsU0FHQS9ELFNBQUEsNERBQ0E4RCxLQUFBLE9BQ0FDLGVBQUEsbUJBQUEsNkJBQUEsd0JBR0EvRCxTQUFBLGlFQUNBOEQsS0FBQSxZQUdBOUQsU0FBQSw2Q0FBQThELEtBQUEsT0FDQUMsZUFBQSxXQUFBLFdBQUEsY0FHQS9ELFNBQUEsb0RBQUE4RCxLQUFBLE9BQ0FDLGVBQUEsT0FBQSxVQUFBLFNBR0EvRCxTQUFBLDhEQUFBOEQsS0FBQSxPQUNBQyxlQUFBLE9BQUEsVUFBQSxVQUFBLFVBR0FsRSx5QkFBQSxTQUFBMEcsRUFBQTNHLEdBSUEsUUFBQTRHLEdBQUFDLEVBQUFDLEVBQUE3RSxHQUVBLEdBQUFBLEdBQUE0RSxHQUFBQyxHQUFBN0UsRUFDQSxNQUFBLEdBRUEsSUFBQThFLEdBQUFuQixLQUFBb0IsSUFBQS9FLEVBQUE0RSxHQUFBakIsS0FBQW9CLElBQUEvRSxFQUFBNkUsR0FBQUEsRUFBQUQsRUFDQUksRUFBQWhGLEVBQUE4RSxFQUFBLEdBQUEsSUFDQUcsRUFBQSxJQUFBLEVBQUF0QixLQUFBdUIsSUFBQSxFQUFBdkIsS0FBQW9CLElBQUEvRSxFQUFBZ0YsRUFBQUYsR0FBQUEsR0FDQSxPQUFBRyxHQThIQSxNQXhJQTdILGNBY0FXLEVBQUFvSCxRQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQVIsR0FBQUQsRUFBQVUsRUFBQUwsRUFBQSxFQUNBTSxFQUFBSCxFQUFBSSxNQUFBZCxFQUFBZSxZQUFBLEVBRUFDLEVBQUFILEVBQUEsSUFBQSxHQUFBLEdBQUFBLEVBQUEsRUFHQUQsR0FEQSxlQUFBWixHQUFBaUIsVUFDQSxHQUFBM0csUUFBQTBGLEVBQUFpQixVQUFBckQsS0FBQSxLQUFBLEtBRUEsR0FBQXRELFFBQUEwRixFQUFBaUIsVUFBQSxJQUdBLElBQUFDLEdBQUEsTUFBQVIsRUFBQVMsUUFBQUMsTUFBQVIsR0FBQSxHQUFBLEVBRUFTLEVBQUFyQixFQUFBc0IsU0FDQSxRQUFBRCxHQUNBLElBQUEsbUJBQ0FuQixFQUFBLEVBQ0FDLEVBQUEsR0FDQSxNQUNBLEtBQUEsNkJBQ0FELEVBQUEsSUFDQUMsRUFBQSxHQUNBLE1BQ0EsS0FBQSxxQkFDQUQsRUFBQSxJQUNBQyxFQUFBLEtBS0EsR0FHQW9CLEdBSEFDLEVBQUF2QixFQUFBQyxFQUFBQyxFQUFBTyxFQUFBZSxpQkFBQSxFQUVBQyxFQUFBMUIsRUFBQTJCLFNBR0FKLEdBREFHLEVBQ0FoQixFQUFBa0IsZ0JBQUEsR0FBQSxHQUFBLEdBQUFsQixFQUFBa0IsZ0JBQUEsR0FFQWxCLEVBQUFrQixnQkFBQSxHQUFBLEdBQUEsSUFBQWxCLEVBQUFrQixlQUdBLElBQUFDLEdBQUE3QixFQUFBOEIsU0FDQSxRQUFBRCxHQUNBLElBQUEsV0FDQTNCLEVBQUEsRUFDQUMsRUFBQSxFQUNBLE1BQ0EsS0FBQSxXQUNBRCxFQUFBLEdBQ0FDLEVBQUEsRUFDQSxNQUNBLEtBQUEsV0FDQUQsRUFBQSxHQUNBQyxFQUFBLElBTUEsR0FBQTRCLEdBQUE5QixFQUFBQyxFQUFBQyxFQUFBTyxFQUFBc0IsV0FFQUMsRUFBQWpDLEVBQUFrQyxTQUNBLFFBQUFELEdBQ0EsSUFBQSxPQUNBL0IsRUFBQSxJQUNBQyxFQUFBLElBQ0EsTUFDQSxLQUFBLFVBQ0FELEVBQUEsSUFDQUMsRUFBQSxHQUNBLE1BQ0EsS0FBQSxNQUNBRCxFQUFBLEVBQ0FDLEVBQUEsSUFLQSxHQUFBZ0MsR0FBQWxDLEVBQUFDLEVBQUFDLEVBQUFPLEVBQUEwQixjQUVBQyxFQUFBckMsRUFBQXNDLFNBQ0EsUUFBQUQsR0FDQSxJQUFBLE9BQ0FuQyxFQUFBLEVBQ0FDLEVBQUEsRUFDQSxNQUNBLEtBQUEsVUFDQUQsRUFBQSxHQUNBQyxFQUFBLEVBQ0EsTUFDQSxLQUFBLFVBQ0FELEVBQUEsR0FDQUMsRUFBQSxFQUNBLE1BQ0EsU0FDQUQsRUFBQSxHQUNBQyxFQUFBLElBSUEsR0FBQW9DLEdBQUF0QyxFQUFBQyxFQUFBQyxFQUFBTyxFQUFBOEIsdUJBQ0FqQyxHQUFBQSxFQUFBUyxFQUFBRSxFQUFBTSxFQUFBRCxFQUFBWSxFQUFBSixFQUFBUSxFQUNBN0IsRUFBQUgsTUFBQUEsRUFDQTdILFVBQUF2QixLQUFBdUosS0FHQWhJLFVBQUErSixLQUFBLFNBQUFDLEVBQUFDLEdBQ0EsTUFBQUQsR0FBQW5DLE1BQUFvQyxFQUFBcEMsTUFDQSxHQUVBbUMsRUFBQW5DLE1BQUFvQyxFQUFBcEMsTUFDQSxFQUVBbUMsRUFBQXpJLFlBQUEwSSxFQUFBMUksWUFDQSxFQUVBeUksRUFBQXpJLFlBQUEwSSxFQUFBMUksWUFDQSxHQUVBLElBR0F2QixVQUFBOEMsTUFBQSxFQUFBLE9BS0FuRixJQUFBaUosUUFBQSxjQUFBLFdBQ0EsV0FHQWpKLElBQUFpSixRQUFBLHNCQUFBLFdBQ0EsV0FHQWpKLElBQUFpSixRQUFBLGlCQUFBLGFBQUEsU0FBQW5ILEdBQ0EsR0FBQXlLLEtBUUEsT0FOQUEsR0FBQUMsVUFFQUQsRUFBQUUsb0JBQUEsV0FDQTNLLEVBQUE0SyxXQUFBLFdBR0FIIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ05leHRQYXQnLCBbJ25nUm91dGUnLCduZ01hdGVyaWFsJywnbmdNZXNzYWdlcycsJ3ZhbGlkYXRpb24ubWF0Y2gnXSk7XG5cbmFwcC5jb25maWcoWyckaHR0cFByb3ZpZGVyJywnJHJvdXRlUHJvdmlkZXInLCckbG9jYXRpb25Qcm92aWRlcicsJyRtZFRoZW1pbmdQcm92aWRlcicsIGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIsJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCRtZFRoZW1pbmdQcm92aWRlcil7XG5cbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnVzZVhEb21haW4gPSB0cnVlO1xuICAgIGRlbGV0ZSAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLVJlcXVlc3RlZC1XaXRoJ107XG5cbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcblxuICAgICRtZFRoZW1pbmdQcm92aWRlclxuICAgICAgICAudGhlbWUoJ2RlZmF1bHQnKVxuICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2JsdWUtZ3JleScpXG4gICAgICAgIC5hY2NlbnRQYWxldHRlKCdncmV5JylcbiAgICAgICAgLndhcm5QYWxldHRlKCdyZWQnKVxuICAgICAgICAuYmFja2dyb3VuZFBhbGV0dGUoJ2JsdWUtZ3JleScpO1xuXG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2hvbWUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnaG9tZUNvbnRyb2xsZXInXG4gICAgICAgIH0pLndoZW4oJy9hYm91dCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2Fib3V0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2Fib3V0Q29udHJvbGxlcidcbiAgICAgICAgfSkud2hlbignL2NvbnRhY3QnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9jb250YWN0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2NvbnRhY3RDb250cm9sbGVyJ1xuICAgICAgICB9KS53aGVuKCcvbG9naW4nLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9sb2dpbi5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdsb2dpbkNvbnRyb2xsZXInXG4gICAgICAgIH0pLndoZW4oJy9zaWduVXAnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9zaWduVXAuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnc2lnblVwQ29udHJvbGxlcidcbiAgICAgICAgfSkud2hlbignL3F1ZXN0aW9ubmFpcmUnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9xdWVzdGlvbm5haXJlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3F1ZXN0aW9ubmFpcmVDb250cm9sbGVyJ1xuICAgICAgICB9KS53aGVuKCcvaGVscCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2hlbHAuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnaGVscENvbnRyb2xsZXInXG4gICAgICAgIH0pLndoZW4oJy9jb3VudHJ5JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvY291bnRyeS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjb3VudHJ5Q29udHJvbGxlcidcbiAgICAgICAgfSkub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdob21lQ29udHJvbGxlcicsIFsnYXV0aFNlcnZpY2UnLCdjb3VudHJ5UGFnZScsJ3F1ZXN0aW9ubmFpcmUnLCd1c2VyUmVjb21tZW5kYXRpb25zJywnJGh0dHAnLCckcm9vdFNjb3BlJywnJHNjb3BlJywnJGxvY2F0aW9uJywgZnVuY3Rpb24oYXV0aFNlcnZpY2UsY291bnRyeVBhZ2UscXVlc3Rpb25uYWlyZSx1c2VyUmVjb21tZW5kYXRpb25zLCRodHRwLCRyb290U2NvcGUsJHNjb3BlLCRsb2NhdGlvbil7XG5cbiAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG5cbiAgICBpZigkcm9vdFNjb3BlLnVzZXIgJiYgJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKXtcbiAgICAgICAgaWYoISRzY29wZS5yZWNvbW1lbmRhdGlvbnMpe1xuICAgICAgICAgICAgaWYgKHVzZXJSZWNvbW1lbmRhdGlvbnMuY291bnRyaWVzKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjb21tZW5kYXRpb25zID0gdXNlclJlY29tbWVuZGF0aW9ucy5jb3VudHJpZXM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9xdWVzdGlvbm5haXJlLycrJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKS5cbiAgICAgICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbih1c2VyQW5zd2Vycyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIHVzZXJBbnN3ZXJzLmRhdGEgPT0gJ29iamVjdCcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvd29ybGRGYWN0Ym9vaycse2xhbmd1YWdlT3B0aW9uOnRydWUsbGFuZ3VhZ2U6dXNlckFuc3dlcnMuZGF0YS5xdWVzdGlvbjF9KS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihjb3VudHJpZXNUb1NlYXJjaCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyQW5zd2Vycyxjb3VudHJpZXNUb1NlYXJjaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVjb21tZW5kYXRpb25zID0gcXVlc3Rpb25uYWlyZS5kZXRlcm1pbmVSZWNvbW1lbmRhdGlvbnModXNlckFuc3dlcnMuZGF0YSxjb3VudHJpZXNUb1NlYXJjaC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJSZWNvbW1lbmRhdGlvbnMuY291bnRyaWVzID0gJHNjb3BlLnJlY29tbWVuZGF0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9xdWVzdGlvbm5haXJlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNle1xuICAgICAgICAgICAgdmFyIGludHJvUXVlc3Rpb25zID0gW3txdWVzdGlvbjogXCJIYXZlIHlvdSBiZWVuIGhlcmUgYmVmb3JlP1wiLCByb3V0ZTonbG9naW4nfSxcbiAgICAgICAgICAgICAgICB7cXVlc3Rpb246IFwiV291bGQgeW91IGxpa2UgdG8gc2lnbiB1cD9cIiwgcm91dGU6ICdzaWduVXAnfSxcbiAgICAgICAgICAgICAgICB7cXVlc3Rpb246IFwiT2theSwgeW91IHdvbid0IGJlIGFibGUgdG8gZG8gbXVjaC4uLlwifV07XG4gICAgICAgICAgICAkc2NvcGUucXVlc3Rpb24gPSBpbnRyb1F1ZXN0aW9uc1swXS5xdWVzdGlvbjtcbiAgICAgICAgICAgIHZhciBxdWVzdGlvbk51bSA9IDA7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd0J1dHRvbnMgPSB0cnVlO1xuICAgICAgICAgICAgJHNjb3BlLmdldFF1ZXN0aW9uID0gZnVuY3Rpb24oYW5zd2VyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHF1ZXN0aW9uVGV4dCA9IGludHJvUXVlc3Rpb25zW3F1ZXN0aW9uTnVtXS5xdWVzdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgcm91dGUgPSBpbnRyb1F1ZXN0aW9uc1txdWVzdGlvbk51bV0ucm91dGU7XG4gICAgICAgICAgICAgICAgaWYgKGFuc3dlcikge1xuICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChyb3V0ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbk51bSsrO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb24gPSBpbnRyb1F1ZXN0aW9uc1txdWVzdGlvbk51bV0ucXVlc3Rpb247XG4gICAgICAgICAgICAgICAgICAgIGlmKHF1ZXN0aW9uTnVtID09IGludHJvUXVlc3Rpb25zLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93QnV0dG9ucyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgJHNjb3BlLnNldENvdW50cnlQYWdlID0gZnVuY3Rpb24oY291bnRyeU5hbWUsYWJicmV2aWF0aW9uKXtcblxuICAgICAgICBjb3VudHJ5UGFnZS5uYW1lID0gY291bnRyeU5hbWU7XG4gICAgICAgIGNvdW50cnlQYWdlLmFiYnJldmlhdGlvbiA9IGFiYnJldmlhdGlvbjtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9jb3VudHJ5Jyk7XG4gICAgfTtcblxufV0pO1xuXG5hcHAuY29udHJvbGxlcignYWJvdXRDb250cm9sbGVyJywgWyckc2NvcGUnLGZ1bmN0aW9uKCRzY29wZSl7XG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdjb250YWN0Q29udHJvbGxlcicsWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuICAgICRzY29wZS5tZXNzYWdlID0gXCJJJ20gYSBwYWdlIHRoYXQgdGVsbHMgeW91IGhvdyB0byB5ZWxsIChieSB3cml0aW5nIGFuIGFsbC1jYXBzIGVtYWlsKSBhdCB0aGUgZGV2ZWxvcGVyIVwiO1xufV0pO1xuXG5hcHAuY29udHJvbGxlcignc2lnblVwQ29udHJvbGxlcicsWyckbG9jYXRpb24nLCckc2NvcGUnLCckaHR0cCcsIGZ1bmN0aW9uKCRsb2NhdGlvbiwkc2NvcGUsJGh0dHApe1xuXG4gICAgJHNjb3BlLnBhc3N3b3JkUGF0dGVybiA9IG5ldyBSZWdFeHAoJ14oPz0uKlxcZCkoPz0uKlthLXpdKSg/PS4qW0EtWl0pLnsxLH0kJyk7XG5cbiAgICAkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgIHZhciBuZXdVc2VyID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6ICRzY29wZS5mb3JtLnVzZXJOYW1lLFxuICAgICAgICAgICAgZW1haWw6ICRzY29wZS5mb3JtLmVtYWlsLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5mb3JtLnBhc3N3b3JkLFxuICAgICAgICAgICAgbGFzdE5hbWU6ICRzY29wZS5mb3JtLmxhc3ROYW1lLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUuZm9ybS5maXJzdE5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZENvbmZpcm06ICRzY29wZS5mb3JtLnBhc3N3b3JkQ29uZmlybVxuICAgICAgICB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3JlZ2lzdGVyJyxuZXdVc2VyKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ2NvdW50cnlDb250cm9sbGVyJywgWydzaGFyZWRTZXJ2aWNlJywnY291bnRyeVBhZ2UnLCckc2NvcGUnLCckaHR0cCcsIGZ1bmN0aW9uKHNoYXJlZFNlcnZpY2UsY291bnRyeVBhZ2UsJHNjb3BlLCRodHRwKXtcbiAgICAkc2NvcGUuY291bnRyeU5hbWUgPSBjb3VudHJ5UGFnZS5uYW1lO1xuICAgICRzY29wZS5hYmJyZXZpYXRpb24gPSBjb3VudHJ5UGFnZS5hYmJyZXZpYXRpb247XG4gICAgJHNjb3BlLndvcmxkQmFua0RhdGEgPSB7XG4gICAgICAgIGNvbHVtbjE6IHtcbiAgICAgICAgICAgIGluZGljYXRvcjogXCJBUkUgWU9VIFwiLFxuICAgICAgICAgICAgeWVhcjogXCJSRUFEWSBGT1IgXCIsXG4gICAgICAgICAgICB2YWx1ZTogXCJTT01FIERBVEE/IVwiXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldERhdGEgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5nZXQoJy9leHRlcm5hbEFQSXMvd29ybGRCYW5rRGF0YS8nKyRzY29wZS5hYmJyZXZpYXRpb24pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICRzY29wZS53b3JsZEJhbmtEYXRhLmNvbHVtbjEgPSByZXNwb25zZS5kYXRhLnNsaWNlKDAscmVzcG9uc2UuZGF0YS5sZW5ndGgvMik7XG4gICAgICAgICAgICAgICAgJHNjb3BlLndvcmxkQmFua0RhdGEuY29sdW1uMiA9IHJlc3BvbnNlLmRhdGEuc2xpY2UocmVzcG9uc2UuZGF0YS5sZW5ndGgvMixyZXNwb25zZS5kYXRhLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICAvL3NoYXJlZFNlcnZpY2Uud29ybGRCYW5rRGF0YVVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuXG4gICAgICAgICAgICB9LGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhID0gXCJUaGVyZSB3YXMgYW4gZXJyb3IsIHRyeSBhZ2FpbiBsYXRlciFcIjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgLy8kc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8kc2NvcGUuJG9uKCd1cGRhdGUnLGZ1bmN0aW9uKCl7XG4gICAgLy8gICAgZ2V0RGF0YSgpO1xuICAgIC8vfSk7XG5cbiAgICBnZXREYXRhKCk7XG5cbiAgICB2YXIgbWVkaVdpa2lDb3VudHJ5TmFtZSA9ICRzY29wZS5jb3VudHJ5TmFtZS5yZXBsYWNlKC9cXHMvZywnXycpO1xuXG4gICAgdmFyIGdldEZsYWcgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5nZXQoJy9leHRlcm5hbEFQSXMvbWVkaVdpa2kvJysgbWVkaVdpa2lDb3VudHJ5TmFtZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmxhZ1VybCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgLy9zaGFyZWRTZXJ2aWNlLndvcmxkQmFua0RhdGFVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZmxhZ1VybCk7XG5cbiAgICAgICAgICAgIH0sZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSBcIlRoZXJlIHdhcyBhbiBlcnJvciwgdHJ5IGFnYWluIGxhdGVyIVwiO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAvLyRzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBnZXRGbGFnKCk7XG5cbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJ2F1dGhTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgYXV0aFNlcnZpY2UsICRsb2NhdGlvbiwgJHJvb3RTY29wZSl7XG4gICAgJHNjb3BlLnNpZ25JbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB1c2VyID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6ICRzY29wZS5mb3JtLnVzZXJOYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5mb3JtLnBhc3N3b3JkXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnYXBpL2xvZ2luJywgdXNlcilcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLnNhdmVUb2tlbihyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxufV0pO1xuXG5hcHAuY29udHJvbGxlcignbmF2Q3RybCcsIFsnYXV0aFNlcnZpY2UnLCckc2NvcGUnLCckcm9vdFNjb3BlJywnJGxvY2F0aW9uJywnJGh0dHAnLCBmdW5jdGlvbihhdXRoU2VydmljZSwgJHNjb3BlLCRyb290U2NvcGUsICRsb2NhdGlvbiwkaHR0cCl7XG4gICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuXG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS9xdWVzdGlvbm5haXJlLycrJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKTtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2xvZ291dCcpLlxuICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2hvbWVcIik7XG4gICAgfVxufV0pO1xuXG5hcHAuY29udHJvbGxlcignaGVscENvbnRyb2xsZXInLFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcbiAgICAkc2NvcGUubWVzc2FnZSA9IFwiSSdtIGEgaGVscCBwYWdlIHRoYXQgY3VycmVudGx5IGRvZXNuJ3QgaGVscCBhdCBhbGxcIjtcbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ3F1ZXN0aW9ubmFpcmVDb250cm9sbGVyJyxbJ2NvdW50cnlQYWdlJywndXNlclJlY29tbWVuZGF0aW9ucycsJ3F1ZXN0aW9ubmFpcmUnLCckcm9vdFNjb3BlJywnJHNjb3BlJywnJGxvY2F0aW9uJywgJyRodHRwJywnJGxvZycsJyRxJyxmdW5jdGlvbihjb3VudHJ5UGFnZSx1c2VyUmVjb21tZW5kYXRpb25zLHF1ZXN0aW9ubmFpcmUsJHJvb3RTY29wZSwkc2NvcGUsJGxvY2F0aW9uLCRodHRwLCRsb2csJHEpe1xuXG4gICAgaWYoISRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgICB9XG5cbiAgICB2YXIgcXVlc3Rpb25zID0gcXVlc3Rpb25uYWlyZS5xdWVzdGlvbnM7XG4gICAgdmFyIHF1ZXN0aW9uUmVzcG9uc2VzID0ge307XG4gICAgdmFyIHVzZXJRdWVzdGlvbm5haXJlID0ge307XG5cbiAgICAkc2NvcGUucXVlc3Rpb25OdW0gPSAwO1xuICAgICRzY29wZS5kYXRhID0ge307XG4gICAgJHNjb3BlLmRhdGEgPSB7fTtcbiAgICAkc2NvcGUuYW5zd2VycyA9IFtdO1xuXG5cbiAgICAkc2NvcGUucXVlcnlTZWFyY2ggPSBmdW5jdGlvbihxdWVyeSkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKHF1ZXJ5KTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygkc2NvcGUubGlzdCk7XG4gICAgICAgIHJldHVybiBxdWVyeSA/ICRzY29wZS5saXN0LmZpbHRlciggY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSApIDogJHNjb3BlLmxpc3Q7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGxvYWRBbGwoKSB7XG5cbiAgICAgICAgcmV0dXJuICRzY29wZS5saXN0Lm1hcCggZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0udG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpdGVtXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVGaWx0ZXJGb3IocXVlcnkpIHtcbiAgICAgICAgdmFyIGxvd2VyY2FzZVF1ZXJ5ID0gYW5ndWxhci5sb3dlcmNhc2UocXVlcnkpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZmlsdGVyRm4oaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIChpdGVtLnZhbHVlLmluZGV4T2YobG93ZXJjYXNlUXVlcnkpID09PSAwKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAkc2NvcGUucHVzaEFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcil7XG4gICAgICAgIGlmKGFuc3dlcil7XG4gICAgICAgICAgICAkc2NvcGUuYW5zd2Vycy5wdXNoKGFuc3dlcik7XG4gICAgICAgICAgICAkc2NvcGUuZGF0YS5zaG93QW5zd2VycyA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUuc2VhcmNoVGV4dCA9ICcnO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRodHRwLmdldCgnL2FwaS9xdWVzdGlvbm5haXJlLycrJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKS5cbiAgICAgICAgdGhlbihmdW5jdGlvbih1c2VyQW5zd2Vycyl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpO1xuICAgICAgICAgICAgaWYodHlwZW9mIHVzZXJBbnN3ZXJzLmRhdGEgPT0gJ29iamVjdCcpe1xuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvd29ybGRGYWN0Ym9vaycse2xhbmd1YWdlT3B0aW9uOnRydWUsbGFuZ3VhZ2U6dXNlckFuc3dlcnMuZGF0YS5xdWVzdGlvbjF9KS5cbiAgICAgICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihjb3VudHJpZXNUb1NlYXJjaCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyQW5zd2Vycyxjb3VudHJpZXNUb1NlYXJjaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVjb21tZW5kYXRpb25zID0gcXVlc3Rpb25uYWlyZS5kZXRlcm1pbmVSZWNvbW1lbmRhdGlvbnModXNlckFuc3dlcnMuZGF0YSxjb3VudHJpZXNUb1NlYXJjaC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJSZWNvbW1lbmRhdGlvbnMuY291bnRyaWVzID0gJHNjb3BlLnJlY29tbWVuZGF0aW9ucztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICRzY29wZS5nZXRRdWVzdGlvbigpO1xuICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gbG9hZEFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICRzY29wZS5nZXRRdWVzdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5kYXRhLnNob3dBbnN3ZXJzID0gZmFsc2U7XG5cbiAgICAgICAgaWYoJHNjb3BlLnF1ZXN0aW9uTnVtPT1xdWVzdGlvbnMubGVuZ3RoKXtcbiAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbiA9ICdZb3VyIGxpc3QgaXMgYmVpbmcgZ2VuZXJhdGVkISc7XG4gICAgICAgICAgICB1c2VyUXVlc3Rpb25uYWlyZS51c2VybmFtZSA9ICRyb290U2NvcGUudXNlci51c2VybmFtZTtcbiAgICAgICAgICAgIHVzZXJRdWVzdGlvbm5haXJlLnF1ZXN0aW9uUmVzcG9uc2VzID0gcXVlc3Rpb25SZXNwb25zZXM7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3F1ZXN0aW9ubmFpcmUnLHVzZXJRdWVzdGlvbm5haXJlKTtcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvd29ybGRGYWN0Ym9vaycse2xhbmd1YWdlT3B0aW9uOnRydWUsbGFuZ3VhZ2U6cXVlc3Rpb25SZXNwb25zZXMucXVlc3Rpb24xfSkuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihjb3VudHJpZXNUb1NlYXJjaCl7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWNvbW1lbmRhdGlvbnMgPSBxdWVzdGlvbm5haXJlLmRldGVybWluZVJlY29tbWVuZGF0aW9ucyhxdWVzdGlvblJlc3BvbnNlcyxjb3VudHJpZXNUb1NlYXJjaC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdXNlclJlY29tbWVuZGF0aW9ucy5jb3VudHJpZXMgPSAkc2NvcGUucmVjb21tZW5kYXRpb25zO1xuICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLnR5cGUgPSAnJztcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAkc2NvcGUucXVlc3Rpb24gPSBxdWVzdGlvbnNbJHNjb3BlLnF1ZXN0aW9uTnVtXS5xdWVzdGlvbjtcbiAgICAgICAgICAgICRzY29wZS50eXBlID0gcXVlc3Rpb25zWyRzY29wZS5xdWVzdGlvbk51bV0udHlwZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5xdWVzdGlvbiwgJHNjb3BlLnR5cGUpO1xuICAgICAgICAgICAgaWYoJHNjb3BlLnR5cGUgPT0gJ2xpc3QnKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IHF1ZXN0aW9uc1skc2NvcGUucXVlc3Rpb25OdW1dLmFuc3dlck9wdGlvbnM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH07XG4gICAgJHNjb3BlLmxvZ0Fuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcil7XG4gICAgICAgICRzY29wZS5kYXRhLnNob3dBbnN3ZXJzID0gZmFsc2U7XG5cbiAgICAgICAgJHNjb3BlLnF1ZXN0aW9uTnVtKys7XG5cbiAgICAgICAgaWYoYW5zd2VyLmNvbnN0cnVjdG9yID09PSBBcnJheSl7XG4gICAgICAgICAgICBhbnN3ZXIgPSBhbnN3ZXIuam9pbignICcpXG4gICAgICAgIH1cbiAgICAgICAgcXVlc3Rpb25SZXNwb25zZXNbXCJxdWVzdGlvblwiKygkc2NvcGUucXVlc3Rpb25OdW0pXSA9IGFuc3dlcjtcblxuICAgICAgICAkc2NvcGUuYW5zd2VycyA9IFtdO1xuICAgICAgICAkc2NvcGUuc2VhcmNoVGV4dCA9ICcnO1xuXG4gICAgfTtcblxuICAgICRzY29wZS5hZGRDb3VudHJ5ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS91c2VyQ291bnRyaWVzJyx7dXNlcm5hbWU6ICRyb290U2NvcGUudXNlci51c2VybmFtZSx1c2VyQ291bnRyaWVzOiBbJ2ZyYW5jZScsJ2dlcm1hbnknLCdzcGFpbiddfSkuXG4gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlckNvdW50cmllcyA9IHJlc3BvbnNlLnVzZXJDb3VudHJpZXM7XG4gICAgICAgICAgICB9KVxuICAgIH07XG5cbiAgICAkc2NvcGUuc2V0Q291bnRyeVBhZ2UgPSBmdW5jdGlvbihjb3VudHJ5TmFtZSl7XG4gICAgICAgIGNvdW50cnlQYWdlLm5hbWUgPSBjb3VudHJ5TmFtZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRlbGV0ZVF1ZXN0aW9ubmFpcmUgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5kZWxldGUoJ2FwaS9xdWVzdGlvbm5haXJlLycrJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGVkIScpO1xuICAgICAgICAgICAgICAgIHVzZXJSZWNvbW1lbmRhdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjb21tZW5kYXRpb25zID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uTnVtID0gMDtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0UXVlc3Rpb24oKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IGxvYWRBbGwoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XSk7XG5cbmFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG4gICAgdGhpcy5wYXJzZUp3dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCR3aW5kb3cuYXRvYihiYXNlNjQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgICAgICBjb25zb2xlLmxvZygnU2F2ZWQgdG9rZW46Jywkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbik7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0F1dGhlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VuID0gdGhpcy5nZXRUb2tlbigpO1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcnNlSnd0KHRva2VuKTtcbiAgICAgICAgICAgIHZhciBub3RFeHBpcmVkID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApIDw9IHBhcmFtcy5leHA7XG4gICAgICAgICAgICBpZiAoIW5vdEV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vdEV4cGlyZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlbGV0ZSAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgLy8gZXhwb3NlIHVzZXIgYXMgYW4gb2JqZWN0XG4gICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUp3dCh0aGlzLmdldFRva2VuKCkpXG4gICAgfTtcbn1dKTtcblxuYXBwLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgJ2F1dGhTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24sIGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbmZpZy51cmwpO1xuICAgICAgICAgICAgaWYgKGF1dGhTZXJ2aWNlLmlzQXV0aGVkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgYXV0aFNlcnZpY2UuZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmKCRsb2NhdGlvbi5zZWFyY2goKS5hY2Nlc3NfdG9rZW4pe1xuICAgICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLnNhdmVUb2tlbigkbG9jYXRpb24uc2VhcmNoKCkuYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdhY2Nlc3NfdG9rZW4nLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9sb2dpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcbiAgICAgICAgfSwgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9sb2dpblwiKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG5cbmFwcC5mYWN0b3J5KCdxdWVzdGlvbm5haXJlJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHF1ZXN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiBcIldoYXQgbGFuZ3VhZ2UocykgZG8geW91IHNwZWFrP1wiLCB0eXBlOiAnbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWydBZHlnaGUnLCAnQWxiYW5pYW4nLCAnQXJhZ29uZXNlJywgJ0FybWVuaWFuJywgJ0Fyb21hbmlhbicsICdBcnBpdGFuJywgJ0FzdHVyaWFuJywgJ0F2YXInLCAnQXplcmJhaWphbmknLCAnQmFzaGtpcicsICdCYXNxdWUnLCAnQmVsYXJ1c2lhbicsICdCb3NuaWFuJywgJ0JyZXRvbicsICdCdWxnYXJpYW4nLCAnQ2F0YWxhbicsICdDaGVjaGVuJywgJ0NodXZhc2gnLCAnQ29ybmlzaCcsICdDb3JzaWNhbicsICdDcmltZWFuJywgJ0Nyb2F0aWFuJywgJ0N6ZWNoJywgJ0RhbmlzaCcsICdEdXRjaCcsICdFbmdsaXNoJywgJ0VyenlhJywgJ0VzdG9uaWFuJywgJ0Zhcm9lc2UnLCAnRmlubmlzaCcsICdGcmVuY2gnLCAnRnJpc2lhbicsICdHYWdhdXonLCAnR2FsaWNpYW4nLCAnR2FsbG8nLCAnR2VvcmdpYW4nLCAnR2VybWFuJywgJ0dyZWVrJywgJ0h1bmdhcmlhbicsICdJY2VsYW5kaWMnLCAnSW5ncmlhbicsICdJcmlzaCcsICdJdGFsaWFuJywgJ0thYmFyZGlhbicsICdLYXNodWJpYW4nLCAnS2F6YWtoJywgJ0xhZGluJywgJ0xhdGluJywgJ0xhdHZpYW4nLCAnTGF6JywgJ0xpdGh1YW5pYW4nLCAnTHV4ZW1ib3VyZ2lzaCcsICdNYWNlZG9uaWFuJywgJ01hbHRlc2UnLCAnTWFueCcsICdNYXJpJywgJ01pbmdyZWxpYW4nLCAnTWlyYW5kZXNlJywgJ01vbnRlbmVncmluJywgJ05vcndlZ2lhbicsICdPY2NpdGFuJywgJ09zc2V0aWFuJywgJ1BpY2FyZCcsICdQb2xpc2gnLCAnUG9ydHVndWVzZScsICdSb21hbmknLCAnUm9tYW5pYW4nLCAnUm9tYW5zaCcsICdSdXNzaWFuJywgJ1NhbWknLCAnU2FyZGluaWFuJywgJ1Njb3RzJywgJ1Njb3R0aXNoJywnR2FlbGljJywgJ1NlcmJpYW4nLCAnU2lsZXNpYW4nLCAnU2xvdmFrJywgJ1Nsb3ZlbmUnLCAnU29yYmlhbicsICdTcGFuaXNoJywgJ1N2YW4nLCAnU3dlZGlzaCcsICdUYWJhc2FyYW4nLCAnVGF0YXInLCAnVHVya2lzaCcsICdVa3JhaW5pYW4nLCAnVmVwc2lhbicsICdWw7VybycsICdXYWxsb29uJywgJ1dlbHNoJywgJ1d5bXlzb3J5cyddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBmaWVsZCBkbyB5b3Ugd29yayBpbj8nLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdsaXN0JyxcbiAgICAgICAgICAgICAgICBhbnN3ZXJPcHRpb25zOiBbJ0FncmljdWx0dXJlJywgJ0luZHVzdHJ5JywgJ1NlcnZpY2VzJ11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcXVlc3Rpb246ICdXaGF0IGNsaW1hdGUocykgd291bGQgeW91IHByZWZlcj8nLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdsaXN0JyxcbiAgICAgICAgICAgICAgICBhbnN3ZXJPcHRpb25zOiBbJ1RlbXBlcmF0ZScsICdNZWRpdGVycmFuZWFuJywgJ1Ryb3BpY2FsJywgJ0FyaWQnLCAnRGVzZXJ0JywgJ01hcml0aW1lJywgJ1dldCddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBpcyB0aGUgaWRlYWwgc2l6ZSBmb3IgdGhlIGxhcmdlc3QgbWV0cm9wb2xpdGFuIGFyZWE/JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWydTbWFsbCAoPDEwMCwwMDApJywgJ01lZGl1bSAoMTAwLDAwMC0xIG1pbGxpb24pJywgJ0xhcmdlICg+MSBtaWxsaW9uKSddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV291bGQgeW91IGxpa2UgdGhlIHBvcHVsYXRpb24gZGlzdHJpYnV0aW9uIHRvIGJlIG1vc3RseSB1cmJhbj8nLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogJ1doYXQgd291bGQgeW91ciBpZGVhbCBtZWRpYW4gYWdlIHJhbmdlIGJlPycsIHR5cGU6ICdsaXN0JyxcbiAgICAgICAgICAgICAgICBhbnN3ZXJPcHRpb25zOiBbJzIwLTMweXJzJywgJzMwLTQweXJzJywgJzQwK3llYXJzJ11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcXVlc3Rpb246ICdXaGF0IGNvc3Qgb2YgbGl2aW5nIHNob3VsZCB5b3VyIGRlc3RpbmF0aW9uIGhhdmU/JywgdHlwZTonbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWydIaWdoJywnQXZlcmFnZScsJ0xvdyddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBwZXJjZW50YWdlIG9mIHRoZSBwb3B1bGF0aW9uIHNob3VsZCBiZSBpbnRlcm5ldCB1c2Vycz8nLCB0eXBlOidsaXN0JyxcbiAgICAgICAgICAgICAgICBhbnN3ZXJPcHRpb25zOiBbJzwyNSUnLCcyNSUtNTAlJywnNTAlLTc1JScsJz43NSUnXVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBkZXRlcm1pbmVSZWNvbW1lbmRhdGlvbnM6IGZ1bmN0aW9uKHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLGNvdW50cmllc1RvU2VhcmNoKXtcblxuICAgICAgICAgICAgY291bnRyaWVzID0gW107XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFByb3BvcnRpb25hbFNjb3JlKGxvd2VyTGltaXQsdXBwZXJMaW1pdCx2YWx1ZSl7XG5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPj0gbG93ZXJMaW1pdCAmJiB2YWx1ZSA8PSB1cHBlckxpbWl0KXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEwO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGltaXQgPSBNYXRoLmFicyh2YWx1ZS1sb3dlckxpbWl0KSA+IE1hdGguYWJzKHZhbHVlLXVwcGVyTGltaXQpID8gdXBwZXJMaW1pdCA6IGxvd2VyTGltaXQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsaWVyID0gdmFsdWUgPiBsaW1pdCA/IDAuNSA6IDEuNTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gMjAqKDEgLSBNYXRoLm1pbigxLE1hdGguYWJzKHZhbHVlIC0gbXVsdGlwbGllcipsaW1pdCkvbGltaXQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjb3JlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY291bnRyaWVzVG9TZWFyY2guZm9yRWFjaChmdW5jdGlvbihjb3VudHJ5LGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gMCwgdXBwZXJMaW1pdCwgbG93ZXJMaW1pdCwgY2xpbWF0ZVN0cmluZztcbiAgICAgICAgICAgICAgICB2YXIgbGFib3JQZXJjZW50ID0gY291bnRyeS5sYWJvcltxdWVzdGlvbm5haXJlQW5zd2Vycy5xdWVzdGlvbjJdIHx8IDA7XG4gICAgICAgICAgICAgICAgLy9pZiB1c2VyJ3Mgc3BlY2lmaWVkIGluZHVzdHJ5IGlzIG1vcmUgdGhhbiA3NSUgb2YgdGhlIGNvdW50cnkncyB3b3JrZm9yY2UsIHNldCBzY29yZSB0byAxMFxuICAgICAgICAgICAgICAgIHZhciBsYWJvclNjb3JlID0gbGFib3JQZXJjZW50LzcuNSA+IDEwID8gMTAgOiBsYWJvclBlcmNlbnQvMTA7XG4gICAgICAgICAgICAgICAgLy9jcmVhdGUgUmVndWxhciBFeHByZXNzaW9uIHRvIGNoZWNrIGNsaW1hdGUgc3RyaW5nIGZvciBjbGltYXRlIGFuc3dlcnNcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uMyA9PSAnYXJyYXknKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsaW1hdGVTdHJpbmcgPSBuZXcgUmVnRXhwKHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uMy5qb2luKCd8JyksJ2knKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY2xpbWF0ZVN0cmluZyA9IG5ldyBSZWdFeHAocXVlc3Rpb25uYWlyZUFuc3dlcnMucXVlc3Rpb24zLCdpJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vaWYgY2xpbWF0ZSBzdHJpbmcgY29udGFpbnMgb25lIG9mIHRoZSBjbGltYXRlIGFuc3dlcnMsIHNldCBzY29yZSB0byAxMFxuICAgICAgICAgICAgICAgIHZhciBjbGltYXRlU2NvcmUgPSBjb3VudHJ5LmNsaW1hdGUubWF0Y2goY2xpbWF0ZVN0cmluZykgIT0gbnVsbCA/IDEwOiAwO1xuXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJMYXJnZXN0Q2l0eVBvcCA9IHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uNDtcbiAgICAgICAgICAgICAgICBzd2l0Y2godXNlckxhcmdlc3RDaXR5UG9wKXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU21hbGwgKDwxMDAsMDAwKSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAxRTU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTWVkaXVtICgxMDAsMDAwLTEgbWlsbGlvbiknOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDFFNTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAxRTY7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTGFyZ2UgKD4xIG1pbGxpb24pJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSAxRTY7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMUUyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsYXJnZXN0Q2l0eVBvcFNjb3JlID0gZ2V0UHJvcG9ydGlvbmFsU2NvcmUobG93ZXJMaW1pdCx1cHBlckxpbWl0LGNvdW50cnkubGFyZ2VzdENpdHlQb3ApIHx8IDA7XG5cbiAgICAgICAgICAgICAgICB2YXIgdXNlclVyYmFuUG9wdWxhdGlvbiA9IHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uNTtcbiAgICAgICAgICAgICAgICB2YXIgdXJiYW5Qb3B1bGF0aW9uU2NvcmU7XG4gICAgICAgICAgICAgICAgaWYodXNlclVyYmFuUG9wdWxhdGlvbil7XG4gICAgICAgICAgICAgICAgICAgIHVyYmFuUG9wdWxhdGlvblNjb3JlID0gY291bnRyeS51cmJhblBvcHVsYXRpb24gPiA1MCA/IDEwIDogMTAqY291bnRyeS51cmJhblBvcHVsYXRpb24vNTA7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHVyYmFuUG9wdWxhdGlvblNjb3JlID0gY291bnRyeS51cmJhblBvcHVsYXRpb24gPCA1MCA/IDEwIDogMTAqNTAvY291bnRyeS51cmJhblBvcHVsYXRpb247XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJNZWRpYW5BZ2UgPSBxdWVzdGlvbm5haXJlQW5zd2Vycy5xdWVzdGlvbjY7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHVzZXJNZWRpYW5BZ2Upe1xuICAgICAgICAgICAgICAgICAgICBjYXNlICcyMC0zMHlycyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICczMC00MHlycyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMzA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gNDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnNDAreWVhcnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDQwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9IDE1MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG1lZGlhbkFnZVNjb3JlID0gZ2V0UHJvcG9ydGlvbmFsU2NvcmUobG93ZXJMaW1pdCx1cHBlckxpbWl0LGNvdW50cnkubWVkaWFuQWdlKTtcblxuICAgICAgICAgICAgICAgIHZhciB1c2VyUGVyQ2FwaXRhUFBQID0gcXVlc3Rpb25uYWlyZUFuc3dlcnMucXVlc3Rpb243O1xuICAgICAgICAgICAgICAgIHN3aXRjaCh1c2VyUGVyQ2FwaXRhUFBQKXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSGlnaCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gNjAwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMUUxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdBdmVyYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSAzMDAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSA2MDAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdMb3cnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMzAwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGVyQ2FwaXRhUFBQU2NvcmUgPSBnZXRQcm9wb3J0aW9uYWxTY29yZShsb3dlckxpbWl0LHVwcGVyTGltaXQsY291bnRyeS5wZXJDYXBpdGFQUFApO1xuXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJJbnRlcm5ldFVzYWdlUGVyQ2FwaXRhID0gcXVlc3Rpb25uYWlyZUFuc3dlcnMucXVlc3Rpb244O1xuICAgICAgICAgICAgICAgIHN3aXRjaCh1c2VySW50ZXJuZXRVc2FnZVBlckNhcGl0YSl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzwyNSUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMjU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnMjUlLTUwJSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMjU7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gNTA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnNTAlLTc1JSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gNTA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSA3NTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAxMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJuZXRVc2FnZVNjb3JlID0gZ2V0UHJvcG9ydGlvbmFsU2NvcmUobG93ZXJMaW1pdCx1cHBlckxpbWl0LGNvdW50cnkuaW50ZXJuZXRVc2FnZVBlckNhcGl0YSk7XG4gICAgICAgICAgICAgICAgc2NvcmUgPSBzY29yZSArIGxhYm9yU2NvcmUgKyBjbGltYXRlU2NvcmUgKyBsYXJnZXN0Q2l0eVBvcFNjb3JlICsgdXJiYW5Qb3B1bGF0aW9uU2NvcmUgKyBwZXJDYXBpdGFQUFBTY29yZSArIG1lZGlhbkFnZVNjb3JlICsgaW50ZXJuZXRVc2FnZVNjb3JlO1xuICAgICAgICAgICAgICAgIGNvdW50cnkuc2NvcmUgPSBzY29yZTtcbiAgICAgICAgICAgICAgICBjb3VudHJpZXMucHVzaChjb3VudHJ5KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb3VudHJpZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIGlmIChhLnNjb3JlID4gYi5zY29yZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhLnNjb3JlIDwgYi5zY29yZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoYS5jb3VudHJ5TmFtZSA+IGIuY291bnRyeU5hbWUpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoYS5jb3VudHJ5TmFtZSA8IGIuY291bnRyeU5hbWUpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBjb3VudHJpZXMuc2xpY2UoMCw0KTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuYXBwLmZhY3RvcnkoJ2NvdW50cnlQYWdlJyxmdW5jdGlvbigpe1xuICAgIHJldHVybiB7fTtcbn0pO1xuXG5hcHAuZmFjdG9yeSgndXNlclJlY29tbWVuZGF0aW9ucycsZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge307XG59KTtcblxuYXBwLmZhY3RvcnkoJ3NoYXJlZFNlcnZpY2UnLCBbJyRyb290U2NvcGUnLGZ1bmN0aW9uKCRyb290U2NvcGUpe1xuICAgIHZhciBteVNoYXJlZFNlcnZpY2UgPSB7fTtcblxuICAgIG15U2hhcmVkU2VydmljZS52YWx1ZXMgPSB7fTtcblxuICAgIG15U2hhcmVkU2VydmljZS53b3JsZEJhbmtEYXRhVXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd1cGRhdGUnKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG15U2hhcmVkU2VydmljZTtcbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==