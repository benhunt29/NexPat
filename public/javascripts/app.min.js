var app=angular.module("NextPat",["ngRoute","ngMaterial","ngMessages","validation.match"]);app.config(["$httpProvider","$routeProvider","$locationProvider","$mdThemingProvider",function(e,t,n,a){n.html5Mode(!0),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"],e.interceptors.push("authInterceptor"),a.theme("default").primaryPalette("blue-grey").accentPalette("grey").warnPalette("red").backgroundPalette("blue-grey"),t.when("/",{templateUrl:"/views/home.html",controller:"homeController"}).when("/about",{templateUrl:"/views/about.html",controller:"aboutController"}).when("/contact",{templateUrl:"/views/contact.html",controller:"contactController"}).when("/login",{templateUrl:"/views/login.html",controller:"loginController"}).when("/signUp",{templateUrl:"/views/signUp.html",controller:"signUpController"}).when("/questionnaire",{templateUrl:"/views/questionnaire.html",controller:"questionnaireController"}).when("/help",{templateUrl:"/views/help.html",controller:"helpController"}).when("/country",{templateUrl:"/views/country.html",controller:"countryController"}).otherwise({redirectTo:"/"})}]),app.controller("aboutController",["$scope",function(e){}]),app.controller("contactController",["$scope",function(e){}]),app.controller("countryController",["sharedService","countryPage","$scope","$http",function(e,t,n,a){n.countryName=t.name,n.abbreviation=t.abbreviation,n.largestCityName=t.largestCityName,n.largestCityPop=t.largestCityPop,n.majorityLanguage=t.majorityLanguage,n.medianAge=t.medianAge,n.worldBankData={};var o=function(){a.get("/externalAPIs/worldBankData/"+n.abbreviation).then(function(e){n.worldBankData.column1=e.data.slice(0,e.data.length/2),n.worldBankData.column2=e.data.slice(e.data.length/2,e.data.length)},function(e){n.data="There was an error, try again later!"})};o();var r=encodeURI(n.countryName),i=function(){a.get("/externalAPIs/mediWiki/"+r).then(function(e){n.flagUrl=e.data},function(e){n.data="There was an error, try again later!"})};i()}]),app.factory("authInterceptor",["$q","$location","authService",function(e,t,n){return{request:function(e){return e.headers=e.headers||{},n.isAuthed()&&(e.headers.Authorization="Bearer "+n.getToken()),e},response:function(a){return t.search().access_token&&(n.saveToken(t.search().access_token),t.search("access_token",void 0),t.path("/")),401===a.status&&t.path("/login"),a||e.when(a)},responseError:function(n){return 401===n.status&&t.path("/login"),e.reject(n)}}}]),app.factory("questionnaire",function(){return{questions:[{question:"What language(s) do you speak?",type:"list",answerOptions:["Adyghe","Albanian","Aragonese","Armenian","Aromanian","Arpitan","Asturian","Avar","Azerbaijani","Bashkir","Basque","Belarusian","Bosnian","Breton","Bulgarian","Catalan","Chechen","Chuvash","Cornish","Corsican","Crimean","Croatian","Czech","Danish","Dutch","English","Erzya","Estonian","Faroese","Finnish","French","Frisian","Gagauz","Galician","Gallo","Georgian","German","Greek","Hungarian","Icelandic","Ingrian","Irish","Italian","Kabardian","Kashubian","Kazakh","Ladin","Latin","Latvian","Laz","Lithuanian","Luxembourgish","Macedonian","Maltese","Manx","Mari","Mingrelian","Mirandese","Montenegrin","Norwegian","Occitan","Ossetian","Picard","Polish","Portuguese","Romani","Romanian","Romansh","Russian","Sami","Sardinian","Scots","Scottish","Gaelic","Serbian","Silesian","Slovak","Slovene","Sorbian","Spanish","Svan","Swedish","Tabasaran","Tatar","Turkish","Ukrainian","Vepsian","VÃµro","Walloon","Welsh","Wymysorys"]},{question:"What field do you work in?",type:"list",answerOptions:["Agriculture","Industry","Services"]},{question:"What climate would you prefer?",type:"list",answerOptions:["Temperate","Mediterranean","Tropical","Arid","Desert","Maritime","Wet"]},{question:"What is the ideal size for the largest metropolitan area?",type:"list",answerOptions:["Small (<100,000)","Medium (100,000-1 million)","Large (>1 million)"]},{question:"Would you like the population distribution to be mostly urban?",type:"boolean"},{question:"What would your ideal median age range be?",type:"list",answerOptions:["20-30yrs","30-40yrs","40+years"]},{question:"What cost of living should your destination have?",type:"list",answerOptions:["High","Average","Low"]},{question:"What percentage of the population should be internet users?",type:"list",answerOptions:["<25%","25%-50%","50%-75%",">75%"]}],determineRecommendations:function(e,t){function n(e,t,n){if(n>=e&&t>=n)return 10;var a=Math.abs(n-e)>Math.abs(n-t)?t:e,o=n>a?.5:1.5,r=20*(1-Math.min(1,Math.abs(n-o*a)/a));return r}return countries=[],t.forEach(function(t,a){var o,r,i,s=0,u=t.labor[e.question2]||0,l=u/7.5>10?10:u/10;i="array"==typeof e.question3?new RegExp(e.question3.join("|"),"i"):new RegExp(e.question3,"i");var c=null!=t.climate.match(i)?10:0,p=e.question4;switch(p){case"Small (<100,000)":r=0,o=1e5;break;case"Medium (100,000-1 million)":r=1e5,o=1e6;break;case"Large (>1 million)":r=1e6,o=1e20}var h,m=n(r,o,t.largestCityPop)||0,g=e.question5;h=g?t.urbanPopulation>50?10:10*t.urbanPopulation/50:t.urbanPopulation<50?10:500/t.urbanPopulation;var d=e.question6;switch(d){case"20-30yrs":r=0,o=30;break;case"30-40yrs":r=30,o=40;break;case"40+years":r=40,o=150}var f=n(r,o,t.medianAge),y=e.question7;switch(y){case"High":r=6e4,o=1e10;break;case"Average":r=3e4,o=6e4;break;case"Low":r=0,o=3e4}var w=n(r,o,t.perCapitaPPP),v=e.question8;switch(v){case"<25%":r=0,o=25;break;case"25%-50%":r=25,o=50;break;case"50%-75%":r=50,o=75;break;default:r=75,o=100}var b=n(r,o,t.internetUsagePerCapita);s=s+l+c+m+h+w+f+b,t.score=s,countries.push(t)}),countries.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:e.countryName>t.countryName?1:e.countryName<t.countryName?-1:0}),countries.slice(0,4)}}}),app.factory("countryPage",function(){return{}}),app.factory("userRecommendations",function(){return{}}),app.factory("sharedService",["$rootScope",function(e){var t={};return t.values={},t.worldBankDataUpdate=function(){e.$broadcast("update")},t}]),app.controller("helpController",["$scope",function(e){e.message="I'm a help page that currently doesn't help at all"}]),app.controller("homeController",["authService","countryPage","questionnaire","userRecommendations","$http","$rootScope","$scope","$location",function(e,t,n,a,o,r,i,s){if(r.user=e.getUser(),r.user&&r.user.username)o.get("/api/questionnaire/"+r.user.username).then(function(e){"object"==typeof e.data?o.post("/api/worldFactbook",{languageOption:!0,language:e.data.question1}).then(function(t){i.recommendations=n.determineRecommendations(e.data,t.data),a.countries=i.recommendations}):s.path("/questionnaire")});else{var u=[{question:"Have you been here before?",route:"login"},{question:"Would you like to sign up?",route:"signUp"},{question:"Okay, you won't be able to do much..."}];i.question=u[0].question;var l=0;i.showButtons=!0,i.getQuestion=function(e){var t=(u[l].question,u[l].route);e?s.path(t):(l++,i.question=u[l].question,l==u.length-1&&(i.showButtons=!1))}}i.setCountryPage=function(e){t.name=e.countryName,t.abbreviation=e.abbreviation,t.largestCityName=e.largestCityName?e.largestCityName:"No Information",t.largestCityPop=e.largestCityPop?e.largestCityPop:"No Information",t.majorityLanguage=e.majorityLanguage,t.medianAge=e.medianAge,s.path("/country")}}]),app.controller("loginController",["$mdToast","$scope","$http","authService","$location","$rootScope",function(e,t,n,a,o,r){t.signIn=function(){var e={username:t.form.userName,password:t.form.password};n.post("api/login",e).then(function(e){a.saveToken(e.data),r.user=a.getUser(),o.path("/")},function(e){t.errorToast(e.data.error)})},t.errorToast=function(t){e.show(e.simple().content(t).hideDelay(3e3))}}]),app.controller("navCtrl",["userRecommendations","authService","$scope","$rootScope","$location","$http",function(e,t,n,a,o,r){a.user=t.getUser(),a.user&&a.user.username&&o.path("/"),n.logout=function(){r.get("/api/logout").then(function(e){}),t.logout(),a.user=t.getUser(),e={},o.path("/home")}}]),app.controller("questionnaireController",["countryPage","userRecommendations","questionnaire","$rootScope","$scope","$location","$http",function(e,t,n,a,o,r,i){function s(){return o.list.map(function(e){return{value:e.toLowerCase(),display:e}})}function u(e){var t=angular.lowercase(e);return function(e){return 0===e.value.indexOf(t)}}a.user.username||r.path("/");var l=n.questions,c={},p={};o.questionNum=0,o.data={},o.data={},o.answers=[],o.querySearch=function(e){return e?o.list.filter(u(e)):o.list},o.pushAnswer=function(e){e&&(o.answers.push(e),o.data.showAnswers=!0,o.searchText="")},a.user.username&&i.get("/api/questionnaire/"+a.user.username).then(function(e){"object"==typeof e.data?i.post("/api/worldFactbook",{languageOption:!0,language:e.data.question1}).then(function(a){o.recommendations=n.determineRecommendations(e.data,a.data),t.countries=o.recommendations}):(o.getQuestion(),o.list=s())}),o.getQuestion=function(){o.data.showAnswers=!1,o.questionNum==l.length?(o.question="Your list is being generated!",p.username=a.user.username,p.questionResponses=c,i.post("/api/questionnaire",p),i.post("/api/worldFactbook",{languageOption:!0,language:c.question1}).then(function(e){o.recommendations=n.determineRecommendations(c,e.data),t.countries=o.recommendations,r.path("/")}),o.type=""):(o.question=l[o.questionNum].question,o.type=l[o.questionNum].type,"list"==o.type&&(o.list=l[o.questionNum].answerOptions))},o.logAnswer=function(e){o.data.showAnswers=!1,o.questionNum++,e.constructor===Array&&(e=e.join(" ")),c["question"+o.questionNum]=e,o.answers=[],o.searchText=""},o.addCountry=function(){i.post("/api/userCountries",{username:a.user.username,userCountries:["france","germany","spain"]}).then(function(e){o.userCountries=e.userCountries})},o.deleteQuestionnaire=function(){i["delete"]("api/questionnaire/"+a.user.username).then(function(e){t={},o.recommendations=!1,o.questionNum=0,o.getQuestion(),o.list=s()})}}]),app.service("authService",["$window",function(e){this.parseJwt=function(t){if(t){var n=t.split(".")[1],a=n.replace("-","+").replace("_","/");return JSON.parse(e.atob(a))}return{}},this.saveToken=function(t){e.localStorage.jwtToken=t},this.getToken=function(){return e.localStorage.jwtToken},this.isAuthed=function(){var e=this.getToken();if(e){var t=this.parseJwt(e),n=Math.round((new Date).getTime()/1e3)<=t.exp;return n||this.logout(),n}return!1},this.logout=function(){delete e.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("signUpController",["$mdToast","$location","$scope","$http",function(e,t,n,a){n.register=function(){var e={username:n.form.userName,email:n.form.email,password:n.form.password,lastName:n.form.lastName,firstName:n.form.firstName,passwordConfirm:n.form.passwordConfirm};a.post("/api/register",e).then(function(e){t.path("/login")},function(e){n.errorToast(e.data.error)})},n.errorToast=function(t){e.show(e.simple().content(t).hideDelay(3e3))}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJhYm91dENvbnRyb2xsZXIuanMiLCJjb250YWN0Q29udHJvbGxlci5qcyIsImNvdW50cnlDb250cm9sbGVyLmpzIiwiZmFjdG9yaWVzLmpzIiwiaGVscENvbnRyb2xsZXIuanMiLCJob21lQ29udHJvbGxlci5qcyIsImxvZ2luQ29udHJvbGxlci5qcyIsIm5hdkNvbnRyb2xsZXIuanMiLCJxdWVzdGlvbm5haXJlQ29udHJvbGxlci5qcyIsInNlcnZpY2VzLmpzIiwic2lnblVwQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGh0dHBQcm92aWRlciIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJkZWZhdWx0cyIsInVzZVhEb21haW4iLCJoZWFkZXJzIiwiY29tbW9uIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiJHNjb3BlIiwic2hhcmVkU2VydmljZSIsImNvdW50cnlQYWdlIiwiJGh0dHAiLCJjb3VudHJ5TmFtZSIsIm5hbWUiLCJhYmJyZXZpYXRpb24iLCJsYXJnZXN0Q2l0eU5hbWUiLCJsYXJnZXN0Q2l0eVBvcCIsIm1ham9yaXR5TGFuZ3VhZ2UiLCJtZWRpYW5BZ2UiLCJ3b3JsZEJhbmtEYXRhIiwiZ2V0RGF0YSIsImdldCIsInRoZW4iLCJyZXNwb25zZSIsImNvbHVtbjEiLCJkYXRhIiwic2xpY2UiLCJsZW5ndGgiLCJjb2x1bW4yIiwibWVkaVdpa2lDb3VudHJ5TmFtZSIsImVuY29kZVVSSSIsImdldEZsYWciLCJmbGFnVXJsIiwiZmFjdG9yeSIsIiRxIiwiJGxvY2F0aW9uIiwiYXV0aFNlcnZpY2UiLCJyZXF1ZXN0IiwiaXNBdXRoZWQiLCJBdXRob3JpemF0aW9uIiwiZ2V0VG9rZW4iLCJzZWFyY2giLCJhY2Nlc3NfdG9rZW4iLCJzYXZlVG9rZW4iLCJ1bmRlZmluZWQiLCJwYXRoIiwic3RhdHVzIiwicmVzcG9uc2VFcnJvciIsInJlamVjdCIsInF1ZXN0aW9ucyIsInF1ZXN0aW9uIiwidHlwZSIsImFuc3dlck9wdGlvbnMiLCJkZXRlcm1pbmVSZWNvbW1lbmRhdGlvbnMiLCJxdWVzdGlvbm5haXJlQW5zd2VycyIsImNvdW50cmllc1RvU2VhcmNoIiwiZ2V0UHJvcG9ydGlvbmFsU2NvcmUiLCJsb3dlckxpbWl0IiwidXBwZXJMaW1pdCIsInZhbHVlIiwibGltaXQiLCJNYXRoIiwiYWJzIiwibXVsdGlwbGllciIsInNjb3JlIiwibWluIiwiY291bnRyaWVzIiwiZm9yRWFjaCIsImNvdW50cnkiLCJpbmRleCIsImNsaW1hdGVTdHJpbmciLCJsYWJvclBlcmNlbnQiLCJsYWJvciIsInF1ZXN0aW9uMiIsImxhYm9yU2NvcmUiLCJxdWVzdGlvbjMiLCJSZWdFeHAiLCJqb2luIiwiY2xpbWF0ZVNjb3JlIiwiY2xpbWF0ZSIsIm1hdGNoIiwidXNlckxhcmdlc3RDaXR5UG9wIiwicXVlc3Rpb240IiwidXJiYW5Qb3B1bGF0aW9uU2NvcmUiLCJsYXJnZXN0Q2l0eVBvcFNjb3JlIiwidXNlclVyYmFuUG9wdWxhdGlvbiIsInF1ZXN0aW9uNSIsInVyYmFuUG9wdWxhdGlvbiIsInVzZXJNZWRpYW5BZ2UiLCJxdWVzdGlvbjYiLCJtZWRpYW5BZ2VTY29yZSIsInVzZXJQZXJDYXBpdGFQUFAiLCJxdWVzdGlvbjciLCJwZXJDYXBpdGFQUFBTY29yZSIsInBlckNhcGl0YVBQUCIsInVzZXJJbnRlcm5ldFVzYWdlUGVyQ2FwaXRhIiwicXVlc3Rpb244IiwiaW50ZXJuZXRVc2FnZVNjb3JlIiwiaW50ZXJuZXRVc2FnZVBlckNhcGl0YSIsInNvcnQiLCJhIiwiYiIsIiRyb290U2NvcGUiLCJteVNoYXJlZFNlcnZpY2UiLCJ2YWx1ZXMiLCJ3b3JsZEJhbmtEYXRhVXBkYXRlIiwiJGJyb2FkY2FzdCIsIm1lc3NhZ2UiLCJxdWVzdGlvbm5haXJlIiwidXNlclJlY29tbWVuZGF0aW9ucyIsInVzZXIiLCJnZXRVc2VyIiwidXNlcm5hbWUiLCJ1c2VyQW5zd2VycyIsInBvc3QiLCJsYW5ndWFnZU9wdGlvbiIsImxhbmd1YWdlIiwicXVlc3Rpb24xIiwicmVjb21tZW5kYXRpb25zIiwiaW50cm9RdWVzdGlvbnMiLCJyb3V0ZSIsInF1ZXN0aW9uTnVtIiwic2hvd0J1dHRvbnMiLCJnZXRRdWVzdGlvbiIsImFuc3dlciIsInNldENvdW50cnlQYWdlIiwiJG1kVG9hc3QiLCJzaWduSW4iLCJmb3JtIiwidXNlck5hbWUiLCJwYXNzd29yZCIsImVycm9yVG9hc3QiLCJlcnJvciIsInNob3ciLCJzaW1wbGUiLCJjb250ZW50IiwiaGlkZURlbGF5IiwibG9nb3V0IiwibG9hZEFsbCIsImxpc3QiLCJtYXAiLCJpdGVtIiwidG9Mb3dlckNhc2UiLCJkaXNwbGF5IiwiY3JlYXRlRmlsdGVyRm9yIiwicXVlcnkiLCJsb3dlcmNhc2VRdWVyeSIsImxvd2VyY2FzZSIsImluZGV4T2YiLCJxdWVzdGlvblJlc3BvbnNlcyIsInVzZXJRdWVzdGlvbm5haXJlIiwiYW5zd2VycyIsInF1ZXJ5U2VhcmNoIiwiZmlsdGVyIiwicHVzaEFuc3dlciIsInNob3dBbnN3ZXJzIiwic2VhcmNoVGV4dCIsImxvZ0Fuc3dlciIsImNvbnN0cnVjdG9yIiwiQXJyYXkiLCJhZGRDb3VudHJ5IiwidXNlckNvdW50cmllcyIsImRlbGV0ZVF1ZXN0aW9ubmFpcmUiLCJzZXJ2aWNlIiwiJHdpbmRvdyIsInRoaXMiLCJwYXJzZUp3dCIsInRva2VuIiwiYmFzZTY0VXJsIiwic3BsaXQiLCJiYXNlNjQiLCJyZXBsYWNlIiwiSlNPTiIsInBhcnNlIiwiYXRvYiIsImxvY2FsU3RvcmFnZSIsImp3dFRva2VuIiwicGFyYW1zIiwibm90RXhwaXJlZCIsInJvdW5kIiwiRGF0ZSIsImdldFRpbWUiLCJleHAiLCJyZWdpc3RlciIsIm5ld1VzZXIiLCJlbWFpbCIsImxhc3ROYW1lIiwiZmlyc3ROYW1lIiwicGFzc3dvcmRDb25maXJtIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLFdBQUEsVUFBQSxhQUFBLGFBQUEsb0JBRUFGLEtBQUFHLFFBQUEsZ0JBQUEsaUJBQUEsb0JBQUEscUJBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FFQUQsRUFBQUUsV0FBQSxHQUVBSixFQUFBSyxTQUFBQyxZQUFBLFFBQ0FOLEdBQUFLLFNBQUFFLFFBQUFDLE9BQUEsb0JBRUFSLEVBQUFTLGFBQUFDLEtBQUEsbUJBRUFQLEVBQ0FRLE1BQUEsV0FDQUMsZUFBQSxhQUNBQyxjQUFBLFFBQ0FDLFlBQUEsT0FDQUMsa0JBQUEsYUFFQWQsRUFBQWUsS0FBQSxLQUVBQyxZQUFBLG1CQUNBQyxXQUFBLG1CQUNBRixLQUFBLFVBRUFDLFlBQUEsb0JBQ0FDLFdBQUEsb0JBQ0FGLEtBQUEsWUFFQUMsWUFBQSxzQkFDQUMsV0FBQSxzQkFDQUYsS0FBQSxVQUVBQyxZQUFBLG9CQUNBQyxXQUFBLG9CQUNBRixLQUFBLFdBRUFDLFlBQUEscUJBQ0FDLFdBQUEscUJBQ0FGLEtBQUEsa0JBRUFDLFlBQUEsNEJBQ0FDLFdBQUEsNEJBQ0FGLEtBQUEsU0FFQUMsWUFBQSxtQkFDQUMsV0FBQSxtQkFDQUYsS0FBQSxZQUVBQyxZQUFBLHNCQUNBQyxXQUFBLHNCQUNBQyxXQUNBQyxXQUFBLFNDbkRBeEIsSUFBQXNCLFdBQUEsbUJBQUEsU0FBQSxTQUFBRyxPQ0FBekIsSUFBQXNCLFdBQUEscUJBQUEsU0FBQSxTQUFBRyxPQ0FBekIsSUFBQXNCLFdBQUEscUJBQUEsZ0JBQUEsY0FBQSxTQUFBLFFBQUEsU0FBQUksRUFBQUMsRUFBQUYsRUFBQUcsR0FDQUgsRUFBQUksWUFBQUYsRUFBQUcsS0FDQUwsRUFBQU0sYUFBQUosRUFBQUksYUFDQU4sRUFBQU8sZ0JB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LFVBQUFuTCxFQUFBd0gsS0FBQTJELFVBQ0FDLGdCQUFBcEwsRUFBQXdILEtBQUE0RCxnQkFFQWpMLEdBQUF1RyxLQUFBLGdCQUFBc0UsR0FDQWxLLEtBQUEsU0FBQUMsR0FDQVksRUFBQVUsS0FBQSxXQUNBLFNBQUF0QixHQUNBZixFQUFBMkgsV0FBQTVHLEVBQUFFLEtBQUEyRyxVQUlBNUgsRUFBQTJILFdBQUEsU0FBQXhCLEdBQ0FtQixFQUFBTyxLQUNBUCxFQUFBUSxTQUNBQyxRQUFBNUIsR0FDQTZCLFVBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnTmV4dFBhdCcsIFsnbmdSb3V0ZScsJ25nTWF0ZXJpYWwnLCduZ01lc3NhZ2VzJywndmFsaWRhdGlvbi5tYXRjaCddKTtcblxuYXBwLmNvbmZpZyhbJyRodHRwUHJvdmlkZXInLCckcm91dGVQcm92aWRlcicsJyRsb2NhdGlvblByb3ZpZGVyJywnJG1kVGhlbWluZ1Byb3ZpZGVyJywgZnVuY3Rpb24oJGh0dHBQcm92aWRlciwkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsJG1kVGhlbWluZ1Byb3ZpZGVyKXtcblxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMudXNlWERvbWFpbiA9IHRydWU7XG4gICAgZGVsZXRlICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtUmVxdWVzdGVkLVdpdGgnXTtcblxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xuXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyXG4gICAgICAgIC50aGVtZSgnZGVmYXVsdCcpXG4gICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnYmx1ZS1ncmV5JylcbiAgICAgICAgLmFjY2VudFBhbGV0dGUoJ2dyZXknKVxuICAgICAgICAud2FyblBhbGV0dGUoJ3JlZCcpXG4gICAgICAgIC5iYWNrZ3JvdW5kUGFsZXR0ZSgnYmx1ZS1ncmV5Jyk7XG5cbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvaG9tZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdob21lQ29udHJvbGxlcidcbiAgICAgICAgfSkud2hlbignL2Fib3V0JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvYWJvdXQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnYWJvdXRDb250cm9sbGVyJ1xuICAgICAgICB9KS53aGVuKCcvY29udGFjdCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2NvbnRhY3QuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY29udGFjdENvbnRyb2xsZXInXG4gICAgICAgIH0pLndoZW4oJy9sb2dpbicsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2xvZ2luLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcidcbiAgICAgICAgfSkud2hlbignL3NpZ25VcCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3NpZ25VcC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzaWduVXBDb250cm9sbGVyJ1xuICAgICAgICB9KS53aGVuKCcvcXVlc3Rpb25uYWlyZScsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3F1ZXN0aW9ubmFpcmUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAncXVlc3Rpb25uYWlyZUNvbnRyb2xsZXInXG4gICAgICAgIH0pLndoZW4oJy9oZWxwJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvaGVscC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdoZWxwQ29udHJvbGxlcidcbiAgICAgICAgfSkud2hlbignL2NvdW50cnknLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9jb3VudHJ5Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2NvdW50cnlDb250cm9sbGVyJ1xuICAgICAgICB9KS5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgICAgIH0pO1xufV0pOyIsImFwcC5jb250cm9sbGVyKCdhYm91dENvbnRyb2xsZXInLCBbJyRzY29wZScsZnVuY3Rpb24oJHNjb3BlKXtcbn1dKTsiLCJhcHAuY29udHJvbGxlcignY29udGFjdENvbnRyb2xsZXInLFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcbn1dKTsiLCJhcHAuY29udHJvbGxlcignY291bnRyeUNvbnRyb2xsZXInLCBbJ3NoYXJlZFNlcnZpY2UnLCdjb3VudHJ5UGFnZScsJyRzY29wZScsJyRodHRwJywgZnVuY3Rpb24oc2hhcmVkU2VydmljZSxjb3VudHJ5UGFnZSwkc2NvcGUsJGh0dHApe1xuICAgICRzY29wZS5jb3VudHJ5TmFtZSA9IGNvdW50cnlQYWdlLm5hbWU7XG4gICAgJHNjb3BlLmFiYnJldmlhdGlvbiA9IGNvdW50cnlQYWdlLmFiYnJldmlhdGlvbjtcbiAgICAkc2NvcGUubGFyZ2VzdENpdHlOYW1lID0gY291bnRyeVBhZ2UubGFyZ2VzdENpdHlOYW1lO1xuICAgICRzY29wZS5sYXJnZXN0Q2l0eVBvcCA9IGNvdW50cnlQYWdlLmxhcmdlc3RDaXR5UG9wO1xuICAgICRzY29wZS5tYWpvcml0eUxhbmd1YWdlID0gY291bnRyeVBhZ2UubWFqb3JpdHlMYW5ndWFnZTtcbiAgICAkc2NvcGUubWVkaWFuQWdlID0gY291bnRyeVBhZ2UubWVkaWFuQWdlO1xuICAgICRzY29wZS53b3JsZEJhbmtEYXRhID0ge307XG5cbiAgICB2YXIgZ2V0RGF0YSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRodHRwLmdldCgnL2V4dGVybmFsQVBJcy93b3JsZEJhbmtEYXRhLycrJHNjb3BlLmFiYnJldmlhdGlvbilcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUud29ybGRCYW5rRGF0YS5jb2x1bW4xID0gcmVzcG9uc2UuZGF0YS5zbGljZSgwLHJlc3BvbnNlLmRhdGEubGVuZ3RoLzIpO1xuICAgICAgICAgICAgICAgICRzY29wZS53b3JsZEJhbmtEYXRhLmNvbHVtbjIgPSByZXNwb25zZS5kYXRhLnNsaWNlKHJlc3BvbnNlLmRhdGEubGVuZ3RoLzIscmVzcG9uc2UuZGF0YS5sZW5ndGgpO1xuXG4gICAgICAgICAgICB9LGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhID0gXCJUaGVyZSB3YXMgYW4gZXJyb3IsIHRyeSBhZ2FpbiBsYXRlciFcIjtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBnZXREYXRhKCk7XG5cbiAgICB2YXIgbWVkaVdpa2lDb3VudHJ5TmFtZSA9IGVuY29kZVVSSSgkc2NvcGUuY291bnRyeU5hbWUpO1xuXG4gICAgdmFyIGdldEZsYWcgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5nZXQoJy9leHRlcm5hbEFQSXMvbWVkaVdpa2kvJysgbWVkaVdpa2lDb3VudHJ5TmFtZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmxhZ1VybCA9IHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0sZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSBcIlRoZXJlIHdhcyBhbiBlcnJvciwgdHJ5IGFnYWluIGxhdGVyIVwiO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGdldEZsYWcoKTtcblxufV0pO1xuIiwiYXBwLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgJ2F1dGhTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24sIGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChhdXRoU2VydmljZS5pc0F1dGhlZCgpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGF1dGhTZXJ2aWNlLmdldFRva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZigkbG9jYXRpb24uc2VhcmNoKCkuYWNjZXNzX3Rva2VuKXtcbiAgICAgICAgICAgICAgICBhdXRoU2VydmljZS5zYXZlVG9rZW4oJGxvY2F0aW9uLnNlYXJjaCgpLmFjY2Vzc190b2tlbik7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnYWNjZXNzX3Rva2VuJywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG5cbmFwcC5mYWN0b3J5KCdxdWVzdGlvbm5haXJlJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHF1ZXN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiBcIldoYXQgbGFuZ3VhZ2UocykgZG8geW91IHNwZWFrP1wiLCB0eXBlOiAnbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWydBZHlnaGUnLCAnQWxiYW5pYW4nLCAnQXJhZ29uZXNlJywgJ0FybWVuaWFuJywgJ0Fyb21hbmlhbicsICdBcnBpdGFuJywgJ0FzdHVyaWFuJywgJ0F2YXInLCAnQXplcmJhaWphbmknLCAnQmFzaGtpcicsICdCYXNxdWUnLCAnQmVsYXJ1c2lhbicsICdCb3NuaWFuJywgJ0JyZXRvbicsICdCdWxnYXJpYW4nLCAnQ2F0YWxhbicsICdDaGVjaGVuJywgJ0NodXZhc2gnLCAnQ29ybmlzaCcsICdDb3JzaWNhbicsICdDcmltZWFuJywgJ0Nyb2F0aWFuJywgJ0N6ZWNoJywgJ0RhbmlzaCcsICdEdXRjaCcsICdFbmdsaXNoJywgJ0VyenlhJywgJ0VzdG9uaWFuJywgJ0Zhcm9lc2UnLCAnRmlubmlzaCcsICdGcmVuY2gnLCAnRnJpc2lhbicsICdHYWdhdXonLCAnR2FsaWNpYW4nLCAnR2FsbG8nLCAnR2VvcmdpYW4nLCAnR2VybWFuJywgJ0dyZWVrJywgJ0h1bmdhcmlhbicsICdJY2VsYW5kaWMnLCAnSW5ncmlhbicsICdJcmlzaCcsICdJdGFsaWFuJywgJ0thYmFyZGlhbicsICdLYXNodWJpYW4nLCAnS2F6YWtoJywgJ0xhZGluJywgJ0xhdGluJywgJ0xhdHZpYW4nLCAnTGF6JywgJ0xpdGh1YW5pYW4nLCAnTHV4ZW1ib3VyZ2lzaCcsICdNYWNlZG9uaWFuJywgJ01hbHRlc2UnLCAnTWFueCcsICdNYXJpJywgJ01pbmdyZWxpYW4nLCAnTWlyYW5kZXNlJywgJ01vbnRlbmVncmluJywgJ05vcndlZ2lhbicsICdPY2NpdGFuJywgJ09zc2V0aWFuJywgJ1BpY2FyZCcsICdQb2xpc2gnLCAnUG9ydHVndWVzZScsICdSb21hbmknLCAnUm9tYW5pYW4nLCAnUm9tYW5zaCcsICdSdXNzaWFuJywgJ1NhbWknLCAnU2FyZGluaWFuJywgJ1Njb3RzJywgJ1Njb3R0aXNoJywnR2FlbGljJywgJ1NlcmJpYW4nLCAnU2lsZXNpYW4nLCAnU2xvdmFrJywgJ1Nsb3ZlbmUnLCAnU29yYmlhbicsICdTcGFuaXNoJywgJ1N2YW4nLCAnU3dlZGlzaCcsICdUYWJhc2FyYW4nLCAnVGF0YXInLCAnVHVya2lzaCcsICdVa3JhaW5pYW4nLCAnVmVwc2lhbicsICdWw7VybycsICdXYWxsb29uJywgJ1dlbHNoJywgJ1d5bXlzb3J5cyddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBmaWVsZCBkbyB5b3Ugd29yayBpbj8nLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdsaXN0JyxcbiAgICAgICAgICAgICAgICBhbnN3ZXJPcHRpb25zOiBbJ0FncmljdWx0dXJlJywgJ0luZHVzdHJ5JywgJ1NlcnZpY2VzJ11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcXVlc3Rpb246ICdXaGF0IGNsaW1hdGUgd291bGQgeW91IHByZWZlcj8nLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdsaXN0JyxcbiAgICAgICAgICAgICAgICBhbnN3ZXJPcHRpb25zOiBbJ1RlbXBlcmF0ZScsICdNZWRpdGVycmFuZWFuJywgJ1Ryb3BpY2FsJywgJ0FyaWQnLCAnRGVzZXJ0JywgJ01hcml0aW1lJywgJ1dldCddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBpcyB0aGUgaWRlYWwgc2l6ZSBmb3IgdGhlIGxhcmdlc3QgbWV0cm9wb2xpdGFuIGFyZWE/JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWydTbWFsbCAoPDEwMCwwMDApJywgJ01lZGl1bSAoMTAwLDAwMC0xIG1pbGxpb24pJywgJ0xhcmdlICg+MSBtaWxsaW9uKSddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV291bGQgeW91IGxpa2UgdGhlIHBvcHVsYXRpb24gZGlzdHJpYnV0aW9uIHRvIGJlIG1vc3RseSB1cmJhbj8nLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogJ1doYXQgd291bGQgeW91ciBpZGVhbCBtZWRpYW4gYWdlIHJhbmdlIGJlPycsIHR5cGU6ICdsaXN0JyxcbiAgICAgICAgICAgICAgICBhbnN3ZXJPcHRpb25zOiBbJzIwLTMweXJzJywgJzMwLTQweXJzJywgJzQwK3llYXJzJ11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcXVlc3Rpb246ICdXaGF0IGNvc3Qgb2YgbGl2aW5nIHNob3VsZCB5b3VyIGRlc3RpbmF0aW9uIGhhdmU/JywgdHlwZTonbGlzdCcsXG4gICAgICAgICAgICAgICAgYW5zd2VyT3B0aW9uczogWydIaWdoJywnQXZlcmFnZScsJ0xvdyddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBwZXJjZW50YWdlIG9mIHRoZSBwb3B1bGF0aW9uIHNob3VsZCBiZSBpbnRlcm5ldCB1c2Vycz8nLCB0eXBlOidsaXN0JyxcbiAgICAgICAgICAgICAgICBhbnN3ZXJPcHRpb25zOiBbJzwyNSUnLCcyNSUtNTAlJywnNTAlLTc1JScsJz43NSUnXVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBkZXRlcm1pbmVSZWNvbW1lbmRhdGlvbnM6IGZ1bmN0aW9uKHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLGNvdW50cmllc1RvU2VhcmNoKXtcblxuICAgICAgICAgICAgY291bnRyaWVzID0gW107XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFByb3BvcnRpb25hbFNjb3JlKGxvd2VyTGltaXQsdXBwZXJMaW1pdCx2YWx1ZSl7XG5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPj0gbG93ZXJMaW1pdCAmJiB2YWx1ZSA8PSB1cHBlckxpbWl0KXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEwO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGltaXQgPSBNYXRoLmFicyh2YWx1ZS1sb3dlckxpbWl0KSA+IE1hdGguYWJzKHZhbHVlLXVwcGVyTGltaXQpID8gdXBwZXJMaW1pdCA6IGxvd2VyTGltaXQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsaWVyID0gdmFsdWUgPiBsaW1pdCA/IDAuNSA6IDEuNTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gMjAqKDEgLSBNYXRoLm1pbigxLE1hdGguYWJzKHZhbHVlIC0gbXVsdGlwbGllcipsaW1pdCkvbGltaXQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjb3JlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY291bnRyaWVzVG9TZWFyY2guZm9yRWFjaChmdW5jdGlvbihjb3VudHJ5LGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gMCwgdXBwZXJMaW1pdCwgbG93ZXJMaW1pdCwgY2xpbWF0ZVN0cmluZztcbiAgICAgICAgICAgICAgICB2YXIgbGFib3JQZXJjZW50ID0gY291bnRyeS5sYWJvcltxdWVzdGlvbm5haXJlQW5zd2Vycy5xdWVzdGlvbjJdIHx8IDA7XG4gICAgICAgICAgICAgICAgLy9pZiB1c2VyJ3Mgc3BlY2lmaWVkIGluZHVzdHJ5IGlzIG1vcmUgdGhhbiA3NSUgb2YgdGhlIGNvdW50cnkncyB3b3JrZm9yY2UsIHNldCBzY29yZSB0byAxMFxuICAgICAgICAgICAgICAgIHZhciBsYWJvclNjb3JlID0gbGFib3JQZXJjZW50LzcuNSA+IDEwID8gMTAgOiBsYWJvclBlcmNlbnQvMTA7XG4gICAgICAgICAgICAgICAgLy9jcmVhdGUgUmVndWxhciBFeHByZXNzaW9uIHRvIGNoZWNrIGNsaW1hdGUgc3RyaW5nIGZvciBjbGltYXRlIGFuc3dlcnNcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uMyA9PSAnYXJyYXknKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsaW1hdGVTdHJpbmcgPSBuZXcgUmVnRXhwKHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uMy5qb2luKCd8JyksJ2knKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY2xpbWF0ZVN0cmluZyA9IG5ldyBSZWdFeHAocXVlc3Rpb25uYWlyZUFuc3dlcnMucXVlc3Rpb24zLCdpJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vaWYgY2xpbWF0ZSBzdHJpbmcgY29udGFpbnMgb25lIG9mIHRoZSBjbGltYXRlIGFuc3dlcnMsIHNldCBzY29yZSB0byAxMFxuICAgICAgICAgICAgICAgIHZhciBjbGltYXRlU2NvcmUgPSBjb3VudHJ5LmNsaW1hdGUubWF0Y2goY2xpbWF0ZVN0cmluZykgIT0gbnVsbCA/IDEwOiAwO1xuXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJMYXJnZXN0Q2l0eVBvcCA9IHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uNDtcbiAgICAgICAgICAgICAgICBzd2l0Y2godXNlckxhcmdlc3RDaXR5UG9wKXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU21hbGwgKDwxMDAsMDAwKSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAxRTU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTWVkaXVtICgxMDAsMDAwLTEgbWlsbGlvbiknOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDFFNTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAxRTY7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTGFyZ2UgKD4xIG1pbGxpb24pJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSAxRTY7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMUUyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsYXJnZXN0Q2l0eVBvcFNjb3JlID0gZ2V0UHJvcG9ydGlvbmFsU2NvcmUobG93ZXJMaW1pdCx1cHBlckxpbWl0LGNvdW50cnkubGFyZ2VzdENpdHlQb3ApIHx8IDA7XG5cbiAgICAgICAgICAgICAgICB2YXIgdXNlclVyYmFuUG9wdWxhdGlvbiA9IHF1ZXN0aW9ubmFpcmVBbnN3ZXJzLnF1ZXN0aW9uNTtcbiAgICAgICAgICAgICAgICB2YXIgdXJiYW5Qb3B1bGF0aW9uU2NvcmU7XG4gICAgICAgICAgICAgICAgaWYodXNlclVyYmFuUG9wdWxhdGlvbil7XG4gICAgICAgICAgICAgICAgICAgIHVyYmFuUG9wdWxhdGlvblNjb3JlID0gY291bnRyeS51cmJhblBvcHVsYXRpb24gPiA1MCA/IDEwIDogMTAqY291bnRyeS51cmJhblBvcHVsYXRpb24vNTA7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHVyYmFuUG9wdWxhdGlvblNjb3JlID0gY291bnRyeS51cmJhblBvcHVsYXRpb24gPCA1MCA/IDEwIDogMTAqNTAvY291bnRyeS51cmJhblBvcHVsYXRpb247XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJNZWRpYW5BZ2UgPSBxdWVzdGlvbm5haXJlQW5zd2Vycy5xdWVzdGlvbjY7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHVzZXJNZWRpYW5BZ2Upe1xuICAgICAgICAgICAgICAgICAgICBjYXNlICcyMC0zMHlycyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICczMC00MHlycyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMzA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gNDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnNDAreWVhcnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDQwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJMaW1pdCA9IDE1MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG1lZGlhbkFnZVNjb3JlID0gZ2V0UHJvcG9ydGlvbmFsU2NvcmUobG93ZXJMaW1pdCx1cHBlckxpbWl0LGNvdW50cnkubWVkaWFuQWdlKTtcblxuICAgICAgICAgICAgICAgIHZhciB1c2VyUGVyQ2FwaXRhUFBQID0gcXVlc3Rpb25uYWlyZUFuc3dlcnMucXVlc3Rpb243O1xuICAgICAgICAgICAgICAgIHN3aXRjaCh1c2VyUGVyQ2FwaXRhUFBQKXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSGlnaCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gNjAwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMUUxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdBdmVyYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSAzMDAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSA2MDAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdMb3cnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMzAwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGVyQ2FwaXRhUFBQU2NvcmUgPSBnZXRQcm9wb3J0aW9uYWxTY29yZShsb3dlckxpbWl0LHVwcGVyTGltaXQsY291bnRyeS5wZXJDYXBpdGFQUFApO1xuXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJJbnRlcm5ldFVzYWdlUGVyQ2FwaXRhID0gcXVlc3Rpb25uYWlyZUFuc3dlcnMucXVlc3Rpb244O1xuICAgICAgICAgICAgICAgIHN3aXRjaCh1c2VySW50ZXJuZXRVc2FnZVBlckNhcGl0YSl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzwyNSUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJMaW1pdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gMjU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnMjUlLTUwJSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gMjU7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gNTA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnNTAlLTc1JSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0ID0gNTA7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckxpbWl0ID0gNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyTGltaXQgPSA3NTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGltaXQgPSAxMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJuZXRVc2FnZVNjb3JlID0gZ2V0UHJvcG9ydGlvbmFsU2NvcmUobG93ZXJMaW1pdCx1cHBlckxpbWl0LGNvdW50cnkuaW50ZXJuZXRVc2FnZVBlckNhcGl0YSk7XG4gICAgICAgICAgICAgICAgc2NvcmUgPSBzY29yZSArIGxhYm9yU2NvcmUgKyBjbGltYXRlU2NvcmUgKyBsYXJnZXN0Q2l0eVBvcFNjb3JlICsgdXJiYW5Qb3B1bGF0aW9uU2NvcmUgKyBwZXJDYXBpdGFQUFBTY29yZSArIG1lZGlhbkFnZVNjb3JlICsgaW50ZXJuZXRVc2FnZVNjb3JlO1xuICAgICAgICAgICAgICAgIGNvdW50cnkuc2NvcmUgPSBzY29yZTtcbiAgICAgICAgICAgICAgICBjb3VudHJpZXMucHVzaChjb3VudHJ5KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb3VudHJpZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIGlmIChhLnNjb3JlID4gYi5zY29yZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhLnNjb3JlIDwgYi5zY29yZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoYS5jb3VudHJ5TmFtZSA+IGIuY291bnRyeU5hbWUpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoYS5jb3VudHJ5TmFtZSA8IGIuY291bnRyeU5hbWUpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBjb3VudHJpZXMuc2xpY2UoMCw0KTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuYXBwLmZhY3RvcnkoJ2NvdW50cnlQYWdlJyxmdW5jdGlvbigpe1xuICAgIHJldHVybiB7fTtcbn0pO1xuXG5hcHAuZmFjdG9yeSgndXNlclJlY29tbWVuZGF0aW9ucycsZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge307XG59KTtcblxuYXBwLmZhY3RvcnkoJ3NoYXJlZFNlcnZpY2UnLCBbJyRyb290U2NvcGUnLGZ1bmN0aW9uKCRyb290U2NvcGUpe1xuICAgIHZhciBteVNoYXJlZFNlcnZpY2UgPSB7fTtcblxuICAgIG15U2hhcmVkU2VydmljZS52YWx1ZXMgPSB7fTtcblxuICAgIG15U2hhcmVkU2VydmljZS53b3JsZEJhbmtEYXRhVXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd1cGRhdGUnKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG15U2hhcmVkU2VydmljZTtcbn1dKTtcbiIsImFwcC5jb250cm9sbGVyKCdoZWxwQ29udHJvbGxlcicsWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuICAgICRzY29wZS5tZXNzYWdlID0gXCJJJ20gYSBoZWxwIHBhZ2UgdGhhdCBjdXJyZW50bHkgZG9lc24ndCBoZWxwIGF0IGFsbFwiO1xufV0pOyIsImFwcC5jb250cm9sbGVyKCdob21lQ29udHJvbGxlcicsIFsnYXV0aFNlcnZpY2UnLCdjb3VudHJ5UGFnZScsJ3F1ZXN0aW9ubmFpcmUnLCd1c2VyUmVjb21tZW5kYXRpb25zJywnJGh0dHAnLCckcm9vdFNjb3BlJywnJHNjb3BlJywnJGxvY2F0aW9uJywgZnVuY3Rpb24oYXV0aFNlcnZpY2UsY291bnRyeVBhZ2UscXVlc3Rpb25uYWlyZSx1c2VyUmVjb21tZW5kYXRpb25zLCRodHRwLCRyb290U2NvcGUsJHNjb3BlLCRsb2NhdGlvbil7XG5cbiAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS9xdWVzdGlvbm5haXJlLycrJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKS5cbiAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24odXNlckFuc3dlcnMpe1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB1c2VyQW5zd2Vycy5kYXRhID09ICdvYmplY3QnKXtcbiAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS93b3JsZEZhY3Rib29rJyx7bGFuZ3VhZ2VPcHRpb246dHJ1ZSxsYW5ndWFnZTp1c2VyQW5zd2Vycy5kYXRhLnF1ZXN0aW9uMX0pLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihjb3VudHJpZXNUb1NlYXJjaCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlY29tbWVuZGF0aW9ucyA9IHF1ZXN0aW9ubmFpcmUuZGV0ZXJtaW5lUmVjb21tZW5kYXRpb25zKHVzZXJBbnN3ZXJzLmRhdGEsY291bnRyaWVzVG9TZWFyY2guZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclJlY29tbWVuZGF0aW9ucy5jb3VudHJpZXMgPSAkc2NvcGUucmVjb21tZW5kYXRpb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3F1ZXN0aW9ubmFpcmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgfSBlbHNle1xuICAgICAgICB2YXIgaW50cm9RdWVzdGlvbnMgPSBbe3F1ZXN0aW9uOiBcIkhhdmUgeW91IGJlZW4gaGVyZSBiZWZvcmU/XCIsIHJvdXRlOidsb2dpbid9LFxuICAgICAgICAgICAge3F1ZXN0aW9uOiBcIldvdWxkIHlvdSBsaWtlIHRvIHNpZ24gdXA/XCIsIHJvdXRlOiAnc2lnblVwJ30sXG4gICAgICAgICAgICB7cXVlc3Rpb246IFwiT2theSwgeW91IHdvbid0IGJlIGFibGUgdG8gZG8gbXVjaC4uLlwifV07XG4gICAgICAgICRzY29wZS5xdWVzdGlvbiA9IGludHJvUXVlc3Rpb25zWzBdLnF1ZXN0aW9uO1xuICAgICAgICB2YXIgcXVlc3Rpb25OdW0gPSAwO1xuICAgICAgICAkc2NvcGUuc2hvd0J1dHRvbnMgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuZ2V0UXVlc3Rpb24gPSBmdW5jdGlvbihhbnN3ZXIpIHtcbiAgICAgICAgICAgIHZhciBxdWVzdGlvblRleHQgPSBpbnRyb1F1ZXN0aW9uc1txdWVzdGlvbk51bV0ucXVlc3Rpb247XG4gICAgICAgICAgICB2YXIgcm91dGUgPSBpbnRyb1F1ZXN0aW9uc1txdWVzdGlvbk51bV0ucm91dGU7XG4gICAgICAgICAgICBpZiAoYW5zd2VyKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgocm91dGUpO1xuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAgIHF1ZXN0aW9uTnVtKys7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uID0gaW50cm9RdWVzdGlvbnNbcXVlc3Rpb25OdW1dLnF1ZXN0aW9uO1xuICAgICAgICAgICAgICAgIGlmKHF1ZXN0aW9uTnVtID09IGludHJvUXVlc3Rpb25zLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dCdXR0b25zID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgICRzY29wZS5zZXRDb3VudHJ5UGFnZSA9IGZ1bmN0aW9uKGNvdW50cnkpe1xuXG4gICAgICAgIGNvdW50cnlQYWdlLm5hbWUgPSBjb3VudHJ5LmNvdW50cnlOYW1lO1xuICAgICAgICBjb3VudHJ5UGFnZS5hYmJyZXZpYXRpb24gPSBjb3VudHJ5LmFiYnJldmlhdGlvbjtcbiAgICAgICAgY291bnRyeVBhZ2UubGFyZ2VzdENpdHlOYW1lID0gY291bnRyeS5sYXJnZXN0Q2l0eU5hbWUgPyBjb3VudHJ5Lmxhcmdlc3RDaXR5TmFtZSA6IFwiTm8gSW5mb3JtYXRpb25cIjtcbiAgICAgICAgY291bnRyeVBhZ2UubGFyZ2VzdENpdHlQb3AgPSBjb3VudHJ5Lmxhcmdlc3RDaXR5UG9wID8gY291bnRyeS5sYXJnZXN0Q2l0eVBvcCA6IFwiTm8gSW5mb3JtYXRpb25cIjtcbiAgICAgICAgY291bnRyeVBhZ2UubWFqb3JpdHlMYW5ndWFnZSA9IGNvdW50cnkubWFqb3JpdHlMYW5ndWFnZTtcbiAgICAgICAgY291bnRyeVBhZ2UubWVkaWFuQWdlID0gY291bnRyeS5tZWRpYW5BZ2U7XG4gICAgICAgIC8vY291bnRyeVBhZ2UgPSBjb3VudHJ5O1xuXG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvY291bnRyeScpO1xuXG5cbiAgICB9O1xuXG59XSk7XG4iLCJhcHAuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJywgWyckbWRUb2FzdCcsJyRzY29wZScsICckaHR0cCcsICdhdXRoU2VydmljZScsICckbG9jYXRpb24nLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRtZFRvYXN0LCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlLCAkbG9jYXRpb24sICRyb290U2NvcGUpe1xuICAgICRzY29wZS5zaWduSW4gPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgdXNlciA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiAkc2NvcGUuZm9ybS51c2VyTmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAkc2NvcGUuZm9ybS5wYXNzd29yZFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJ2FwaS9sb2dpbicsIHVzZXIpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBhdXRoU2VydmljZS5zYXZlVG9rZW4ocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JUb2FzdChyZXNwb25zZS5kYXRhLmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZXJyb3JUb2FzdCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQobWVzc2FnZSlcbiAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICk7XG4gICAgfTtcblxufV0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ25hdkN0cmwnLCBbJ3VzZXJSZWNvbW1lbmRhdGlvbnMnLCdhdXRoU2VydmljZScsJyRzY29wZScsJyRyb290U2NvcGUnLCckbG9jYXRpb24nLCckaHR0cCcsIGZ1bmN0aW9uKHVzZXJSZWNvbW1lbmRhdGlvbnMsYXV0aFNlcnZpY2UsICRzY29wZSwkcm9vdFNjb3BlLCAkbG9jYXRpb24sJGh0dHApe1xuICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcblxuICAgIGlmKCRyb290U2NvcGUudXNlciAmJiAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgIH1cblxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvbG9nb3V0JykuXG4gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICB1c2VyUmVjb21tZW5kYXRpb25zID0ge307XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2hvbWVcIik7XG4gICAgfVxufV0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ3F1ZXN0aW9ubmFpcmVDb250cm9sbGVyJyxbJ2NvdW50cnlQYWdlJywndXNlclJlY29tbWVuZGF0aW9ucycsJ3F1ZXN0aW9ubmFpcmUnLCckcm9vdFNjb3BlJywnJHNjb3BlJywnJGxvY2F0aW9uJywgJyRodHRwJyxmdW5jdGlvbihjb3VudHJ5UGFnZSx1c2VyUmVjb21tZW5kYXRpb25zLHF1ZXN0aW9ubmFpcmUsJHJvb3RTY29wZSwkc2NvcGUsJGxvY2F0aW9uLCRodHRwKXtcblxuICAgIGlmKCEkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgIH1cblxuICAgIHZhciBxdWVzdGlvbnMgPSBxdWVzdGlvbm5haXJlLnF1ZXN0aW9ucztcbiAgICB2YXIgcXVlc3Rpb25SZXNwb25zZXMgPSB7fTtcbiAgICB2YXIgdXNlclF1ZXN0aW9ubmFpcmUgPSB7fTtcblxuICAgICRzY29wZS5xdWVzdGlvbk51bSA9IDA7XG4gICAgJHNjb3BlLmRhdGEgPSB7fTtcbiAgICAkc2NvcGUuZGF0YSA9IHt9O1xuICAgICRzY29wZS5hbnN3ZXJzID0gW107XG5cblxuICAgICRzY29wZS5xdWVyeVNlYXJjaCA9IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiBxdWVyeSA/ICRzY29wZS5saXN0LmZpbHRlciggY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSApIDogJHNjb3BlLmxpc3Q7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGxvYWRBbGwoKSB7XG5cbiAgICAgICAgcmV0dXJuICRzY29wZS5saXN0Lm1hcCggZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0udG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpdGVtXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVGaWx0ZXJGb3IocXVlcnkpIHtcbiAgICAgICAgdmFyIGxvd2VyY2FzZVF1ZXJ5ID0gYW5ndWxhci5sb3dlcmNhc2UocXVlcnkpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZmlsdGVyRm4oaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIChpdGVtLnZhbHVlLmluZGV4T2YobG93ZXJjYXNlUXVlcnkpID09PSAwKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAkc2NvcGUucHVzaEFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcil7XG4gICAgICAgIGlmKGFuc3dlcil7XG4gICAgICAgICAgICAkc2NvcGUuYW5zd2Vycy5wdXNoKGFuc3dlcik7XG4gICAgICAgICAgICAkc2NvcGUuZGF0YS5zaG93QW5zd2VycyA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUuc2VhcmNoVGV4dCA9ICcnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZigkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpe1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvcXVlc3Rpb25uYWlyZS8nKyRyb290U2NvcGUudXNlci51c2VybmFtZSkuXG4gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHVzZXJBbnN3ZXJzKXtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgdXNlckFuc3dlcnMuZGF0YSA9PSAnb2JqZWN0Jyl7XG4gICAgICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvd29ybGRGYWN0Ym9vaycse2xhbmd1YWdlT3B0aW9uOnRydWUsbGFuZ3VhZ2U6dXNlckFuc3dlcnMuZGF0YS5xdWVzdGlvbjF9KS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24oY291bnRyaWVzVG9TZWFyY2gpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWNvbW1lbmRhdGlvbnMgPSBxdWVzdGlvbm5haXJlLmRldGVybWluZVJlY29tbWVuZGF0aW9ucyh1c2VyQW5zd2Vycy5kYXRhLGNvdW50cmllc1RvU2VhcmNoLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJSZWNvbW1lbmRhdGlvbnMuY291bnRyaWVzID0gJHNjb3BlLnJlY29tbWVuZGF0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0UXVlc3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBsb2FkQWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAkc2NvcGUuZ2V0UXVlc3Rpb24gPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUuZGF0YS5zaG93QW5zd2VycyA9IGZhbHNlO1xuXG4gICAgICAgIGlmKCRzY29wZS5xdWVzdGlvbk51bT09cXVlc3Rpb25zLmxlbmd0aCl7XG4gICAgICAgICAgICAkc2NvcGUucXVlc3Rpb24gPSAnWW91ciBsaXN0IGlzIGJlaW5nIGdlbmVyYXRlZCEnO1xuICAgICAgICAgICAgdXNlclF1ZXN0aW9ubmFpcmUudXNlcm5hbWUgPSAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWU7XG4gICAgICAgICAgICB1c2VyUXVlc3Rpb25uYWlyZS5xdWVzdGlvblJlc3BvbnNlcyA9IHF1ZXN0aW9uUmVzcG9uc2VzO1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9xdWVzdGlvbm5haXJlJyx1c2VyUXVlc3Rpb25uYWlyZSk7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3dvcmxkRmFjdGJvb2snLHtsYW5ndWFnZU9wdGlvbjp0cnVlLGxhbmd1YWdlOnF1ZXN0aW9uUmVzcG9uc2VzLnF1ZXN0aW9uMX0pLlxuICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24oY291bnRyaWVzVG9TZWFyY2gpe1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVjb21tZW5kYXRpb25zID0gcXVlc3Rpb25uYWlyZS5kZXRlcm1pbmVSZWNvbW1lbmRhdGlvbnMocXVlc3Rpb25SZXNwb25zZXMsY291bnRyaWVzVG9TZWFyY2guZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJSZWNvbW1lbmRhdGlvbnMuY291bnRyaWVzID0gJHNjb3BlLnJlY29tbWVuZGF0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRzY29wZS50eXBlID0gJyc7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uID0gcXVlc3Rpb25zWyRzY29wZS5xdWVzdGlvbk51bV0ucXVlc3Rpb247XG4gICAgICAgICAgICAkc2NvcGUudHlwZSA9IHF1ZXN0aW9uc1skc2NvcGUucXVlc3Rpb25OdW1dLnR5cGU7XG4gICAgICAgICAgICBpZigkc2NvcGUudHlwZSA9PSAnbGlzdCcpe1xuICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gcXVlc3Rpb25zWyRzY29wZS5xdWVzdGlvbk51bV0uYW5zd2VyT3B0aW9ucztcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfTtcbiAgICAkc2NvcGUubG9nQW5zd2VyID0gZnVuY3Rpb24oYW5zd2VyKXtcbiAgICAgICAgJHNjb3BlLmRhdGEuc2hvd0Fuc3dlcnMgPSBmYWxzZTtcblxuICAgICAgICAkc2NvcGUucXVlc3Rpb25OdW0rKztcblxuICAgICAgICBpZihhbnN3ZXIuY29uc3RydWN0b3IgPT09IEFycmF5KXtcbiAgICAgICAgICAgIGFuc3dlciA9IGFuc3dlci5qb2luKCcgJylcbiAgICAgICAgfVxuICAgICAgICBxdWVzdGlvblJlc3BvbnNlc1tcInF1ZXN0aW9uXCIrKCRzY29wZS5xdWVzdGlvbk51bSldID0gYW5zd2VyO1xuXG4gICAgICAgICRzY29wZS5hbnN3ZXJzID0gW107XG4gICAgICAgICRzY29wZS5zZWFyY2hUZXh0ID0gJyc7XG5cbiAgICB9O1xuXG4gICAgJHNjb3BlLmFkZENvdW50cnkgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3VzZXJDb3VudHJpZXMnLHt1c2VybmFtZTogJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lLHVzZXJDb3VudHJpZXM6IFsnZnJhbmNlJywnZ2VybWFueScsJ3NwYWluJ119KS5cbiAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VyQ291bnRyaWVzID0gcmVzcG9uc2UudXNlckNvdW50cmllcztcbiAgICAgICAgICAgIH0pXG4gICAgfTtcblxuICAgICRzY29wZS5kZWxldGVRdWVzdGlvbm5haXJlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCdhcGkvcXVlc3Rpb25uYWlyZS8nKyRyb290U2NvcGUudXNlci51c2VybmFtZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICB1c2VyUmVjb21tZW5kYXRpb25zID0ge307XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlY29tbWVuZGF0aW9ucyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbk51bSA9IDA7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldFF1ZXN0aW9uKCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBsb2FkQWxsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn1dKTtcbiIsImFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG4gICAgdGhpcy5wYXJzZUp3dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCR3aW5kb3cuYXRvYihiYXNlNjQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIHRoaXMuaXNBdXRoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuZ2V0VG9rZW4oKTtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJzZUp3dCh0b2tlbik7XG4gICAgICAgICAgICB2YXIgbm90RXhwaXJlZCA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSA8PSBwYXJhbXMuZXhwO1xuICAgICAgICAgICAgaWYgKCFub3RFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub3RFeHBpcmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWxldGUgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VKd3QodGhpcy5nZXRUb2tlbigpKVxuICAgIH07XG59XSk7XG4iLCJhcHAuY29udHJvbGxlcignc2lnblVwQ29udHJvbGxlcicsWyckbWRUb2FzdCcsJyRsb2NhdGlvbicsJyRzY29wZScsJyRodHRwJywgZnVuY3Rpb24oJG1kVG9hc3QsJGxvY2F0aW9uLCRzY29wZSwkaHR0cCl7XG5cbiAgICAkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgIHZhciBuZXdVc2VyID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6ICRzY29wZS5mb3JtLnVzZXJOYW1lLFxuICAgICAgICAgICAgZW1haWw6ICRzY29wZS5mb3JtLmVtYWlsLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5mb3JtLnBhc3N3b3JkLFxuICAgICAgICAgICAgbGFzdE5hbWU6ICRzY29wZS5mb3JtLmxhc3ROYW1lLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUuZm9ybS5maXJzdE5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZENvbmZpcm06ICRzY29wZS5mb3JtLnBhc3N3b3JkQ29uZmlybVxuICAgICAgICB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3JlZ2lzdGVyJyxuZXdVc2VyKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JUb2FzdChyZXNwb25zZS5kYXRhLmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZXJyb3JUb2FzdCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQobWVzc2FnZSlcbiAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICk7XG4gICAgfTtcblxufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
